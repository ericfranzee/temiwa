"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8887],{8887:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(3827),a=n(82064),l=n(32635),i=n(48180),o=n(42776),s=n(64090),u=n(91257),c=n(34734),d=n(45943),f=n(54357),v=n(34870),p=n(99270),m=n(92228),h=n(61916),g=n(15626),y=n(98313),x=n(47001),b=e=>{let{confirmationResult:t,credential:n,onConfirmationResultChange:b,onVerifySuccess:w}=e,{t:k}=(0,l.$G)(),[N,S]=(0,s.useState)(""),[j,D]=(0,s.useState)(!1),{settings:Z}=(0,y.r)(),P=(null==Z?void 0:Z.otp_expire_time)?60*Number(Z.otp_expire_time):60,{counter:E,start:I,reset:_}=(0,i.h)(P),{phoneNumberSignIn:C}=(0,a.a)(),{fcmToken:O}=(0,m.n)(),A=(0,h.Z)(e=>e.signIn),{handleSync:F}=(0,g.t)();return(0,s.useEffect)(()=>{I()},[]),(0,r.jsxs)("div",{className:"flex flex-col gap-6  ",children:[(0,r.jsx)("h1",{className:"font-semibold text-[30px] mb-2 text-start",children:(null==n?void 0:n.includes("@"))?k("verify.email"):k("verify.phone")}),(0,r.jsxs)("p",{className:"text-sm",children:[k("verify.text")," ",(0,r.jsx)("i",{children:n})]}),(0,r.jsx)(u.Z,{value:N,onChange:S,containerStyle:{justifyContent:"space-between",gap:"10px"},numInputs:6,renderInput:e=>{let{className:t,...n}=e;return(0,r.jsx)("input",{className:(0,c.Z)("flex-1 focus-visible:border-primary px-1 text-lg border-gray-inputBorder bg-transparent rounded-2xl border appearance-none focus:outline-none py-5 focus:ring-0",t),...n})}}),(null==n?void 0:n.includes("@"))&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[E>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-field",children:[E,"s"]}),(0,r.jsx)("button",{onClick:()=>{n&&((null==n?void 0:n.includes("@"))?f.O.forgotPasswordEmail({email:n}).then(()=>{_(),I(),(0,o.Vp)(k("verify.send"))}).catch(e=>{(0,o.vU)(e.message)}).finally(()=>{D(!1)}):C(n).then(e=>{_(),I(),(0,o.Vp)(k("verify.send")),b(e)}).catch(()=>(0,o.vU)(k("sms.not.sent"))))},className:(0,c.Z)("outline-none focus-ring max-w-max text-sm",E>0&&"text-gray-field"),children:k("resend")})]}),(0,r.jsx)(d.z,{loading:j,onClick:()=>{D(!0),(null==n?void 0:n.includes("@"))?f.O.verifyForgotPasswordEmail({otp:N}).then(e=>{var t,n,r;console.log("res",e),(0,v.d8)("token","".concat((null===(t=e.data)||void 0===t?void 0:t.token_type)||x.H$," ").concat(null===(n=e.data)||void 0===n?void 0:n.access_token)),A(null===(r=e.data)||void 0===r?void 0:r.user),F(),w()}):null==t||t.confirm(N).then(async e=>{let t=await e.user.getIdToken();f.O.forgotPasswordPhone({phone:null==n?void 0:n.replace(/[^0-9]/g,""),type:"firebase",id:t}).then(e=>{(0,v.d8)("token","Bearer ".concat(e.data.access_token)),O&&p.W.updateFirebaseToken({firebase_token:O}),A(e.data.user),F(),w()}).catch(()=>{(0,o.vU)(k("verify.error"))}).finally(()=>{D(!1)})}).catch(()=>{(0,o.vU)(k("verify.error")),D(!1)})},fullWidth:!0,disabled:N.length<6,children:k("verify")})]})}},78826:function(e,t,n){var r=n(22020),a=n(65249);let l=(0,r.Ue)()((0,a.tJ)(e=>({ids:[],addOrRemove:t=>e(e=>({ids:e.ids.includes(t)?e.ids.filter(e=>e!==t):[...e.ids,t]})),clear:()=>e(e=>({...e,ids:[]}))}),{name:"compare"}));t.Z=l},82064:function(e,t,n){n.d(t,{a:function(){return y}});var r=n(64090),a=n(24499),l=n(34870),i=n(61916),o=n(64095),s=n(8186),u=n(22020),c=n(65249);let d=(0,u.Ue)()((0,c.tJ)(e=>({list:[],addToList:t=>e(e=>({list:e.list.includes(t)?e.list:[...e.list,t]})),deleteFromList:t=>e(e=>({list:e.list.filter(e=>e!==t)})),clear:()=>e(e=>({...e,list:[]}))}),{name:"searchHistory"}));var f=n(61429),v=n(28817),p=n(78826),m=n(92228),h=n(54357),g=n(47907);let y=()=>{let e=(0,g.useRouter)(),t=(0,o.NL)(),[u,c]=(0,r.useState)(!1),{signOut:y}=(0,i.Z)(),x=d(e=>e.clear),b=(0,f.Z)(e=>e.clear),w=(0,v.Z)(e=>e.clear),k=(0,p.Z)(e=>e.clear),{fcmToken:N}=(0,m.n)(),{mutate:S}=(0,s.D)({mutationFn:e=>h.O.logout(e),mutationKey:["logout"]}),j=async()=>{let{signOut:e,getAuth:r}=await Promise.all([n.e(3153),n.e(3839)]).then(n.bind(n,92730)),i=r(a.Z);await e(i),c(!1),(0,l.kT)("token"),y(),t.clear(),x(),b("product"),w(),k()},D=async()=>{if(e.replace("/"),N){S({token:N},{onSuccess:async()=>{e.replace("/"),await j()}});return}await j()},Z=async()=>{let{signInWithPopup:e,GoogleAuthProvider:t,getAuth:r}=await Promise.all([n.e(3153),n.e(3839)]).then(n.bind(n,92730));return e(r(a.Z),new t)},P=async()=>{let{signInWithPopup:e,OAuthProvider:t,getAuth:r}=await Promise.all([n.e(3153),n.e(3839)]).then(n.bind(n,92730)),l=r(a.Z),i=new t("apple.com");return i.addScope("email"),i.addScope("name"),e(l,i)},E=async()=>{let{FacebookAuthProvider:e,signInWithPopup:t,getAuth:r}=await Promise.all([n.e(3153),n.e(3839)]).then(n.bind(n,92730));return t(r(a.Z),new e)},I=async e=>{let{getAuth:t,signInWithPhoneNumber:r,RecaptchaVerifier:l}=await Promise.all([n.e(3153),n.e(3839)]).then(n.bind(n,92730)),i=t(a.Z),o=new l(i,"sign-in-button",{size:"invisible",callback:()=>{console.log("Callback!")}});return r(i,e,o)};return(0,r.useEffect)(()=>{c((0,l.h2)("token"))},[]),{logOut:D,googleSignIn:Z,appleSignIn:P,facebookSignIn:E,phoneNumberSignIn:I,isSignedIn:u}}},48180:function(e,t,n){n.d(t,{h:function(){return a}});var r=n(64090);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,[n,a]=(0,r.useState)(e),[l,i]=(0,r.useState)(!1),o=(0,r.useRef)();return(0,r.useEffect)(()=>(o.current=setInterval(()=>{l&&n>0&&a(e=>e-1)},t),0===n&&clearInterval(o.current),()=>clearInterval(o.current)),[l,n,t]),{counter:n,start:()=>i(!0),pause:()=>i(!1),reset:()=>{clearInterval(o.current),i(!0),a(e)}}}},91257:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(64090),a=function(e){return"object"==typeof e&&null!==e},l=function(e){var t=e.value,n=void 0===t?"":t,l=e.numInputs,i=void 0===l?4:l,o=e.onChange,s=e.onPaste,u=e.renderInput,c=e.shouldAutoFocus,d=void 0!==c&&c,f=e.inputType,v=void 0===f?"text":f,p=e.renderSeparator,m=e.placeholder,h=e.containerStyle,g=e.inputStyle,y=e.skipDefaultStyles,x=void 0!==y&&y,b=r.useState(0),w=b[0],k=b[1],N=r.useRef([]),S=function(){return n?n.toString().split(""):[]},j="number"===v||"tel"===v;r.useEffect(function(){N.current=N.current.slice(0,i)},[i]),r.useEffect(function(){var e;d&&(null===(e=N.current[0])||void 0===e||e.focus())},[d]);var D=function(){if("string"==typeof m){if(m.length===i)return m;m.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},Z=function(e){return(j?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},P=function(e){var t=e.target.value;Z(t)&&(O(t),C(w+1))},E=function(e){var t=e.nativeEvent;Z(e.target.value)||(null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),O(""),C(w-1)),e.target.value="")},I=function(){k(w-1)},_=function(e){var t=S();[e.code,e.key].includes("Backspace")?(e.preventDefault(),O(""),C(w-1)):"Delete"===e.code?(e.preventDefault(),O("")):"ArrowLeft"===e.code?(e.preventDefault(),C(w-1)):"ArrowRight"===e.code?(e.preventDefault(),C(w+1)):e.key===t[w]?(e.preventDefault(),C(w+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)&&e.preventDefault()},C=function(e){var t,n,r=Math.max(Math.min(i-1,e),0);N.current[r]&&(null===(t=N.current[r])||void 0===t||t.focus(),null===(n=N.current[r])||void 0===n||n.select(),k(r))},O=function(e){var t=S();t[w]=e[0],A(t)},A=function(e){o(e.join(""))},F=function(e){e.preventDefault();var t,n=S(),r=w,a=e.clipboardData.getData("text/plain").slice(0,i-w).split("");if(!(j&&a.some(function(e){return isNaN(Number(e))}))){for(var l=0;l<i;++l)l>=w&&a.length>0&&(n[l]=null!==(t=a.shift())&&void 0!==t?t:"",r++);C(r),A(n)}};return r.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},a(h)&&h),className:"string"==typeof h?h:void 0,onPaste:s},Array.from({length:i},function(e,t){return t}).map(function(e){var t,n,l;return r.createElement(r.Fragment,{key:e},u({value:null!==(t=S()[e])&&void 0!==t?t:"",placeholder:null!==(l=null===(n=D())||void 0===n?void 0:n[e])&&void 0!==l?l:void 0,ref:function(t){return N.current[e]=t},onChange:P,onFocus:function(t){k(e),t.target.select()},onBlur:I,onKeyDown:_,onPaste:F,autoComplete:"off",maxLength:1,"aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(x?{}:{width:"1em",textAlign:"center"},a(g)?g:{}),className:"string"==typeof g?g:void 0,type:v,inputMode:j?"numeric":"text",onInput:E},e),e<i-1&&("function"==typeof p?p(e):p))}))}}}]);