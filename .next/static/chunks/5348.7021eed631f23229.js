"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5348],{25226:function(e,t,a){a.d(t,{b:function(){return D}});var r=a(3827),l=a(64090),s=a(28817),o=a(24232),n=a(61916),d=a(21879),i=a(44774),c=a(70566),u=a(31087),p=a(4798),h=a(32635),v=a(33062),f=a(2084),y=a(8186),x=a(56455),m=a(24228),C=a(91967),E=a(42776);let g=e=>{let{onCouponCheckSuccess:t,onCouponCheckError:a,onCouponDelete:s,shopId:o}=e,{t:n}=(0,h.$G)(),[d,i]=(0,l.useState)(),[c,u]=(0,l.useState)(!0),g=(0,f.N)(d),{mutate:_,isSuccess:D,isError:P}=(0,y.D)({mutationFn:e=>x.X.checkCoupon({coupon:e,shop_id:o}),onSuccess:e=>{var r,l;(null===(r=e.data)||void 0===r?void 0:r.for)==="total_price"||(null===(l=e.data)||void 0===l?void 0:l.for)==="delivery_fee"?(t(e.data),u(!0)):(a(),u(!1))},onError:e=>{a(),(0,E.vU)(null==e?void 0:e.message)}});(0,l.useEffect)(()=>{g&&g.length>=0?_(g):s()},[g]);let b=null;return d&&d.length<1?b=null:(P||!c)&&g&&g.length>0?b=(0,r.jsx)("span",{className:"text-red",children:(0,r.jsx)(m.Z,{})}):D&&g&&g.length>0&&(b=(0,r.jsx)("span",{className:"text-green",children:(0,r.jsx)(C.Z,{})})),(0,r.jsx)(p.I,{value:d||"",onChange:e=>i(e.target.value),leftIcon:(0,r.jsx)(v.Z,{}),fullWidth:!0,rightIcon:b,label:n("coupon")})},_=(0,o.default)(()=>Promise.all([a.e(3056),a.e(9028)]).then(a.bind(a,59559)).then(e=>({default:e.Empty})),{loadableGenerated:{webpack:()=>[59559]}}),D=e=>{var t,a,l;let{data:o,disabled:p,cartUuid:h,userId:v,showCoupon:f}=e,y=(0,s.Z)(e=>e.userCartUuid),x=(0,n.Z)(e=>e.user),{dispatch:m}=(0,c.useCheckout)();return(0,r.jsxs)(d.p,{shop:null==o?void 0:o.shop,defaultOpen:(null==o?void 0:null===(t=o.cartDetailProducts)||void 0===t?void 0:t.length)!==0,showEstimatedTime:!0,children:[(0,r.jsx)("div",{className:"flex flex-col lg:col-span-5 col-span-7 gap-7 ",children:(null===(a=o.cartDetailProducts)||void 0===a?void 0:a.length)===0?(0,r.jsx)(_,{animated:!1}):null===(l=o.cartDetailProducts)||void 0===l?void 0:l.map(e=>(0,r.jsx)(u.Z,{isCalculating:p,data:e,disabled:y?y!==h:(null==x?void 0:x.id)!==v,showNoteButton:!y},e.id))}),f&&(0,r.jsx)("div",{className:"md:my-7 my-4 flex flex-col md:gap-4 gap-2",children:(0,r.jsx)(g,{shopId:o.shop_id,onCouponCheckSuccess:e=>m({type:i.Y.UpdateShopCoupon,payload:{shopId:o.shop_id,name:e.name}}),onCouponCheckError:()=>m({type:i.Y.UpdateShopCoupon,payload:{shopId:o.shop_id}}),onCouponDelete:()=>m({type:i.Y.DeleteShopCoupon,payload:{shopId:o.shop_id}})})})]})}},85348:function(e,t,a){a.d(t,{c:function(){return f}});var r=a(3827),l=a(11754),s=a(62470);a(64090);var o=a(28817),n=a(32635),d=a(24232),i=a(34734),c=a(61916),u=a(54189),p=a(98313),h=a(25226);let v=(0,d.default)(()=>Promise.all([a.e(3056),a.e(9028)]).then(a.bind(a,59559)).then(e=>({default:e.Empty})),{loadableGenerated:{webpack:()=>[59559]}}),f=e=>{let{data:t,ownerId:a}=e,d=(0,o.Z)(e=>e.userCartUuid),{t:f}=(0,n.$G)(),y=null==t?void 0:t.cartDetails.flatMap(e=>e.cartDetailProducts),{settings:x}=(0,p.r)(),m=(0,c.Z)(e=>e.user);return(0,r.jsx)(l.p,{defaultOpen:(null==y?void 0:y.length)!==0,children:e=>{let{open:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.p.Button,{className:(0,i.Z)("flex w-full justify-between items-center rounded-lg bg-gray-bg px-4 py-2 text-left text-sm font-medium hover:brightness-90 transition-all focus-ring  dark:bg-gray-darkSegment",((null==x?void 0:x.ui_type)==="3"||(null==x?void 0:x.ui_type)==="4")&&"dark:bg-darkBg"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.V,{size:40,name:t.name||""}),(0,r.jsxs)("span",{children:[t.name," ",d===t.uuid&&"(".concat(f("you"),")")," ",(null==t?void 0:t.user_id)===a&&"(".concat(f("owner"),")")]})]}),(0,r.jsx)(s.Z,{className:"".concat(o?"-rotate-90 transform":"rotate-90"," transition-all h-5 w-5")})]}),(0,r.jsx)(l.p.Panel,{children:(0,r.jsx)("div",{className:"flex flex-col lg:col-span-5 col-span-7 gap-7 ",children:(null==y?void 0:y.length)===0?(0,r.jsx)(v,{animated:!1}):t.cartDetails.map(e=>(0,r.jsx)(h.b,{data:e,cartUuid:t.uuid,userId:t.user_id,showCoupon:(null==m?void 0:m.id)===a&&(null==m?void 0:m.id)===(null==t?void 0:t.user_id)},e.id))})})]})}})}},33062:function(e,t,a){var r=a(3827);t.Z=()=>(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("g",{clipPath:"url(#clip0_1_2837)",children:(0,r.jsx)("path",{d:"M9.16675 17.5C9.16675 17.1685 9.03505 16.8505 8.80063 16.6161C8.56621 16.3817 8.24827 16.25 7.91675 16.25C7.58523 16.25 7.26729 16.3817 7.03286 16.6161C6.79844 16.8505 6.66675 17.1685 6.66675 17.5H2.50008C2.27907 17.5 2.06711 17.4122 1.91083 17.2559C1.75455 17.0996 1.66675 16.8877 1.66675 16.6667V3.33333C1.66675 3.11232 1.75455 2.90036 1.91083 2.74408C2.06711 2.5878 2.27907 2.5 2.50008 2.5H6.66675C6.66675 2.83152 6.79844 3.14946 7.03286 3.38388C7.26729 3.6183 7.58523 3.75 7.91675 3.75C8.24827 3.75 8.56621 3.6183 8.80063 3.38388C9.03505 3.14946 9.16675 2.83152 9.16675 2.5H17.5001C17.7211 2.5 17.9331 2.5878 18.0893 2.74408C18.2456 2.90036 18.3334 3.11232 18.3334 3.33333V7.91667C17.7809 7.91667 17.251 8.13616 16.8603 8.52686C16.4696 8.91756 16.2501 9.44747 16.2501 10C16.2501 10.5525 16.4696 11.0824 16.8603 11.4731C17.251 11.8638 17.7809 12.0833 18.3334 12.0833V16.6667C18.3334 16.8877 18.2456 17.0996 18.0893 17.2559C17.9331 17.4122 17.7211 17.5 17.5001 17.5H9.16675ZM7.91675 8.75C8.24827 8.75 8.56621 8.6183 8.80063 8.38388C9.03505 8.14946 9.16675 7.83152 9.16675 7.5C9.16675 7.16848 9.03505 6.85054 8.80063 6.61612C8.56621 6.3817 8.24827 6.25 7.91675 6.25C7.58523 6.25 7.26729 6.3817 7.03286 6.61612C6.79844 6.85054 6.66675 7.16848 6.66675 7.5C6.66675 7.83152 6.79844 8.14946 7.03286 8.38388C7.26729 8.6183 7.58523 8.75 7.91675 8.75ZM7.91675 13.75C8.24827 13.75 8.56621 13.6183 8.80063 13.3839C9.03505 13.1495 9.16675 12.8315 9.16675 12.5C9.16675 12.1685 9.03505 11.8505 8.80063 11.6161C8.56621 11.3817 8.24827 11.25 7.91675 11.25C7.58523 11.25 7.26729 11.3817 7.03286 11.6161C6.79844 11.8505 6.66675 12.1685 6.66675 12.5C6.66675 12.8315 6.79844 13.1495 7.03286 13.3839C7.26729 13.6183 7.58523 13.75 7.91675 13.75Z",fill:"currentColor"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1_2837",children:(0,r.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})},91967:function(e,t,a){var r=a(3827);a(64090),t.Z=e=>(0,r.jsxs)("svg",{width:e.size||"20",height:e.size||"20",...e,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("g",{clipPath:"url(#clip0_1_9251)",children:(0,r.jsx)("path",{d:"M9.66825 11.4667L10.8449 12.6434L17.8999 5.58838L19.0783 6.76671L10.8449 15L5.54159 9.69671L6.71992 8.51838L8.49075 10.2892L9.66825 11.4659V11.4667ZM9.66992 9.11004L13.7966 4.98254L14.9716 6.15754L10.8449 10.285L9.66992 9.11004ZM7.31409 13.8225L6.13659 15L0.833252 9.69671L2.01159 8.51838L3.18909 9.69588L3.18825 9.69671L7.31409 13.8225Z",fill:"currentColor"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1_9251",children:(0,r.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})},4798:function(e,t,a){a.d(t,{I:function(){return d}});var r=a(3827),l=a(34734),s=a(64090),o=a(32635),n=a(70577);let d=(0,s.forwardRef)((e,t)=>{let{fullWidth:a,label:d,type:i,className:c,error:u,rightIcon:p,status:h="default",autoComplete:v,placeholder:f,leftIcon:y,containerClassName:x,required:m,disabled:C,id:E,...g}=e,[_,D]=(0,s.useState)(i||"text"),{t:P}=(0,o.$G)(),b=(0,s.useId)();return(0,r.jsxs)("div",{className:(0,l.Z)("relative flex flex-col items-start",a&&"w-full",x),children:[(0,r.jsxs)("div",{className:(0,l.Z)("relative",a&&"w-full"),children:[(0,r.jsx)("input",{ref:t,id:b,type:_,autoComplete:"off",placeholder:" ",disabled:C,...g,className:(0,l.Z)("block px-4 w-full text-sm  bg-transparent rounded-button border appearance-none focus:outline-none focus:ring-0  peer ",a&&"w-full",!!p&&"pr-8",!!y&&"pl-10",d?"pt-4 pb-[12px]":"py-[19px]","default"===h&&"border-gray-link focus-visible:border-primary","error"===h&&"border-badge-product focus-visible:border-red-700","success"===h&&"border-green-500 focus-visible:border-red-700",C&&"text-gray-field",c)}),"password"===i&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 z-10",children:(0,r.jsx)(n.h,{rounded:!0,type:"button",onClick:()=>{"password"===_?D("text"):D("password")},children:"password"===_?(0,r.jsx)("i",{className:"ri-eye-line"}):(0,r.jsx)("i",{className:"ri-eye-close-line"})})}),!!y&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pr-3 z-[4]",children:y}),!!p&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-1.5 z-[4]",children:p}),(0,r.jsxs)("label",{htmlFor:b,className:(0,l.Z)("absolute text-sm text-gray-placeholder duration-300 transform -translate-y-3 scale-75 top-3.5 origin-[0] peer-focus:text-black dark:peer-focus:text-white peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3.5",y?"left-10 rtl:right-10 rtl:left-auto":"left-4 rtl:right-0 rtl:left-auto",C&&"text-gray-field"),children:[d,m&&"*"]})]}),u&&(0,r.jsx)("p",{role:"alert",className:"text-red text-sm mt-1",children:P(u)})]})})},54189:function(e,t,a){a.d(t,{V:function(){return l}});var r=a(3827);let l=e=>{let{name:t,size:a}=e;return(0,r.jsx)("div",{className:"rounded-full aspect-square bg-primary flex items-center justify-center",style:{width:a,height:a},children:(0,r.jsx)("span",{className:"text-white text-sm",style:{fontSize:"".concat(a/3,"px")},children:null==t?void 0:t.charAt(0)})})}},70566:function(e,t,a){a.r(t),a.d(t,{useCheckout:function(){return d}});var r=a(3827),l=a(64090),s=a(44774);let o={deliveryType:"delivery",deliveryDate:new Date(Date.now()),notes:{},shopNotes:{},coupons:{}},n=(0,l.createContext)({state:o,dispatch:()=>null});t.default=e=>{let{children:t}=e,[a,d]=(0,l.useReducer)(s.A,o),i=(0,l.useMemo)(()=>({state:a,dispatch:d}),[a]);return(0,r.jsx)(n.Provider,{value:i,children:t})};let d=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useCheckout has to be used within <CheckoutContext.Provider>");return e}},44774:function(e,t,a){var r,l;a.d(t,{A:function(){return s},Y:function(){return r}}),(l=r||(r={})).UpdateDeliveryType="UPDATE_DELIVERY_TYPE",l.UpdateDeliveryPoint="UPDATE_DELIVERY_POINT",l.UpdatePaymentMethod="UPDATE_PAYMENT_METHOD",l.UpdateDeliverDate="UPDATE_DELIVERY_DATE",l.UpdateDeliveryAddress="UPDATE_DELIVERY_ADDRESS",l.ClearState="CLEAR_STATE",l.UpdateProductNote="UPDATE_PRODUCT_NOTE",l.UpdateShopNote="UPDATE_SHOP_NOTE",l.UpdateShopCoupon="UPDATE_SHOP_COUPON",l.DeleteShopCoupon="DELETE_SHOP_COUPON",l.UpdateTips="UPDATE_TIPS";let s=(e,t)=>{switch(t.type){case"UPDATE_DELIVERY_TYPE":return{...e,deliveryType:t.payload.type};case"UPDATE_DELIVERY_POINT":return{...e,deliveryPoint:t.payload.point};case"UPDATE_PAYMENT_METHOD":return{...e,paymentMethod:t.payload.paymentMethod};case"UPDATE_DELIVERY_DATE":return{...e,deliveryDate:t.payload.date};case"UPDATE_DELIVERY_ADDRESS":return{...e,deliveryAddress:t.payload.address,deliveryPrice:t.payload.deliveryPrice};case"UPDATE_PRODUCT_NOTE":return{...e,notes:{...e.notes,[t.payload.stockId]:t.payload.note}};case"UPDATE_SHOP_NOTE":return{...e,shopNotes:{...e.shopNotes,[t.payload.shopId]:t.payload.note}};case"UPDATE_SHOP_COUPON":return{...e,coupons:{...e.coupons,[t.payload.shopId]:t.payload.name}};case"DELETE_SHOP_COUPON":{let a={...e.coupons};return null==a||delete a[t.payload.shopId],{...e,coupons:a}}case"UPDATE_TIPS":return{...e,tips:t.payload.tips};case"CLEAR_STATE":return{deliveryType:"delivery",deliveryPoint:void 0,deliveryPrice:void 0,deliveryAddress:void 0,paymentMethod:void 0,deliveryDate:new Date(Date.now()),notes:t.payload.all?{}:e.notes,shopNotes:t.payload.all?{}:e.shopNotes,coupons:t.payload.all?{}:e.coupons};default:return e}}},56455:function(e,t,a){a.d(t,{X:function(){return n}});var r=a(31995),l=a(68466),s=a(34870),o=a(47001);let n={create:async e=>r.Z.post("v1/dashboard/user/orders",{body:e}),paymentList:e=>(0,r.Z)((0,l.d)("v1/rest/payments",e)),deliveryPoints:e=>(0,r.Z)((0,l.d)("v1/rest/delivery-points",e)),createMembershipTransaction:(e,t)=>r.Z.post("v1/payments/member-ship/".concat(e,"/transactions"),{body:t}),createGiftCartTransaction:(e,t)=>r.Z.post("v1/payments/gift-cart/".concat(e,"/transactions"),{body:t}),checkCoupon:e=>r.Z.post((0,l.d)("v1/rest/coupons/check",e)),getAll:e=>(0,r.Z)((0,l.d)("v1/dashboard/user/orders/paginate",e)),get:(e,t)=>(0,r.Z)((0,l.d)("v1/dashboard/user/orders/".concat(e,"/get-all"),t),{redirectOnError:!0}),cancel:e=>r.Z.post("v1/dashboard/user/orders/".concat(e,"/status/change?status=canceled")),externalPayment:(e,t)=>r.Z.post((0,l.d)("v1/dashboard/user/".concat(e,"-process")),{body:t}),downloadInvoice:e=>fetch("".concat(o._n,"v1/dashboard/user/export/all/order/").concat(e,"/pdf"),{headers:{"Content-Type":"application/pdf",Authorization:(0,s.ej)("token")}}),rateDeliveryman:(e,t)=>r.Z.post("v1/dashboard/user/orders/deliveryman-review/".concat(e),{body:t})}}}]);