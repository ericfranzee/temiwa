"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4105],{4105:function(e,t,r){r.r(t),r.d(t,{GiftCartSelect:function(){return p}});var i=r(3827),n=r(2868),a=r(16777),l=r(98313),s=r(32635),o=r(60140);r(64090);var c=r(86926),u=r(97864),d=r(24232),g=r(32950),f=r(28324),h=r(89539),v=r.n(h);let m=(0,d.default)(()=>Promise.all([r.e(3056),r.e(9028)]).then(r.bind(r,59559)).then(e=>({default:e.Empty})),{loadableGenerated:{webpack:()=>[59559]}}),p=e=>{let{shopId:t,onSelect:r}=e,{language:d,currency:h}=(0,l.r)(),{t:p}=(0,s.$G)(),{dispatch:b,state:P}=(0,c.v)(),{data:x,hasNextPage:y,fetchNextPage:_,isFetchingNextPage:j,isError:N}=(0,n.N)(["myGiftCarts",t],e=>{let{pageParam:r}=e;return g.p.getMyAll({lang:null==d?void 0:d.locale,page:r,shop_id:t,currency:null==h?void 0:h.id})},{staleTime:0,getNextPageParam:e=>e.links.next&&e.meta.current_page+1,refetchOnWindowFocus:!1,suspense:!0,enabled:!!t}),w=(0,a.v)(null==x?void 0:x.pages),M=e=>{t&&(b({type:u.Y.SelectGiftCart,payload:e}),r())};return(0,i.jsxs)("div",{className:"pt-10 pb-6 px-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:p("select.gift.cart")}),w&&0!==w.length&&!N?(0,i.jsx)(o.b,{loadMore:_,hasMore:y,loading:j,children:(0,i.jsx)("div",{className:"relative grid grid-cols-1 md:gap-7 sm:gap-4 gap-2 mt-6",children:null==w?void 0:w.map((e,t)=>{var r;return(0,i.jsx)(f.S,{index:t,isSelected:(null===(r=P.giftCart)||void 0===r?void 0:r.id)===e.giftCart.id,data:{...e.giftCart,price:null==e?void 0:e.price,time:v()(e.expired_at).format("YYYY-MM-DD HH:mm")},onClick:()=>M({...e.giftCart,shopGiftCartId:e.id})},e.id)})})}):(0,i.jsx)(m,{animated:!1,text:"empty.gift.cart",imagePath:"/img/empty_gift_card.png",description:"gift.cart.empty.description"})]})}},28324:function(e,t,r){r.d(t,{S:function(){return c}});var i=r(3827),n=r(32635),a=r(34734),l=r(12694),s=r(20703);let o=[{bg:"bg-gift_card_bg_1",color:"#9798D9"},{bg:"bg-gift_card_bg_2",color:"#75B16E"},{bg:"bg-gift_card_bg_3",color:"#E89B46"},{bg:"bg-gift_card_bg_4",color:"#53C9D5"},{bg:"bg-gift_card_bg_5",color:"#95CC82"}],c=e=>{let{data:t,onClick:r,isSelected:c,index:u}=e,{t:d}=(0,n.$G)();return(0,i.jsxs)("button",{className:(0,a.Z)("aspect-[410/180] rounded-button p-3 flex flex-col justify-between w-full bg-cover bg-no-repeat",c&&"ring ring-primary ring-offset-2 rounded-button",o[u%5].bg),onClick:r,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,i.jsx)(s.default,{src:"/img/gift_card.png",alt:"gift_card",width:153,height:90}),(0,i.jsx)("span",{className:" md:text-5xl font-semibold text-white",children:(0,i.jsx)(l.t,{number:t.price})})]}),(0,i.jsx)("div",{className:"flex items-center justify-end",children:(0,i.jsxs)("span",{className:(0,a.Z)("text-sm"),style:{color:o[u%5].color},children:[d("valid.for")," ",t.time]})})]})}},60140:function(e,t,r){r.d(t,{b:function(){return s}});var i=r(3827),n=r(64090);let a=e=>{let{threshold:t=.1,root:r=null,rootMargin:i="50%",enabled:a=!1,onScreen:l=()=>null}=e,s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=null==s?void 0:s.current;if(!a||!e)return;let n=new IntersectionObserver(e=>e.forEach(e=>{e.isIntersecting&&l()}),{threshold:t,root:r,rootMargin:i});return n.observe(e),()=>{n.unobserve(e)}},[null==s?void 0:s.current,a]),s};var l=r(29541);let s=e=>{let{hasMore:t,loadMore:r,loading:n=!1,children:s}=e,o=a({enabled:!!t&&!n,onScreen:()=>{r()},rootMargin:"30px",threshold:.2});return(0,i.jsxs)(i.Fragment,{children:[s,n&&(0,i.jsx)("div",{className:"flex justify-center my-7",children:(0,i.jsx)(l.Z,{})}),(0,i.jsx)("span",{"aria-label":"bottom",ref:o,style:{visibility:"hidden"}})]})}},32950:function(e,t,r){r.d(t,{p:function(){return a}});var i=r(31995),n=r(68466);let a={getAll:(e,t)=>(0,i.Z)((0,n.d)("v1/rest/gift-carts/paginate",t)),getMyAll:e=>(0,i.Z)((0,n.d)("v1/dashboard/user/gift-carts/my-carts",e))}},16777:function(e,t,r){r.d(t,{v:function(){return i}});let i=e=>null==e?void 0:e.reduce((e,t)=>e.concat(t.data),[])},14284:function(e,t,r){function i(){return{onFetch:e=>{e.fetchFn=()=>{var t,r,i,l,s,o;let c;let u=null==(t=e.fetchOptions)?void 0:null==(r=t.meta)?void 0:r.refetchPage,d=null==(i=e.fetchOptions)?void 0:null==(l=i.meta)?void 0:l.fetchMore,g=null==d?void 0:d.pageParam,f=(null==d?void 0:d.direction)==="forward",h=(null==d?void 0:d.direction)==="backward",v=(null==(s=e.state.data)?void 0:s.pages)||[],m=(null==(o=e.state.data)?void 0:o.pageParams)||[],p=m,b=!1,P=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{var t,r;return null!=(t=e.signal)&&t.aborted?b=!0:null==(r=e.signal)||r.addEventListener("abort",()=>{b=!0}),e.signal}})},x=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),y=(e,t,r,i)=>(p=i?[t,...p]:[...p,t],i?[r,...e]:[...e,r]),_=(t,r,i,n)=>{if(b)return Promise.reject("Cancelled");if(void 0===i&&!r&&t.length)return Promise.resolve(t);let a={queryKey:e.queryKey,pageParam:i,meta:e.options.meta};return P(a),Promise.resolve(x(a)).then(e=>y(t,i,e,n))};if(v.length){if(f){let t=void 0!==g,r=t?g:n(e.options,v);c=_(v,t,r)}else if(h){let t=void 0!==g,r=t?g:a(e.options,v);c=_(v,t,r,!0)}else{p=[];let t=void 0===e.options.getNextPageParam;c=!u||!v[0]||u(v[0],0,v)?_([],t,m[0]):Promise.resolve(y([],m[0],v[0]));for(let r=1;r<v.length;r++)c=c.then(i=>{if(!u||!v[r]||u(v[r],r,v)){let a=t?m[r]:n(e.options,i);return _(i,t,a)}return Promise.resolve(y(i,m[r],v[r]))})}}else c=_([]);return c.then(e=>({pages:e,pageParams:p}))}}}}function n(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function a(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function l(e,t){if(e.getNextPageParam&&Array.isArray(t)){let r=n(e,t);return null!=r&&!1!==r}}function s(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){let r=a(e,t);return null!=r&&!1!==r}}r.d(t,{Gm:function(){return i},Qy:function(){return l},ZF:function(){return s}})},2868:function(e,t,r){r.d(t,{N:function(){return o}});var i=r(31678),n=r(87307),a=r(14284);class l extends n.z{bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,a.Gm)()},t)}getOptimisticResult(e){return e.behavior=(0,a.Gm)(),super.getOptimisticResult(e)}fetchNextPage(){let{pageParam:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage(){let{pageParam:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var r,i,n,l,s,o;let{state:c}=e,u=super.createResult(e,t),{isFetching:d,isRefetching:g}=u,f=d&&(null==(r=c.fetchMeta)?void 0:null==(i=r.fetchMore)?void 0:i.direction)==="forward",h=d&&(null==(n=c.fetchMeta)?void 0:null==(l=n.fetchMore)?void 0:l.direction)==="backward";return{...u,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,a.Qy)(t,null==(s=c.data)?void 0:s.pages),hasPreviousPage:(0,a.ZF)(t,null==(o=c.data)?void 0:o.pages),isFetchingNextPage:f,isFetchingPreviousPage:h,isRefetching:g&&!f&&!h}}constructor(e,t){super(e,t)}}var s=r(80385);function o(e,t,r){let n=(0,i._v)(e,t,r);return(0,s.r)(n,l)}}}]);