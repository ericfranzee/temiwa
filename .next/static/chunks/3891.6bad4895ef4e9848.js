"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3891],{41359:function(e,r,l){l.r(r),l.d(r,{default:function(){return w}});var s=l(3827),t=l(64090),a=l(32635),i=l(41991),o=l(82670),n=l(87957),d=l(4798),c=l(45943),u=l(54357),f=l(42776),p=l(34870),m=l(99270),x=l(92228),h=l(61916),v=l(47907),b=l(15626);let g=i.object({firstname:i.string().required(),lastname:i.string().required(),referral:i.string(),password:i.string().required(),password_confirmation:i.string().nullable().oneOf([i.ref("password"),null])});var w=e=>{var r,l,i,w,y;let{credential:j,idToken:N}=e,{t:k}=(0,a.$G)(),{handleSync:_}=(0,b.t)(),[I,W]=(0,t.useState)(!1),{fcmToken:C}=(0,x.n)(),S=(0,h.Z)(e=>e.signIn),Z=(0,v.useRouter)(),z=(0,v.useSearchParams)(),{register:U,formState:{errors:q},handleSubmit:O}=(0,o.cI)({resolver:(0,n.X)(g)}),E=e=>{(0,f.Vp)("successfully.signed.up"),(0,p.d8)("token","".concat(e.token_type," ").concat(e.access_token)),C&&m.W.updateFirebaseToken({firebase_token:C}),S(e.user),_(),z.has("redirect")?Z.replace(z.get("redirect")):Z.replace("/")};return(0,s.jsxs)("div",{className:"flex flex-col gap-6  ",children:[(0,s.jsx)("h1",{className:"font-semibold text-[30px] mb-2 text-start",children:k("complete.auth")}),(0,s.jsxs)("form",{id:"complete",onSubmit:O(e=>{var r,l;W(!0);let s={...e,referral:(null==e?void 0:null===(l=e.referral)||void 0===l?void 0:null===(r=l.trim())||void 0===r?void 0:r.length)?e.referral:void 0};if((null==j?void 0:j.includes("@"))?s.email=j:(s.phone=null==j?void 0:j.replace(/[^0-9]/g,""),s.type="firebase",s.id=N),null==j?void 0:j.includes("@")){u.O.signUpComplete(s).then(e=>{let{data:r}=e;E(r)}).catch(e=>(0,f.vU)(k(null==e?void 0:e.message))).finally(()=>W(!1));return}u.O.phoneSignUpComplete(s).then(e=>{let{data:r}=e;E(r)}).catch(e=>(0,f.vU)(k(null==e?void 0:e.message))).finally(()=>W(!1))}),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 mb-8 w-full",children:[(0,s.jsx)(d.I,{fullWidth:!0,...U("firstname"),label:k("firstname"),error:null===(r=q.firstname)||void 0===r?void 0:r.message}),(0,s.jsx)(d.I,{fullWidth:!0,...U("lastname"),label:k("lastname"),error:null===(l=q.lastname)||void 0===l?void 0:l.message}),(0,s.jsx)(d.I,{fullWidth:!0,...U("referral"),label:k("referral"),error:null===(i=q.referral)||void 0===i?void 0:i.message}),(0,s.jsx)(d.I,{fullWidth:!0,...U("password"),label:k("password"),type:"password",error:null===(w=q.password)||void 0===w?void 0:w.message}),(0,s.jsx)(d.I,{fullWidth:!0,...U("password_confirmation"),label:k("password.confirmation"),type:"password",error:null===(y=q.password_confirmation)||void 0===y?void 0:y.message})]}),(0,s.jsx)(c.z,{loading:I,fullWidth:!0,type:"submit",form:"complete",children:k("complete")})]})]})}},4798:function(e,r,l){l.d(r,{I:function(){return n}});var s=l(3827),t=l(34734),a=l(64090),i=l(32635),o=l(70577);let n=(0,a.forwardRef)((e,r)=>{let{fullWidth:l,label:n,type:d,className:c,error:u,rightIcon:f,status:p="default",autoComplete:m,placeholder:x,leftIcon:h,containerClassName:v,required:b,disabled:g,id:w,...y}=e,[j,N]=(0,a.useState)(d||"text"),{t:k}=(0,i.$G)(),_=(0,a.useId)();return(0,s.jsxs)("div",{className:(0,t.Z)("relative flex flex-col items-start",l&&"w-full",v),children:[(0,s.jsxs)("div",{className:(0,t.Z)("relative",l&&"w-full"),children:[(0,s.jsx)("input",{ref:r,id:_,type:j,autoComplete:"off",placeholder:" ",disabled:g,...y,className:(0,t.Z)("block px-4 w-full text-sm  bg-transparent rounded-button border appearance-none focus:outline-none focus:ring-0  peer ",l&&"w-full",!!f&&"pr-8",!!h&&"pl-10",n?"pt-4 pb-[12px]":"py-[19px]","default"===p&&"border-gray-link focus-visible:border-primary","error"===p&&"border-badge-product focus-visible:border-red-700","success"===p&&"border-green-500 focus-visible:border-red-700",g&&"text-gray-field",c)}),"password"===d&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 z-10",children:(0,s.jsx)(o.h,{rounded:!0,type:"button",onClick:()=>{"password"===j?N("text"):N("password")},children:"password"===j?(0,s.jsx)("i",{className:"ri-eye-line"}):(0,s.jsx)("i",{className:"ri-eye-close-line"})})}),!!h&&(0,s.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pr-3 z-[4]",children:h}),!!f&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-1.5 z-[4]",children:f}),(0,s.jsxs)("label",{htmlFor:_,className:(0,t.Z)("absolute text-sm text-gray-placeholder duration-300 transform -translate-y-3 scale-75 top-3.5 origin-[0] peer-focus:text-black dark:peer-focus:text-white peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3.5",h?"left-10 rtl:right-10 rtl:left-auto":"left-4 rtl:right-0 rtl:left-auto",g&&"text-gray-field"),children:[n,b&&"*"]})]}),u&&(0,s.jsx)("p",{role:"alert",className:"text-red text-sm mt-1",children:k(u)})]})})}}]);