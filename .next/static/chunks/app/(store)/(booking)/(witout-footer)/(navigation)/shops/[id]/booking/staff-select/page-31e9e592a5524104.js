(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3285],{73487:function(e,t,s){Promise.resolve().then(s.bind(s,41556)),Promise.resolve().then(s.bind(s,42067)),Promise.resolve().then(s.bind(s,35559)),Promise.resolve().then(s.bind(s,46941))},42067:function(e,t,s){"use strict";s.r(t),s.d(t,{StaffSelect:function(){return y}});var r=s(3827),i=s(2868),l=s(9988),n=s(21189),a=s(36964),d=s(16777),o=s(60140),c=s(86926),u=s(97864),v=s(34734),m=s(96385),h=s.n(m),p=s(32635),x=s(2008),g=s(54965),f=s(98313),b=s(42776);let y=e=>{var t,s;let{shopId:m}=e,{dispatch:y,state:j}=(0,c.v)(),{t:k}=(0,p.$G)(),{currency:w}=(0,f.r)(),N=j.services.map(e=>e.id),{data:Z,hasNextPage:C,fetchNextPage:_,isFetchingNextPage:L}=(0,i.N)(["masters",m,N],()=>n.L.list({shop_id:m,service_ids:N,currency_id:null==w?void 0:w.id}),{getNextPageParam:e=>e.links.next&&e.meta.current_page+1,suspense:!0}),{data:M,isLoading:S}=(0,l.a)(["serviceMaster",null===(t=j.master)||void 0===t?void 0:t.id],()=>{var e;return x.o.getServiceMasters({master_id:null===(e=j.master)||void 0===e?void 0:e.id,currency_id:null==w?void 0:w.id})},{enabled:!!(null===(s=j.master)||void 0===s?void 0:s.id),onSuccess:e=>{var t;if(!j.master)return;let s=null===(t=e.data)||void 0===t?void 0:t.map(e=>e.service_id);if(!j.services.every(e=>s.includes(e.id))){(0,b.vU)(k("selected.master.does.not.support.chosen.services")),y({type:u.Y.UnsupportedMastersByServices,payload:j.master.id}),y({type:u.Y.UnSetMaster});return}y({type:u.Y.SetOnlyMaster,payload:{master:j.master,serviceMasterInfo:e.data}})}}),I=(0,d.v)(null==Z?void 0:Z.pages);return(0,r.jsxs)("div",{className:"relative",children:[S&&j.master&&(0,r.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 bg-white bg-opacity-60 flex items-center justify-center",children:(0,r.jsx)(g.W,{})}),(0,r.jsx)(o.b,{hasMore:C,loadMore:_,loading:L,children:(0,r.jsxs)("div",{className:"grid md:grid-cols-3 sm:grid-cols-3 grid-cols-2 gap-4 mt-6",children:[(0,r.jsxs)("button",{className:(0,v.Z)("rounded-button border border-gray-link flex items-center justify-center flex-col gap-3",!j.master&&"ring-2 ring-black"),onClick:()=>y({type:u.Y.UnSetMaster}),children:[(0,r.jsx)(h(),{}),(0,r.jsx)("span",{className:"text-sm font-medium",children:k("select.master.per.service")})]}),null==I?void 0:I.map(e=>{var t,s,i;return(0,r.jsx)("button",{onClick:()=>y({type:u.Y.SetOnlyMaster,payload:{master:e,serviceMasterInfo:null==M?void 0:M.data}}),disabled:!!(null==j?void 0:null===(t=j.unsupportedMastersByServices)||void 0===t?void 0:t.includes(e.id)),className:(0,v.Z)((null==j?void 0:null===(s=j.unsupportedMastersByServices)||void 0===s?void 0:s.includes(e.id))?"opacity-50 cursor-not-allowed":""),children:(0,r.jsx)(a.N,{selected:(null===(i=j.master)||void 0===i?void 0:i.id)===e.id,data:e},e.id)},e.id)})]})})]})}},24228:function(e,t,s){"use strict";var r=s(3827);s(64090),t.Z=e=>{let{size:t,...s}=e;return(0,r.jsxs)("svg",{width:t||"30",height:t||"30",...s,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("g",{clipPath:"url(#clip0_1_7002)",children:(0,r.jsx)("path",{d:"M14.9999 13.2324L21.1874 7.04492L22.9549 8.81242L16.7674 14.9999L22.9549 21.1874L21.1874 22.9549L14.9999 16.7674L8.81242 22.9549L7.04492 21.1874L13.2324 14.9999L7.04492 8.81242L8.81242 7.04492L14.9999 13.2324Z",fill:"currentColor"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1_7002",children:(0,r.jsx)("rect",{width:"30",height:"30",fill:"white"})})})]})}},67379:function(e,t,s){"use strict";var r=s(3827);t.Z=e=>{let{size:t,...s}=e;return(0,r.jsx)("svg",{width:t||"26",height:t||"26",...s,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12.9998 2.16699C7.01984 2.16699 2.1665 7.02033 2.1665 13.0003C2.1665 18.9803 7.01984 23.8337 12.9998 23.8337C18.9798 23.8337 23.8332 18.9803 23.8332 13.0003C23.8332 7.02033 18.9798 2.16699 12.9998 2.16699ZM13.3573 18.417C13.1623 18.482 12.8265 18.482 12.6315 18.417C10.9415 17.8428 7.14984 15.427 7.14984 11.332C7.14984 9.52283 8.6015 8.06033 10.3998 8.06033C11.4615 8.06033 12.404 8.56949 12.9998 9.37116C13.5848 8.58032 14.5382 8.06033 15.5998 8.06033C17.3982 8.06033 18.8498 9.52283 18.8498 11.332C18.8498 15.427 15.0582 17.8428 13.3573 18.417Z",fill:"currentColor"})})}},86841:function(e,t,s){"use strict";var r=s(3827);s(64090),t.Z=e=>{let{size:t,...s}=e;return(0,r.jsxs)("svg",{width:t||"36",height:t||"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[(0,r.jsx)("path",{d:"M18 33C26.2843 33 33 26.2843 33 18C33 9.71573 26.2843 3 18 3C9.71573 3 3 9.71573 3 18C3 26.2843 9.71573 33 18 33Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M18.4954 26.175C18.2254 26.265 17.7604 26.265 17.4904 26.175C15.1504 25.38 9.90039 22.0349 9.90039 16.3649C9.90039 13.8599 11.9104 11.835 14.4004 11.835C15.8704 11.835 17.1754 12.5399 18.0004 13.6499C18.8104 12.5549 20.1304 11.835 21.6004 11.835C24.0904 11.835 26.1004 13.8599 26.1004 16.3649C26.1004 22.0349 20.8504 25.38 18.4954 26.175Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}},42776:function(e,t,s){"use strict";s.d(t,{vU:function(){return g},Vp:function(){return p},Kp:function(){return x}});var r=s(3827),i=s(30298),l=s(87548),n=s.n(l),a=s(34160),d=s.n(a);s(69995),s(64090);var o=s(70577),c=s(24228),u=s(34734);let v={success:"bg-green-600",warning:"bg-yellow-600",error:"bg-red-600",info:"bg-blue-600"},m=e=>{let{icon:t,message:s,type:i}=e;return(0,r.jsxs)("div",{className:(0,u.Z)("rounded-3xl flex items-center gap-3"),children:[(0,r.jsx)("div",{className:(0,u.Z)("w-6 h-6 rounded-xl flex items-center justify-center  text-white",v[i]),children:t}),(0,r.jsx)("div",{className:"text-base dark:text-white",children:s})]})},h={closeButton:(0,r.jsx)(o.h,{children:(0,r.jsx)(c.Z,{size:24})}),hideProgressBar:!0,className:"!bg-white !bg-opacity-60 !rounded-2xl backdrop-blur-lg dark:!bg-dark dark:!bg-opacity-30",transition:i.Mi},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;(0,i.Am)((0,r.jsx)(m,{icon:(0,r.jsx)(n(),{}),message:e,type:"success"}),t)},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;(0,i.Am)((0,r.jsx)(m,{icon:(0,r.jsx)(d(),{}),message:e,type:"warning"}),t)},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;(0,i.Am)((0,r.jsx)(m,{icon:(0,r.jsx)(d(),{}),message:e,type:"error"}),t)}},60140:function(e,t,s){"use strict";s.d(t,{b:function(){return a}});var r=s(3827),i=s(64090);let l=e=>{let{threshold:t=.1,root:s=null,rootMargin:r="50%",enabled:l=!1,onScreen:n=()=>null}=e,a=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=null==a?void 0:a.current;if(!l||!e)return;let i=new IntersectionObserver(e=>e.forEach(e=>{e.isIntersecting&&n()}),{threshold:t,root:s,rootMargin:r});return i.observe(e),()=>{i.unobserve(e)}},[null==a?void 0:a.current,l]),a};var n=s(29541);let a=e=>{let{hasMore:t,loadMore:s,loading:i=!1,children:a}=e,d=l({enabled:!!t&&!i,onScreen:()=>{s()},rootMargin:"30px",threshold:.2});return(0,r.jsxs)(r.Fragment,{children:[a,i&&(0,r.jsx)("div",{className:"flex justify-center my-7",children:(0,r.jsx)(n.Z,{})}),(0,r.jsx)("span",{"aria-label":"bottom",ref:d,style:{visibility:"hidden"}})]})}},36964:function(e,t,s){"use strict";s.d(t,{N:function(){return v}});var r=s(3827),i=s(32635),l=s(81658);s(64090);var n=s(12694),a=s(70577),d=s(67379),o=s(86841),c=s(97486),u=s(34734);let v=e=>{var t,s,v,m,h,p;let{data:x,selected:g}=e,{t:f}=(0,i.$G)(),{isLiked:b,handleLikeDisLike:y}=(0,c.U)("master",x.id);return(0,r.jsxs)("div",{className:(0,u.Z)("relative rounded-button overflow-hidden group justify-start h-full border border-gray-link",g&&"ring-2 ring-black"),children:[(0,r.jsx)("div",{className:"absolute top-3 left-3 z-[1] text-dark",children:(0,r.jsx)(a.h,{onClick:e=>{e.stopPropagation(),e.preventDefault(),y()},children:b?(0,r.jsx)(d.Z,{}):(0,r.jsx)(o.Z,{size:26})})}),(0,r.jsx)("div",{className:"relative aspect-[198/182]",children:(0,r.jsx)(l.I,{src:(null==x?void 0:x.img)||"",alt:(null==x?void 0:x.firstname)||"master",fill:!0,className:"object-cover transition-all group-hover:scale-105"})}),(0,r.jsxs)("div",{className:"xl:pb-5 lg:pb-3 px-3 pb-2 text-start",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,r.jsx)("strong",{className:"text-lg font-semibold ",children:null==x?void 0:x.firstname}),(0,r.jsx)("div",{className:"rounded-button border border-gray-link w-7 h-7 flex items-center justify-center z-[1] bg-white bg-opacity-60",children:(0,r.jsx)("span",{className:"text-sm font-semibold",children:null!==(p=null==x?void 0:x.r_avg)&&void 0!==p?p:0})})]}),(0,r.jsx)("span",{className:"text-sm text-gray-field",children:(null==x?void 0:null===(t=x.translation)||void 0===t?void 0:t.title)||f("master")}),(0,r.jsxs)("div",{className:"flex flex-wrap flex-col gap-1 pt-2.5 mt-2.5 border-t border-gray-link",children:[(0,r.jsx)("span",{className:"text-sm",children:f("starting.from")}),(0,r.jsx)("strong",{className:"text-lg font-bold",children:(0,r.jsx)(n.t,{number:null==x?void 0:null===(s=x.service_master)||void 0===s?void 0:s.price})})]}),!!(null==x?void 0:null===(m=x.service_master)||void 0===m?void 0:null===(v=m.type)||void 0===v?void 0:v.length)&&(0,r.jsxs)("div",{className:"flex flex-wrap flex-col gap-1 pt-2.5 mt-2.5 border-t border-gray-link",children:[(0,r.jsx)("span",{className:"text-sm",children:f("service.place")}),(0,r.jsx)("strong",{className:"text-lg font-bold",children:f(null==x?void 0:null===(h=x.service_master)||void 0===h?void 0:h.type)})]})]})]})}},61429:function(e,t,s){"use strict";var r=s(22020),i=s(65249);let l=(0,r.Ue)()((0,i.tJ)(e=>({list:{product:[],master:[],shop:[]},likeOrDislike:function(t,s){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(e=>({list:{...e.list,[t]:e.list[t].some(e=>e.itemId===s)?e.list[t].filter(e=>e.itemId!==s):[...e.list[t],{itemId:s,sent:r}]}}))},markEveryItemToSent:t=>e(e=>({list:{...e.list,[t]:e.list[t].map(e=>({...e,sent:!0}))}})),clear:t=>e(e=>({...e,list:{...e.list,[t]:[]}})),setMany:(t,s)=>e(e=>({list:{...e.list,[t]:s}}))}),{name:"like"}));t.Z=l},97486:function(e,t,s){"use strict";s.d(t,{U:function(){return u}});var r=s(61429),i=s(64095),l=s(8186),n=s(25659),a=s(61916),d=s(64090),o=s(15494);let c=e=>{switch(e){case"shop":return"likedShops";case"product":return"likedProducts";case"master":return"likedMasters";default:return e}},u=(e,t)=>{var s;let u=(0,i.NL)(),v=(0,a.Z)(e=>e.user),{list:m,likeOrDislike:h}=(0,r.Z)(),p=null===(s=m[e])||void 0===s?void 0:s.some(e=>e.itemId===t),x=(0,o.Z)(e=>e.country),g=(0,o.Z)(e=>e.city),{mutate:f}=(0,l.D)({mutationFn:e=>n.h.like({...e,region_id:null==x?void 0:x.region_id,country_id:null==x?void 0:x.id,city_id:null==g?void 0:g.id})}),{mutate:b}=(0,l.D)({mutationFn:e=>n.h.dislike(e),onMutate:async t=>{await u.cancelQueries([c(e)],{exact:!1});let s=u.getQueryData([c(e)],{exact:!1});return console.log("prevLikeList => ",s),u.setQueriesData({queryKey:[c(e)],exact:!1},e=>(console.log("old",e),null==e?void 0:e.pages)?{...e,pages:e.pages.map(e=>({...e,data:e.data.filter(e=>e.id!==t.type_id)}))}:s),{prevLikeList:s}},onError:(t,s,r)=>{u.setQueryData([e],null==r?void 0:r.prevLikeList)},onSettled:()=>{let t=c(e);u.invalidateQueries({queryKey:[t],exact:!1})}});return{handleLikeDisLike:(0,d.useCallback)(()=>{t&&(v&&(p?b({type_id:t,type:e}):f({type_id:t,type:e})),h(e,t,!!v),console.log("fired",t))},[e,t,null==v?void 0:v.id]),isLiked:p}}},25659:function(e,t,s){"use strict";s.d(t,{h:function(){return l}});var r=s(31995),i=s(68466);let l={getAll:e=>(0,r.Z)((0,i.d)("v1/dashboard/likes",e)),getShopAll:e=>(0,r.Z)((0,i.d)("v1/dashboard/likes",e)),getMasterAll:e=>(0,r.Z)((0,i.d)("v1/dashboard/likes",e)),like:e=>r.Z.post("v1/dashboard/likes",{body:e}),dislike:e=>r.Z.delete("v1/dashboard/likes/".concat(e.type_id,"?type=").concat(e.type)),likeMany:e=>r.Z.post("v1/dashboard/like/store-many",{body:e})}},21189:function(e,t,s){"use strict";s.d(t,{L:function(){return l}});var r=s(31995),i=s(68466);let l={list:e=>(0,r.Z)((0,i.d)("v1/rest/masters",e)),getById:(e,t)=>(0,r.Z)((0,i.d)("v1/rest/masters/".concat(e),t),{redirectOnError:!0}),getByIds:e=>(0,r.Z)((0,i.d)("v1/rest/masters",e)),getTimes:e=>(0,r.Z)((0,i.d)("v1/rest/master/times-all",e))}},2008:function(e,t,s){"use strict";s.d(t,{o:function(){return l}});var r=s(31995),i=s(68466);let l={list:e=>(0,r.Z)((0,i.d)("v1/rest/services",e)),getById:(e,t)=>(0,r.Z)((0,i.d)("v1/rest/services/".concat(e),t)),getServiceMasters:e=>(0,r.Z)((0,i.d)("v1/rest/service-masters",e))}},16777:function(e,t,s){"use strict";s.d(t,{v:function(){return r}});let r=e=>null==e?void 0:e.reduce((e,t)=>e.concat(t.data),[])}},function(e){e.O(0,[2635,8381,1518,1749,4046,298,5250,3615,1143,6278,6235,1006,2407,648,2971,8069,1744],function(){return e(e.s=73487)}),_N_E=e.O()}]);