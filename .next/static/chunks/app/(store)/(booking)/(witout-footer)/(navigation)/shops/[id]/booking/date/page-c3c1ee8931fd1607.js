(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7886],{56572:function(e,t,s){Promise.resolve().then(s.bind(s,41556)),Promise.resolve().then(s.bind(s,40764)),Promise.resolve().then(s.bind(s,35559))},40764:function(e,t,s){"use strict";s.r(t),s.d(t,{BookingDate:function(){return c}});var i=s(3827),r=s(86926),l=s(9988),n=s(21189),a=s(89539),o=s.n(a),d=s(4071);let c=e=>{var t,s,a;let{shopSlug:c}=e,{state:u}=(0,r.v)(),{data:f,isLoading:m,isError:h}=(0,l.a)(["times",u.services.map(e=>{var t,s;return null===(s=e.master)||void 0===s?void 0:null===(t=s.service_master)||void 0===t?void 0:t.id}),null===(s=u.master)||void 0===s?void 0:null===(t=s.service_master)||void 0===t?void 0:t.id],()=>{var e,t,s,i;return n.L.getTimes({service_master_ids:(null===(t=u.master)||void 0===t?void 0:null===(e=t.service_master)||void 0===e?void 0:e.id)?[null===(i=u.master)||void 0===i?void 0:null===(s=i.service_master)||void 0===s?void 0:s.id]:u.services.map(e=>{var t,s;return null===(s=e.master)||void 0===s?void 0:null===(t=s.service_master)||void 0===t?void 0:t.id}),start_date:o()().format("YYYY-MM-DD HH:mm")})});return(0,i.jsx)("div",{className:"space-y-3",children:null==f?void 0:null===(a=f.data)||void 0===a?void 0:a.map(e=>(0,i.jsx)(d.f,{data:e.times,shopSlug:c,serviceMasterId:e.service_master.id,isLoading:m,isError:h,master:e.service_master.master},e.service_master.id))})}},4071:function(e,t,s){"use strict";s.d(t,{f:function(){return k}});var i=s(3827),r=s(96107),l=s(64090),n=s(34734),a=s(70577),o=s(72001),d=s(86926),c=s(89539),u=s.n(c),f=s(97864),m=s(26463),h=s(44158),v=s.n(h),x=s(24232),g=s(32635),p=s(24228),j=s(47907),b=s(77618),y=s.n(b),$=s(45943),w=s(20703),D=s(23564);u().extend(y());let N=(0,x.default)(()=>s.e(3529).then(s.bind(s,75414)),{loadableGenerated:{webpack:()=>[75414]}}),M=e=>{let{displayMonth:t}=e,{goToMonth:s,nextMonth:r,previousMonth:l}=(0,m.HJ)();return(0,i.jsxs)("div",{className:"flex items-center justify-evenly",children:[(0,i.jsx)(a.h,{disabled:!l,onClick:()=>l&&s(l),children:(0,i.jsx)("span",{className:"text-gray-field",children:(0,i.jsx)(o.Z,{size:16})})}),(0,i.jsx)("span",{className:"text-sm font-semibold",children:u()(t).format("MMMM YYYY")}),(0,i.jsx)(a.h,{disabled:!r,onClick:()=>r&&s(r),children:(0,i.jsx)("span",{className:"text-gray-field",children:(0,i.jsx)(o.Z,{size:16,style:{rotate:"180deg"}})})})]})},k=e=>{var t,s;let{serviceMasterId:a,withBorder:o=!0,shopSlug:c,data:h,isLoading:x,isError:b,master:y}=e,k=(0,j.useRouter)(),{t:_}=(0,g.$G)(),{hourFormat:C}=(0,D.L)(),[Y,S]=(0,l.useState)(new Date),[L,T]=(0,l.useState)(new Date),{state:H,dispatch:O}=(0,d.v)(),[Z,z]=(0,l.useState)(!1),U=null==h?void 0:h.find(e=>u()(e.date).isSame(Y,"date")),E=u()().isSame(null==U?void 0:U.date,"date")?null==U?void 0:U.times.filter(e=>u()(e,"HH:mm").isAfter()):null==U?void 0:U.times,I=(null==h?void 0:h.filter(e=>e.closed).map(e=>u()(e.date).toDate()))||[],A=e=>{O({type:f.Y.SetDateTime,payload:{date:(null==Y?void 0:Y.toString())||new Date().toString(),time:e,serviceMasterId:a}})},B=e=>{S(e),T(e),z(e=>!e)},P=null===(s=H.dateAndTimes)||void 0===s?void 0:null===(t=s.find(e=>e.serviceMasterId===a))||void 0===t?void 0:t.time,W=H.services.map(e=>e.master);return(0,l.useEffect)(()=>{0===W.length&&!a&&c&&k.replace("/shops/".concat(c,"/booking"))},[a,W.length,c]),(0,i.jsxs)("div",{className:(0,n.Z)(" lg:col-span-2 ",o&&"lg:border border-gray-link rounded-button lg:py-6 lg:px-5"),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:(0,i.jsx)(r.v,{value:"select.date.time"})}),y&&(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"w-14 h-14 relative",children:(0,i.jsx)(w.default,{src:(null==y?void 0:y.img)||"",alt:(null==y?void 0:y.firstname)||"master",className:"rounded-full object-cover",fill:!0})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"text-xl font-medium",children:[null==y?void 0:y.firstname," ",null==y?void 0:y.lastname]}),(0,i.jsx)("span",{className:"text-gray-field text-base font-semibold",children:_("master")})]})]})]}),(0,i.jsxs)("div",{className:"grid md:grid-cols-3 grid-cols-1 mt-6 lg:gap-x-7 gap-y-7",children:[(0,i.jsx)("div",{className:"lg:border border-gray-link rounded-button col-span-2 lg:p-4",children:(0,i.jsx)(m._W,{month:L,onMonthChange:e=>T(e),mode:"single",selected:Y,onSelect:e=>{S(e),O({type:f.Y.ClearDateTime,payload:{serviceMasterId:a}})},components:{Caption:M},disabled:[...I,{before:new Date}],classNames:{head:"text-gray-field text-xs font-medium tracking-widest",day:"text-base h-full rounded-full  aspect-square w-full",day_selected:"!bg-dark !text-white hover:!!bg-dark",table:"w-full max-w-none",month:"flex-1",head_cell:"py-7 font-medium",cell:"aspect-square h-full rounded-full "}},Z.toString())}),(0,i.jsx)("div",{className:"border border-gray-link rounded-button py-6 px-5 ",children:(()=>{let e=u()(Y).isSame(new Date,"day")?new Date:Y,t=null==h?void 0:h.find(t=>t.times.some(s=>s&&u()("".concat(t.date," ").concat(s),"YYYY-MM-DD HH:mm").isAfter(e))),s=u()(null==t?void 0:t.date).toDate();return x?(0,i.jsx)("div",{className:"flex gap-2.5 flex-wrap overflow-y-auto md:max-h-[440px] animate-pulse",children:Array.from(Array(20).keys()).map(e=>(0,i.jsx)("div",{className:"rounded-button bg-gray-300 h-10 w-20"},e))}):b?(0,i.jsx)("div",{className:"flex items-center h-full w-full justify-center",children:(0,i.jsx)(N,{})}):E&&E.length>0?(0,i.jsx)("div",{className:"flex gap-2.5 flex-wrap overflow-y-auto md:max-h-[440px]",children:E.map(e=>(0,i.jsx)("button",{className:(0,n.Z)("text-sm py-2.5 px-5 rounded-button border border-dark hover:text-white hover:bg-primary transition-all hover:border-transparent",P===e&&"text-white bg-primary border-transparent"),onClick:()=>A(e),children:u()(e,"HH:mm").format(C)},e))}):(null==U?void 0:U.closed)?(0,i.jsxs)("div",{className:"flex items-center justify-center flex-col h-full gap-3",children:[(0,i.jsx)(p.Z,{size:40}),(0,i.jsx)("span",{className:"text-sm font-medium",children:_("shop.is.closed")}),t&&(0,i.jsx)("div",{className:"flex justify-center mt-7",children:(0,i.jsxs)($.z,{onClick:()=>B(s),color:"black",size:"medium",children:[_("go.to")," ",u()(s).format("MMM DD")]})})]}):(0,i.jsxs)("div",{className:"flex items-center justify-center flex-col h-full gap-3",children:[(0,i.jsx)(v(),{size:40}),(0,i.jsx)("span",{className:"text-sm font-medium",children:_("no.available.slots")}),t&&(0,i.jsx)("div",{className:"flex justify-center mt-7",children:(0,i.jsxs)($.z,{onClick:()=>B(s),color:"black",size:"medium",children:[_("go.to")," ",u()(s).format("MMM DD")]})})]})})()})]})]})}},72001:function(e,t,s){"use strict";var i=s(3827);s(64090),t.Z=e=>{let{size:t,...s}=e;return(0,i.jsx)("svg",{width:t||"30",height:t||"30",...s,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M17.5 9.375C17.5 9.375 12.5 14.375 12.5 15C12.5 15.625 17.5 20.625 17.5 20.625",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}},24228:function(e,t,s){"use strict";var i=s(3827);s(64090),t.Z=e=>{let{size:t,...s}=e;return(0,i.jsxs)("svg",{width:t||"30",height:t||"30",...s,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1_7002)",children:(0,i.jsx)("path",{d:"M14.9999 13.2324L21.1874 7.04492L22.9549 8.81242L16.7674 14.9999L22.9549 21.1874L21.1874 22.9549L14.9999 16.7674L8.81242 22.9549L7.04492 21.1874L13.2324 14.9999L7.04492 8.81242L8.81242 7.04492L14.9999 13.2324Z",fill:"currentColor"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1_7002",children:(0,i.jsx)("rect",{width:"30",height:"30",fill:"white"})})})]})}},96107:function(e,t,s){"use strict";s.d(t,{v:function(){return i.Translate}});var i=s(46941)},23564:function(e,t,s){"use strict";s.d(t,{L:function(){return r}});var i=s(98313);let r=()=>{let{settings:e}=(0,i.r)();return{hourFormat:(null==e?void 0:e.hour_format)||"HH:mm"}}},42366:function(e){"use strict";var t,s,i;e.exports=(t="minute",s=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g,function(e,r,l){var n=r.prototype;l.utc=function(e){var t={date:e,utc:!0,args:arguments};return new r(t)},n.utc=function(e){var s=l(this.toDate(),{locale:this.$L,utc:!0});return e?s.add(this.utcOffset(),t):s},n.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var a=n.parse;n.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var o=n.init;n.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else o.call(this)};var d=n.utcOffset;n.utcOffset=function(e,r){var l=this.$utils().u;if(l(e))return this.$u?0:l(this.$offset)?d.call(this):this.$offset;if("string"==typeof e&&null===(e=function(e){void 0===e&&(e="");var t=e.match(s);if(!t)return null;var r=(""+t[0]).match(i)||["-",0,0],l=r[0],n=60*+r[1]+ +r[2];return 0===n?0:"+"===l?n:-n}(e)))return this;var n=16>=Math.abs(e)?60*e:e,a=this;if(r)return a.$offset=n,a.$u=0===e,a;if(0!==e){var o=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(n+o,t)).$offset=n,a.$x.$localOffset=o}else a=this.utc();return a};var c=n.format;n.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},n.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},n.isUTC=function(){return!!this.$u},n.toISOString=function(){return this.toDate().toISOString()},n.toString=function(){return this.toDate().toUTCString()};var u=n.toDate;n.toDate=function(e){return"s"===e&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var f=n.diff;n.diff=function(e,t,s){if(e&&this.$u===e.$u)return f.call(this,e,t,s);var i=this.local(),r=l(e).local();return f.call(i,r,t,s)}})},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var i=s(25250),r=s.n(i)},21189:function(e,t,s){"use strict";s.d(t,{L:function(){return l}});var i=s(31995),r=s(68466);let l={list:e=>(0,i.Z)((0,r.d)("v1/rest/masters",e)),getById:(e,t)=>(0,i.Z)((0,r.d)("v1/rest/masters/".concat(e),t),{redirectOnError:!0}),getByIds:e=>(0,i.Z)((0,r.d)("v1/rest/masters",e)),getTimes:e=>(0,i.Z)((0,r.d)("v1/rest/master/times-all",e))}},9988:function(e,t,s){"use strict";s.d(t,{a:function(){return n}});var i=s(31678),r=s(87307),l=s(80385);function n(e,t,s){let n=(0,i._v)(e,t,s);return(0,l.r)(n,r.z)}}},function(e){e.O(0,[1936,2635,8381,1518,1749,4046,5250,3615,1143,6278,6235,8112,8820,2407,648,2971,8069,1744],function(){return e(e.s=56572)}),_N_E=e.O()}]);