(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2339,5591],{63277:function(e,t,i){Promise.resolve().then(i.bind(i,35591))},91967:function(e,t,i){"use strict";var n=i(3827);i(64090),t.Z=e=>(0,n.jsxs)("svg",{width:e.size||"20",height:e.size||"20",...e,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("g",{clipPath:"url(#clip0_1_9251)",children:(0,n.jsx)("path",{d:"M9.66825 11.4667L10.8449 12.6434L17.8999 5.58838L19.0783 6.76671L10.8449 15L5.54159 9.69671L6.71992 8.51838L8.49075 10.2892L9.66825 11.4659V11.4667ZM9.66992 9.11004L13.7966 4.98254L14.9716 6.15754L10.8449 10.285L9.66992 9.11004ZM7.31409 13.8225L6.13659 15L0.833252 9.69671L2.01159 8.51838L3.18909 9.69588L3.18825 9.69671L7.31409 13.8225Z",fill:"currentColor"})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_1_9251",children:(0,n.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})},29541:function(e,t,i){"use strict";var n=i(3827);i(64090),t.Z=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size||"20",height:e.size||"20",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",...e,children:[(0,n.jsxs)("circle",{cx:"84",cy:"50",r:"10",fill:"currentColor",children:[(0,n.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"0.25s",calcMode:"spline",keyTimes:"0;1",values:"10;0",keySplines:"0 0.5 0.5 1",begin:"0s"}),(0,n.jsx)("animate",{attributeName:"fill",repeatCount:"indefinite",dur:"1s",calcMode:"discrete",keyTimes:"0;0.25;0.5;0.75;1",values:"currentColor;#fdfdfd;#dce4eb;#bbcedd;currentColor",begin:"0s"})]}),(0,n.jsxs)("circle",{cx:"16",cy:"50",r:"10",fill:"currentColor",children:[(0,n.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"0s"}),(0,n.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"0s"})]}),(0,n.jsxs)("circle",{cx:"50",cy:"50",r:"10",fill:"#bbcedd",children:[(0,n.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.25s"}),(0,n.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.25s"})]}),(0,n.jsxs)("circle",{cx:"84",cy:"50",r:"10",fill:"#dce4eb",children:[(0,n.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.5s"}),(0,n.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.5s"})]}),(0,n.jsxs)("circle",{cx:"16",cy:"50",r:"10",fill:"#fdfdfd",children:[(0,n.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.75s"}),(0,n.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.75s"})]})]})},60140:function(e,t,i){"use strict";i.d(t,{b:function(){return l}});var n=i(3827),a=i(64090);let r=e=>{let{threshold:t=.1,root:i=null,rootMargin:n="50%",enabled:r=!1,onScreen:s=()=>null}=e,l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=null==l?void 0:l.current;if(!r||!e)return;let a=new IntersectionObserver(e=>e.forEach(e=>{e.isIntersecting&&s()}),{threshold:t,root:i,rootMargin:n});return a.observe(e),()=>{a.unobserve(e)}},[null==l?void 0:l.current,r]),l};var s=i(29541);let l=e=>{let{hasMore:t,loadMore:i,loading:a=!1,children:l}=e,o=r({enabled:!!t&&!a,onScreen:()=>{i()},rootMargin:"30px",threshold:.2});return(0,n.jsxs)(n.Fragment,{children:[l,a&&(0,n.jsx)("div",{className:"flex justify-center my-7",children:(0,n.jsx)(s.Z,{})}),(0,n.jsx)("span",{"aria-label":"bottom",ref:o,style:{visibility:"hidden"}})]})}},35591:function(e,t,i){"use strict";i.r(t),i.d(t,{NotificationPanel:function(){return k}});var n=i(3827);i(64090);var a=i(32635),r=i(91967),s=i(64095),l=i(9988),o=i(8186),c=i(56804),d=i(80991),u=i(34734),p=i(61916),f=i(2868),m=i(16777),g=i(60140),v=i(24232),y=i(89539),x=i.n(y),h=i(47907),b=i(47001),j=i(23564);let C=e=>{let{data:t,onClick:i}=e,a=(0,h.useRouter)(),r=(0,s.NL)(),{hourFormat:l}=(0,j.L)(),{mutate:d}=(0,o.D)({mutationFn:()=>c.B.readById(t.id),onMutate:async()=>{let e=r.getQueryData(["notificationStatistics"]),i=r.getQueryData(["notifications"],{exact:!1});return r.setQueryData(["notificationStatistics"],i=>i?{...i,[t.type]:i[t.type]-1<0?0:i[t.type]-1,notification:i.notification-1<0?0:i.notification-1}:e),r.setQueriesData({queryKey:["notifications"],exact:!1},e=>e?{...e,pages:e.pages.map(e=>{var i;return{...e,data:null===(i=e.data)||void 0===i?void 0:i.map(e=>e.id===t.id?{...e,read_at:new Date(Date.now()).toISOString()}:e)}})}:i),{prevStatistics:e,prevNotifications:i}},onError:(e,t,i)=>{r.setQueryData(["notificationStatistics"],null==i?void 0:i.prevStatistics),r.setQueriesData({queryKey:["notifications"],exact:!1},null==i?void 0:i.prevNotifications)},onSettled:async()=>{await r.invalidateQueries(["notificationStatistics"]),await r.invalidateQueries(["notifications"])}});return(0,n.jsxs)("button",{onClick:e=>{var n,r;if(d(),(null===(n=t.data)||void 0===n?void 0:n.id)&&b.VW[t.model_type]){a.push("/".concat(b.VW[t.model_type],"/").concat(null===(r=t.data)||void 0===r?void 0:r.id),{scroll:!1});return}i&&i(),e.preventDefault(),e.stopPropagation()},className:"bg-gray-faq dark:bg-gray-darkSegment rounded-2xl p-5 relative text-start",children:[!t.read_at&&(0,n.jsx)("div",{className:"absolute top-4 right-4 w-2.5 h-2.5 rounded-full bg-primary"}),(0,n.jsx)("span",{className:"text-xs font-medium text-gray-disabledTab",children:x()(t.created_at).format("DD MMM, YY ".concat(l))}),(0,n.jsx)("div",{className:"text-base font-medium leading-7 mt-2 line-clamp-2",children:t.body})]})},N=(0,v.default)(()=>Promise.all([i.e(4705),i.e(1411),i.e(2666)]).then(i.bind(i,28010)).then(e=>({default:e.NotificationEmptyList})),{loadableGenerated:{webpack:()=>[28010]}}),S=e=>{let{type:t,onCardClick:i,limitHeight:a}=e,r=(0,p.Z)(e=>e.user),{data:s,isLoading:l,fetchNextPage:o,hasNextPage:d,isFetchingNextPage:v}=(0,f.N)(["notifications",t],e=>{let{pageParam:i=1}=e;return c.B.getAll({type:t,column:"id",sort:"desc",perPage:4,page:i})},{getNextPageParam:e=>e.links.next&&e.meta.current_page+1,enabled:!!r}),y=(0,m.v)(null==s?void 0:s.pages);return y&&(null==y?void 0:y.length)===0||!r?(0,n.jsx)(N,{}):l?(0,n.jsxs)("div",{className:"flex flex-col gap-2.5 animate-pulse",children:[(0,n.jsx)("div",{className:"bg-gray-200 rounded-xl h-32"}),(0,n.jsx)("div",{className:"bg-gray-200 rounded-xl h-32"}),(0,n.jsx)("div",{className:"bg-gray-200 rounded-xl h-32"})]}):(0,n.jsx)("div",{className:(0,u.Z)(a&&"md:max-h-[500px] sm:max-h-[400px] max-h-[350px] overflow-y-auto"),children:(0,n.jsx)(g.b,{loadMore:o,hasMore:d,loading:v,children:(0,n.jsx)("div",{className:"flex flex-col gap-2.5 pb-10",children:null==y?void 0:y.map(e=>(0,n.jsx)(C,{data:e,onClick:i},e.id))})})})},w=[{label:"all",type:"notification"},{label:"news",type:"news_publish"},{label:"orders",type:"status_changed"}],k=e=>{let{onCardClick:t,limitHeight:i=!0}=e,{t:f}=(0,a.$G)(),m=(0,s.NL)(),g=(0,p.Z)(e=>e.user),{data:v,isLoading:y}=(0,l.a)(["notificationStatistics"],()=>c.B.statistics(),{enabled:!!g}),{mutate:x}=(0,o.D)({mutationFn:()=>c.B.readAll(),onMutate:async()=>{let e=m.getQueryData(["notificationStatistics"]),t=m.getQueryData(["notifications"],{exact:!1});return m.setQueryData(["notificationStatistics"],t=>t?{notification:0,status_changed:0,news_publish:0,new_order:0,new_user_by_referral:0,transaction:0}:e),m.setQueriesData({queryKey:["notifications"],exact:!1},e=>e?{...e,pages:e.pages.map(e=>{var t;return{...e,data:null===(t=e.data)||void 0===t?void 0:t.map(e=>({...e,read_at:new Date(Date.now()).toISOString()}))}})}:t),{prevStatistics:e,prevNotifications:t}},onError:(e,t,i)=>{m.setQueryData(["notificationStatistics"],null==i?void 0:i.prevStatistics),m.setQueriesData({queryKey:["notifications"],exact:!1},null==i?void 0:i.prevNotifications)},onSettled:async()=>{await m.invalidateQueries(["notificationStatistics"]),await m.invalidateQueries(["notifications"])}});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-[22px] font-semibold",children:f("notifications")}),!y&&(0,n.jsx)("button",{onClick:()=>x(),className:"focus-ring",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 border-b border-dark dark:border-white",children:[(0,n.jsx)(r.Z,{}),(0,n.jsx)("span",{className:"text-xs font-semibold",children:f("mark.as.read")})]})})]}),(0,n.jsxs)(d.O.Group,{children:[(0,n.jsx)(d.O.List,{className:"flex gap-5 space-x-1 mt-7 border-b border-gray-border",children:e=>{let{selectedIndex:t}=e;return(0,n.jsx)(n.Fragment,{children:w.map((e,i)=>(0,n.jsxs)(d.O,{className:e=>{let{selected:t}=e;return(0,u.Z)("focus-ring outline-none flex items-center gap-2.5 ring-offset-2",t?"border-b-2 border-dark dark:border-white":"text-gray-disabledTab pb-px")},children:[(0,n.jsx)("span",{className:"text-base font-medium",children:f(e.label)}),!!(null==v?void 0:v[e.type])&&(null==v?void 0:v[e.type])!==0&&g&&(0,n.jsx)("div",{className:(0,u.Z)("h-4 p-1 flex items-center justify-center rounded-full ",t===i?"bg-dark dark:bg-white":"bg-gray-disabledTab"),children:(0,n.jsx)("span",{className:"text-xs text-white dark:text-dark",children:null==v?void 0:v[e.type]})})]},e.type))})}}),(0,n.jsx)(d.O.Panels,{className:"mt-2",children:w.map(e=>(0,n.jsx)(d.O.Panel,{className:"mt-4",children:(0,n.jsx)(S,{type:e.type,onCardClick:t,limitHeight:i})},e.type))})]})]})}},47001:function(e,t,i){"use strict";i.d(t,{$U:function(){return f},H$:function(){return s},PH:function(){return m},RP:function(){return o},VW:function(){return u},_L:function(){return x},_n:function(){return r},aJ:function(){return g},c1:function(){return v},i$:function(){return y},jU:function(){return p},jp:function(){return c},tg:function(){return d}});var n,a=i(49079);let r="https://api.temiwa.com/api/",s="Bearer",l=null===(n=a.env.NEXT_PUBLIC_DEFAULT_LOCATION)||void 0===n?void 0:n.split(","),o=l?{lat:Number(l[0]),lng:Number(l[1])}:{lat:9.064477,lng:7.486209},c=["new","accepted","ready","on_a_way"],d=["delivered","canceled"],u={order:"orders",parcelorder:"parcels",blog:"news",booking:"bookings"},p=["cash","wallet"],f=10,m=["#FFEDD7","#D6FFD2","#F1D2D2","#D8DCFF","#F7D8FF","#C3F8FF","#E8E8E8","#FFE6B4","#FFD2E8","#C6F4E4","#C1E8FF","#C2B6A4"],g=["/img/service1.png","/img/service2.png","/img/service3.png","/img/service4.png","/img/service5.png","/img/service6.png","/img/service7.png","/img/service8.png","/img/service9.png","/img/service10.png","/img/service11.png","/img/service12.png"],v=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],y="https://calendar.google.com/calendar/u/0/r/eventedit",x=[5,10,15,20,25]},8796:function(e,t,i){"use strict";i.d(t,{K:function(){return d}});var n=i(3827),a=i(64090),r=i(47001),s=i(3316),l=i(34870),o=i(15494);let c=(0,a.createContext)({}),d=()=>(0,a.useContext)(c);t.Z=e=>{let{defaultCurrency:t,settings:i,defaultLanguage:d,children:u,languages:p,currencies:f,defaultCountry:m}=e,g=(0,s.Z)(e=>e.selectedLanguage),v=(0,s.Z)(e=>e.selectedCurrency),y=(0,o.Z)(e=>e.country),x=(0,s.Z)(e=>e.updateSelectedLanguage),h=(0,s.Z)(e=>e.updateSelectedCurrency),b=(0,o.Z)(e=>e.updateCountry),j=(0,o.Z)(e=>e.updateCity),C=null==p?void 0:p.find(e=>e.id===(null==g?void 0:g.id)),N=null==f?void 0:f.find(e=>e.id===(null==v?void 0:v.id)),S={...i},w={latitude:r.RP.lat.toString(),longitude:r.RP.lng.toString()};if(null==i?void 0:i.location){let e=i.location.split(",");w.latitude=e[0].trim(),w.longitude=e[1].trim()}i&&(S.latitude=w.latitude,S.longitude=w.longitude),!(null==y?void 0:y.id)&&(null==m?void 0:m.id)&&(b(m),(null==m?void 0:m.city)&&j(m.city));let k=(0,a.useMemo)(()=>({defaultLanguage:d,defaultCurrency:t,settings:S}),[]);return(0,a.useEffect)(()=>{var e;C?x(C):x(void 0),(0,l.d8)("lang",(null==C?void 0:C.locale)||(null==d?void 0:d.locale)),N&&h(N),(0,l.d8)("currency_id",null!==(e=null==N?void 0:N.id)&&void 0!==e?e:null==t?void 0:t.id)},[]),(0,n.jsx)(c.Provider,{value:k,children:u})}},15494:function(e,t,i){"use strict";var n=i(22020),a=i(65249);let r=(0,n.Ue)()((0,a.tJ)(e=>({country:null,city:null,isCountrySelectModalOpen:!1,updateCountry:t=>e({country:t}),updateCity:t=>e({city:t}),deleteCountry:()=>e({country:null}),openCountrySelectModal:()=>e({isCountrySelectModalOpen:!0}),closeCountrySelectModal:()=>e({isCountrySelectModalOpen:!1})}),{name:"address"}));t.Z=r},3316:function(e,t,i){"use strict";var n=i(22020),a=i(65249);let r=(0,n.Ue)()((0,a.tJ)(e=>({updateSelectedCurrency:t=>e({selectedCurrency:t}),updateSelectedLanguage:t=>e({selectedLanguage:t}),updateSettings:t=>e({settings:t}),updateDefaultCurrency:t=>e({defaultCurrency:t})}),{name:"settings"}));t.Z=r},61916:function(e,t,i){"use strict";i.d(t,{E:function(){return s}});var n=i(22020),a=i(65249);let r=(0,n.Ue)()((0,a.tJ)(e=>({user:null,signIn:t=>e({user:t}),signOut:()=>e({user:null})}),{name:"user"})),s=r.setState;t.Z=r},23564:function(e,t,i){"use strict";i.d(t,{L:function(){return a}});var n=i(98313);let a=()=>{let{settings:e}=(0,n.r)();return{hourFormat:(null==e?void 0:e.hour_format)||"HH:mm"}}},98313:function(e,t,i){"use strict";i.d(t,{r:function(){return r}});var n=i(8796),a=i(3316);let r=()=>{let{defaultCurrency:e,defaultLanguage:t,settings:i}=(0,n.K)(),r=(0,a.Z)(e=>e.selectedCurrency);return{language:(0,a.Z)(e=>e.selectedLanguage)||t,currency:r||e,settings:i}}},31995:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(47001),a=i(34870);class r extends Error{constructor(e,t,i){super(e),this.message=e,this.statusCode=t,this.params=i,Object.setPrototypeOf(this,r.prototype)}}var s=i(47907),l=i(61916);let o=async(e,t)=>{let i="".concat(n._n).concat(Array.isArray(e)?e[0]:e),o=await fetch(i,{...t,headers:{Authorization:(0,a.ej)("token"),...null==t?void 0:t.headers}});if(!o.ok){let e=await o.json(),i=e.message;if(null==e?void 0:e.params){var c,d;i=null===(d=Object.values(e.params))||void 0===d?void 0:null===(c=d[0])||void 0===c?void 0:c[0]}if(401===o.status)return(0,l.E)({user:null}),(0,a.kT)("token"),(0,s.redirect)("/");if((null==t?void 0:t.redirectOnError)&&404===o.status)return(0,s.notFound)();throw new r(i,o.status,null==e?void 0:e.params)}return o.json()};var c=o;o.post=async(e,t)=>o(e,{...t,method:"POST",body:JSON.stringify(null==t?void 0:t.body),headers:{"Content-Type":"application/json"}}),o.put=async(e,t)=>o(e,{...t,method:"PUT",body:JSON.stringify(null==t?void 0:t.body),headers:{"Content-Type":"application/json"}}),o.delete=async(e,t)=>o(e,{...t,method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(null==t?void 0:t.body)})},56804:function(e,t,i){"use strict";i.d(t,{B:function(){return r}});var n=i(31995),a=i(68466);let r={getAll:e=>(0,n.Z)((0,a.d)("v1/dashboard/notifications",e)),get:(e,t)=>(0,n.Z)((0,a.d)("v1/dashboard/notifications/".concat(e),t)),statistics:e=>(0,n.Z)((0,a.d)("v1/dashboard/user/profile/notifications-statistic",e)),readAll:()=>n.Z.post("v1/dashboard/notifications/read-all"),readById:e=>n.Z.post("v1/dashboard/notifications/".concat(e,"/read-at"))}},68466:function(e,t,i){"use strict";i.d(t,{d:function(){return n}});let n=(e,t)=>{let i=new URLSearchParams;return t&&Object.entries(t).forEach(e=>{let[t,n]=e;null!=n&&(Array.isArray(n)?n.forEach((e,n)=>{"object"==typeof e?Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&i.set("".concat(t,"[").concat(n,"][").concat(a,"]"),String(r))}):i.set("".concat(t,"[").concat(n,"]"),String(e))}):i.set(t,String(n)))}),"".concat(e).concat(i.toString()?"?".concat(i.toString()):"")}},16777:function(e,t,i){"use strict";i.d(t,{v:function(){return n}});let n=e=>null==e?void 0:e.reduce((e,t)=>e.concat(t.data),[])}},function(e){e.O(0,[2635,8381,1518,4046,6702,5743,2971,8069,1744],function(){return e(e.s=63277)}),_N_E=e.O()}]);