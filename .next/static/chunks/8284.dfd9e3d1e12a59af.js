"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8284],{1915:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var r=t(3827);t(64090);var l=t(32635),n=t(45943),i=t(81992),s=t(24232),d=t(64095),u=t(8186),c=t(51369),o=t(77497),m=t(64387),f=t(72207),v=t(42776),x=t(28817),p=t(15494),h=t(9988),g=t(47907),y=t(98313);let j=()=>{let e=(0,x.Z)(e=>e.updateList),a=(0,x.Z)(e=>e.deleteMemberData),{language:t}=(0,y.r)(),r=(0,p.Z)(e=>e.country),n=(0,p.Z)(e=>e.city),s=(0,x.Z)(e=>e.memberCartId),d=(0,x.Z)(e=>e.userCartUuid),u=(0,g.useRouter)(),{t:c}=(0,l.$G)(),o={region_id:null==r?void 0:r.region_id,country_id:null==r?void 0:r.id,city_id:null==n?void 0:n.id,lang:null==t?void 0:t.locale,user_cart_uuid:d};return(0,h.a)({queryKey:["cart",o],queryFn:()=>i.y.guestGet(Number(s),o),onSuccess:a=>{var t,r,l;e((null===(l=a.data)||void 0===l?void 0:null===(r=l.user_carts)||void 0===r?void 0:null===(t=r.find(e=>e.uuid===d))||void 0===t?void 0:t.cartDetails.flatMap(e=>e.cartDetailProducts).map(e=>({stockId:e.stock.id,quantity:e.quantity,cartDetailId:e.id})))||[])},onError:()=>{e([]),a(),(0,v.vU)(c("you.kicked.from.group")),u.replace("/")},enabled:!!r,retry:!1,refetchOnMount:"always",refetchInterval:5e3})};var b=t(46748),_=t(85348);let N=(0,s.default)(()=>Promise.all([t.e(3056),t.e(9028)]).then(t.bind(t,59559)).then(e=>({default:e.Empty})),{loadableGenerated:{webpack:()=>[59559]}});var w=()=>{var e;let{data:a,error:t,isLoading:s}=j(),{t:p}=(0,l.$G)(),[h,g,y]=(0,m.d)(),w=(0,x.Z)(e=>e.memberCartId),P=(0,x.Z)(e=>e.userCartUuid),C=(0,d.NL)(),D=null==a?void 0:a.data.user_carts.flatMap(e=>e.cartDetails.flatMap(e=>e.cartDetailProducts)).length,k=null==a?void 0:a.data.user_carts.find(e=>e.uuid===P),I=null==k?void 0:k.cartDetails.flatMap(e=>e.cartDetailProducts.map(e=>e.id)),{mutate:O,isLoading:z}=(0,u.D)({mutationFn:e=>i.y.deleteGuestProducts({cart_id:e.cartId,ids:e.ids}),onMutate:async()=>{await C.cancelQueries(["cart"],{exact:!1});let e=C.getQueryData(["cart"],{exact:!1});return C.setQueriesData({queryKey:["cart"],exact:!1},a=>a?{...a,data:{...a.data,user_carts:a.data.user_carts.map(e=>e.uuid===P?{...e,cartDetails:[]}:e)}}:e),{prevCart:e}},onError:(e,a,t)=>{C.setQueriesData({queryKey:["cart"],exact:!1},()=>null==t?void 0:t.prevCart),(0,v.vU)(e.message)},onSettled:async()=>{y(),await C.invalidateQueries(["cart"],{exact:!1})}}),{mutate:M}=(0,u.D)({mutationFn:e=>i.y.statusChange(e.cartUuid,{cart_id:e.cartId}),onMutate:async e=>{await C.cancelQueries(["cart"],{exact:!1});let a=C.getQueryData(["cart"],{exact:!1});return C.setQueriesData({queryKey:["cart"],exact:!1},t=>t?{...t,data:{...t.data,user_carts:t.data.user_carts.map(a=>a.uuid===e.cartUuid?{...a,status:!a.status}:a)}}:a),{prevCart:a}},onError:(e,a,t)=>{C.setQueriesData({queryKey:["cart"],exact:!1},()=>null==t?void 0:t.prevCart),(0,v.vU)(e.message)},onSettled:async()=>{await C.invalidateQueries(["cart"],{exact:!1})}});return s?(0,r.jsx)("section",{className:"xl:container px-4",children:(0,r.jsx)("div",{className:"grid grid-cols-7",children:(0,r.jsxs)("div",{className:"flex flex-col gap-7 col-span-5",children:[(0,r.jsxs)("div",{className:"flex gap-7 animate-pulse",children:[(0,r.jsx)("div",{className:"relative overflow-hidden lg:h-[320px] md:h-56 h-40 rounded-3xl aspect-[250/320] bg-gray-300"}),(0,r.jsxs)("div",{className:"flex-1 my-5",children:[(0,r.jsx)("div",{className:"h-[22px] rounded-full w-full bg-gray-300 line-clamp-1"}),(0,r.jsx)("div",{className:"h-4 mt-5 rounded-full bg-gray-300 w-4/5"}),(0,r.jsx)("div",{className:"h-4 mt-4 rounded-full bg-gray-300 w-3/5"})]})]}),(0,r.jsxs)("div",{className:"flex gap-7 animate-pulse",children:[(0,r.jsx)("div",{className:"relative overflow-hidden lg:h-[320px] md:h-56 h-40 rounded-3xl aspect-[250/320] bg-gray-300"}),(0,r.jsxs)("div",{className:"flex-1 my-5",children:[(0,r.jsx)("div",{className:"h-[22px] rounded-full w-full bg-gray-300 line-clamp-1"}),(0,r.jsx)("div",{className:"h-4 mt-5 rounded-full bg-gray-300 w-4/5"}),(0,r.jsx)("div",{className:"h-4 mt-4 rounded-full bg-gray-300 w-3/5"})]})]})]})})}):!D||t||0===D?(0,r.jsxs)("section",{className:"xl:container px-4 ",children:[(0,r.jsx)(b.x,{title:"order.detail"}),(0,r.jsx)(N,{animated:!1,text:"group.cart.is.empty",imagePath:"/img/empty_cart.png"})]}):(0,r.jsxs)("section",{className:"xl:container px-4  mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(b.x,{title:"order.detail"}),I&&I.length>0&&(0,r.jsxs)("button",{onClick:g,className:"flex items-center gap-2.5 text-red-600",children:[(0,r.jsx)(o.Z,{}),p("clear.all")]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 mt-7 gap-7 relative pb-24",children:[(0,r.jsx)("div",{className:"flex flex-col lg:col-span-5 col-span-7 gap-5 ",children:null==a?void 0:null===(e=a.data.user_carts)||void 0===e?void 0:e.map(e=>(0,r.jsx)(_.c,{ownerId:null==a?void 0:a.data.owner_id,data:e},e.id))}),(0,r.jsx)("div",{className:"lg:col-span-2 col-span-7",children:(0,r.jsxs)("div",{className:"sticky top-2",children:[(0,r.jsx)(c.x,{totals:{total_price:null==a?void 0:a.data.total_price}}),(0,r.jsx)(n.z,{color:(null==k?void 0:k.status)?"primary":"black",fullWidth:!0,onClick:()=>{w&&P&&M({cartId:w,cartUuid:P})},children:p((null==k?void 0:k.status)?"done":"ready")})]})})]}),(0,r.jsx)(f.s,{text:"are.you.sure.want.to.clear.all.items.in.the.cart",onConfirm:()=>{w&&I&&I.length>0&&O({cartId:w,ids:I})},onCancel:y,isOpen:h,loading:z})]})}},20703:function(e,a,t){t.d(a,{default:function(){return l.a}});var r=t(67447),l=t.n(r)},8792:function(e,a,t){t.d(a,{default:function(){return l.a}});var r=t(25250),l=t.n(r)},47907:function(e,a,t){var r=t(15313);t.o(r,"notFound")&&t.d(a,{notFound:function(){return r.notFound}}),t.o(r,"redirect")&&t.d(a,{redirect:function(){return r.redirect}}),t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},67447:function(e,a,t){Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{getImageProps:function(){return s},default:function(){return d}});let r=t(86921),l=t(38630),n=t(81749),i=r._(t(10536)),s=e=>{let{props:a}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(a))void 0===t&&delete a[e];return{props:a}},d=n.Image},46993:function(e,a,t){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"RouterContext",{enumerable:!0,get:function(){return r}});let r=t(86921)._(t(64090)).default.createContext(null)},90295:function(e,a,t){var r=t(64090),l=r&&"object"==typeof r&&"default"in r?r:{default:r},n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(e,a){var t={};for(var r in e)!(a.indexOf(r)>=0)&&Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s=function(e){var a=e.color,t=e.size,r=void 0===t?24:t,s=(e.children,i(e,["color","size","children"])),d="remixicon-icon "+(s.className||"");return l.default.createElement("svg",n({},s,{className:d,width:r,height:r,fill:void 0===a?"currentColor":a,viewBox:"0 0 24 24"}),l.default.createElement("path",{d:"M15 2a4 4 0 0 1 3.464 6.001L23 8v2h-2v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10H1V8l4.536.001A4 4 0 0 1 12 3.355 3.983 3.983 0 0 1 15 2zm-4 8H5v9h6v-9zm8 0h-6v9h6v-9zM9 4a2 2 0 0 0-.15 3.995L9 8h2V6a2 2 0 0 0-1.697-1.977l-.154-.018L9 4zm6 0a2 2 0 0 0-1.995 1.85L13 6v2h2a2 2 0 0 0 1.995-1.85L17 6a2 2 0 0 0-2-2z"}))},d=l.default.memo?l.default.memo(s):s;e.exports=d},9988:function(e,a,t){t.d(a,{a:function(){return i}});var r=t(31678),l=t(87307),n=t(80385);function i(e,a,t){let i=(0,r._v)(e,a,t);return(0,n.r)(i,l.z)}}}]);