"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9010],{24228:function(e,t,a){var r=a(3827);a(64090),t.Z=e=>{let{size:t,...a}=e;return(0,r.jsxs)("svg",{width:t||"30",height:t||"30",...a,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("g",{clipPath:"url(#clip0_1_7002)",children:(0,r.jsx)("path",{d:"M14.9999 13.2324L21.1874 7.04492L22.9549 8.81242L16.7674 14.9999L22.9549 21.1874L21.1874 22.9549L14.9999 16.7674L8.81242 22.9549L7.04492 21.1874L13.2324 14.9999L7.04492 8.81242L8.81242 7.04492L14.9999 13.2324Z",fill:"currentColor"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1_7002",children:(0,r.jsx)("rect",{width:"30",height:"30",fill:"white"})})})]})}},42776:function(e,t,a){a.d(t,{vU:function(){return h},Vp:function(){return g},Kp:function(){return f}});var r=a(3827),s=a(30298),c=a(87548),i=a.n(c),u=a(34160),n=a.n(u);a(69995),a(64090);var d=a(70577),o=a(24228),l=a(34734);let y={success:"bg-green-600",warning:"bg-yellow-600",error:"bg-red-600",info:"bg-blue-600"},v=e=>{let{icon:t,message:a,type:s}=e;return(0,r.jsxs)("div",{className:(0,l.Z)("rounded-3xl flex items-center gap-3"),children:[(0,r.jsx)("div",{className:(0,l.Z)("w-6 h-6 rounded-xl flex items-center justify-center  text-white",y[s]),children:t}),(0,r.jsx)("div",{className:"text-base dark:text-white",children:a})]})},p={closeButton:(0,r.jsx)(d.h,{children:(0,r.jsx)(o.Z,{size:24})}),hideProgressBar:!0,className:"!bg-white !bg-opacity-60 !rounded-2xl backdrop-blur-lg dark:!bg-dark dark:!bg-opacity-30",transition:s.Mi},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;(0,s.Am)((0,r.jsx)(v,{icon:(0,r.jsx)(i(),{}),message:e,type:"success"}),t)},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;(0,s.Am)((0,r.jsx)(v,{icon:(0,r.jsx)(n(),{}),message:e,type:"warning"}),t)},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;(0,s.Am)((0,r.jsx)(v,{icon:(0,r.jsx)(n(),{}),message:e,type:"error"}),t)}},59010:function(e,t,a){a.d(t,{j:function(){return f}});var r=a(28817),s=a(64090),c=a(2084),i=a(81992),u=a(15494),n=a(42776),d=a(32635),o=a(64095),l=a(8186),y=a(61916),v=a(47907);let p=(e,t)=>{var a;let r=null===(a=e.user_carts)||void 0===a?void 0:a[0];return("string"==typeof t&&(r=e.user_carts.find(e=>e.uuid===t)),"number"==typeof t&&(r=e.user_carts.find(e=>e.user_id===t)),r)?r.cartDetails.flatMap(e=>e.cartDetailProducts.map(e=>({cartDetailId:e.id,stockId:e.stock.id,quantity:e.quantity}))):[]};var g=a(98313);let f=e=>{let{stockId:t,minQty:a=1,maxQty:f=1,onCounterClick:h,productQty:m=0,cartDetailId:x,image:b}=e,{t:_}=(0,d.$G)(),Z=(0,y.Z)(e=>e.user),D=(0,o.NL)(),q=(0,r.Z)(e=>e.list),[w,k]=(0,s.useState)(!1),j=(0,r.Z)(e=>e.addProduct),L=(0,r.Z)(e=>e.increment),C=(0,r.Z)(e=>e.decrement),Q=(0,r.Z)(e=>e.clear),K=(0,r.Z)(e=>e.updateList),S=(0,r.Z)(e=>e.delete),E=(0,u.Z)(e=>e.country),P=(0,u.Z)(e=>e.city),N=(0,r.Z)(e=>e.memberCartId),G=(0,r.Z)(e=>e.userCartUuid),U=(0,v.useRouter)(),{currency:I}=(0,g.r)(),M=!!N&&!!G,{mutate:A,isLoading:F}=(0,l.D)({mutationFn:e=>i.y.insert(e),onError:e=>(0,n.vU)(e.message),onSuccess:e=>{D.setQueriesData({queryKey:["cart"],exact:!1},()=>e),K(p(e.data,null==Z?void 0:Z.id))}}),{mutate:B,isLoading:T}=(0,l.D)({mutationFn:e=>i.y.insertGuest(e),onError:e=>(0,n.vU)(e.message),onSuccess:e=>{D.setQueriesData({queryKey:["cart"],exact:!1},()=>e),K(p(e.data,G))}}),{mutate:z,isLoading:R}=(0,l.D)({mutationFn:e=>i.y.delete(e),onSuccess:h,onMutate:async()=>{await D.cancelQueries({queryKey:["cart"],exact:!1}),await D.cancelQueries({queryKey:["calculate"],exact:!1});let e=D.getQueryData(["cart"],{exact:!1});return D.setQueriesData({queryKey:["cart"],exact:!1},t=>t?{...t,data:{...t.data,user_carts:t.data.user_carts.map(e=>({...e,cartDetails:e.cartDetails.map(e=>({...e,cartDetailProducts:e.cartDetailProducts.filter(e=>e.id!==x)}))}))}}:e),{prevCart:e}},onError:(e,t,a)=>{D.setQueriesData({queryKey:["cart"],exact:!1},null==a?void 0:a.prevCart),(0,n.vU)(e.message)},onSettled:async()=>{await D.invalidateQueries({queryKey:["cart"],exact:!1}),await D.invalidateQueries({queryKey:["calculate"],exact:!1})}}),{mutate:V,isLoading:$}=(0,l.D)({mutationFn:e=>i.y.deleteGuestProducts(e),onSuccess:h,onMutate:async()=>{await D.cancelQueries({queryKey:["cart"],exact:!1});let e=D.getQueryData(["cart"],{exact:!1});return D.setQueriesData({queryKey:["cart"],exact:!1},t=>t?{...t,data:{...t.data,user_carts:t.data.user_carts.map(e=>({...e,cartDetails:e.cartDetails.map(e=>({...e,cartDetailProducts:e.cartDetailProducts.filter(e=>e.id!==x)}))}))}}:e),{prevCart:e}},onError:(e,t,a)=>{D.setQueriesData({queryKey:["cart"],exact:!1},null==a?void 0:a.prevCart),(0,n.vU)(e.message)},onSettled:async()=>{await D.invalidateQueries({queryKey:["cart"],exact:!1})}}),H=null==q?void 0:q.find(e=>e.stockId===t),J=(0,c.N)(null==H?void 0:H.quantity),O=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t&&(H&&H.quantity<f&&H.quantity<m?((Z||M)&&k(!0),L(t,e)):(0,n.vU)("".concat(_("you.cannot.add.more.than")," ").concat(f," ").concat(_("products"))))},[t,null==H?void 0:H.quantity,L,f,m]),W=(0,s.useCallback)(()=>{if(t){if(H){O();return}(Z||M)&&k(!0),j(t,a||1,b)}},[t,H]),X=(0,s.useCallback)(async()=>{if(t){if(S(t),x&&Z){z({"ids[0]":x});return}x&&M&&V({ids:[x],cart_id:N})}},[t,x]),Y=(0,s.useCallback)(()=>{if(t){if(H&&H.quantity>a){(Z||M)&&k(!0),C(t);return}X()}},[t,H,x]),ee=(0,s.useCallback)(()=>{Q()},[]),et=(0,s.useCallback)(e=>{K(e)},[]),ea=(0,s.useCallback)(e=>{if(I&&E&&t){let r={currency_id:I.id,rate:I.rate,products:[{stock_id:t,quantity:a||1}],region_id:null==E?void 0:E.region_id,country_id:null==E?void 0:E.id,city_id:null==P?void 0:P.id};if(b&&(r.products[0].images=[b]),M){r.cart_id=N,r.user_cart_uuid=G,B(r,{onSuccess:async t=>{K(p(t.data,G)),e(),D.setQueriesData({queryKey:["cart"],exact:!1},()=>t)}});return}if(!Z){j(t,a),U.push("/cart");return}A(r,{onSuccess:async t=>{K(p(t.data,null==Z?void 0:Z.id)),e(),D.setQueriesData({queryKey:["cart"],exact:!1},()=>t)}})}},[t]);return(0,s.useEffect)(()=>{if(J&&H&&I&&w&&E){let e={currency_id:I.id,rate:I.rate,products:[{stock_id:H.stockId,quantity:J}],region_id:null==E?void 0:E.region_id,country_id:null==E?void 0:E.id,city_id:null==P?void 0:P.id};if(b&&(e.products[0].images=[b]),M){e.cart_id=N,e.user_cart_uuid=G,B(e,{onSuccess:async()=>{h&&h()}});return}Z&&A(e,{onSuccess:async()=>{h&&h()}})}},[J,null==I?void 0:I.id,null==I?void 0:I.rate,null==E?void 0:E.id]),{handleAddToCart:W,handleDecrement:Y,handleIncrement:O,handleClearCart:ee,handleUpdateCart:et,handleDelete:X,cartQuantity:null==H?void 0:H.quantity,isCounterLoading:F||R||T||$,handleBuyNow:ea}}},2084:function(e,t,a){a.d(t,{N:function(){return s}});var r=a(64090);let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,[a,s]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},81992:function(e,t,a){a.d(t,{y:function(){return c}});var r=a(31995),s=a(68466);let c={insert:async e=>r.Z.post("v1/dashboard/user/cart/insert-product",{body:e}),delete:async e=>(0,r.Z)((0,s.d)("v1/dashboard/user/cart/product/delete",e),{method:"DELETE"}),clearAll:async()=>r.Z.delete("v1/dashboard/user/cart/my-delete"),calculate:async(e,t)=>r.Z.post("v1/dashboard/user/cart/calculate/".concat(e),{body:t}),get:e=>(0,r.Z)((0,s.d)("v1/dashboard/user/cart",e)),restCalculate:async e=>(0,r.Z)((0,s.d)("v1/rest/order/products/calculate",e)),open:e=>r.Z.post("v1/dashboard/user/cart/open",{body:e}),setGroup:e=>r.Z.post("v1/dashboard/user/cart/set-group/".concat(e)),join:e=>r.Z.post("v1/rest/cart/open",{body:e}),guestGet:(e,t)=>(0,r.Z)((0,s.d)("v1/rest/cart/".concat(e),t)),deleteGuestProducts:e=>r.Z.delete("v1/rest/cart/product/delete",{body:e}),deleteGuest:e=>r.Z.delete((0,s.d)("v1/dashboard/user/cart/member/delete",e)),insertGuest:e=>r.Z.post("v1/rest/cart/insert-product",{body:e}),statusChange:(e,t)=>r.Z.post("v1/rest/cart/status/".concat(e),{body:t})}}}]);