"use strict";exports.id=3436,exports.ids=[3436],exports.modules={23436:(e,t,s)=>{s.r(t),s.d(t,{MembershipSelect:()=>p});var i=s(95344),r=s(44224),a=s(37180),n=s(11343),l=s(66345),d=s(9758),o=s(77568),c=s(89596);s(3729);var m=s(90543),h=s(97771);let u=(0,s(97273).default)(()=>Promise.all([s.e(3306),s.e(4697)]).then(s.bind(s,14697)).then(e=>({default:e.Empty})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/(witout-footer)/(navigation)/shops/[id]/booking/note/membership-select.tsx -> @/components/empty"]}}),p=({serviceId:e,onSelect:t})=>{let{language:s,currency:p}=(0,l.r)(),{t:x}=(0,d.$G)(),{dispatch:g,state:f}=(0,m.v)(),{data:b,hasNextPage:v,fetchNextPage:j,isFetchingNextPage:F,isError:N}=(0,r.N)(["myMemberships",e],({pageParam:t})=>a.b.getMyAll({lang:s?.locale,page:t,service_id:e,currency_id:p?.id}),{staleTime:0,getNextPageParam:e=>e.links.next&&e.meta.current_page+1,refetchOnWindowFocus:!1,suspense:!0,enabled:!!e}),P=(0,n.v)(b?.pages),y=(s,i)=>{e&&(g({type:h.Y.SelectMembership,payload:{serviceId:e,membership:s,userMembershipId:i}}),t())};return(0,i.jsxs)("div",{className:"pt-10 pb-6 px-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:x("select.membership")}),P&&0!==P.length&&!N?i.jsx(o.b,{loadMore:j,hasMore:v,loading:F,children:i.jsx("div",{className:"relative  grid grid-cols-1 md:grid-cols-2 md:gap-7 sm:gap-4 gap-2 mt-6",children:P?.map((t,s)=>i.jsx(c.i,{isSelected:!!f.services.find(s=>s.membership?.id===t.member_ship.id&&s.id===e),data:t.member_ship,onClick:()=>y(t.member_ship,t.id),expirationDate:t.expired_at,index:s},t.id))})}):i.jsx(u,{animated:!1,text:"empty.membership",imagePath:"/img/empty_membership.png",smallText:!0})]})}},77568:(e,t,s)=>{s.d(t,{b:()=>l});var i=s(95344),r=s(3729);let a=({threshold:e=.1,root:t=null,rootMargin:s="50%",enabled:i=!1,onScreen:a=()=>null})=>{let n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let r=n?.current;if(!i||!r)return;let l=new IntersectionObserver(e=>e.forEach(e=>{e.isIntersecting&&a()}),{threshold:e,root:t,rootMargin:s});return l.observe(r),()=>{l.unobserve(r)}},[n?.current,i]),n};var n=s(55863);let l=({hasMore:e,loadMore:t,loading:s=!1,children:r})=>{let l=a({enabled:!!e&&!s,onScreen:()=>{t()},rootMargin:"30px",threshold:.2});return(0,i.jsxs)(i.Fragment,{children:[r,s&&i.jsx("div",{className:"flex justify-center my-7",children:i.jsx(n.Z,{})}),i.jsx("span",{"aria-label":"bottom",ref:l,style:{visibility:"hidden"}})]})}},89596:(e,t,s)=>{s.d(t,{i:()=>c});var i=s(95344),r=s(9758),a=s(42473),n=s(48869),l=s.n(n),d=s(64191);let o=["#C2B6A4","#C1E8FF","#C6F4E4","#FFD2E8","#FFE6B4","#E8E8E8","#C3F8FF","#F7D8FF","#D8DCFF","#F1D2D2","#D6FFD2","#FFEDD7"],c=({data:e,onClick:t,isSelected:s,expirationDate:n,index:c,remainderSessions:m})=>{let{t:h}=(0,r.$G)(),{hourFormat:u}=(0,d.L)();return(0,i.jsxs)("button",{className:(0,a.Z)("aspect-[2/1.2] rounded-button p-3 flex flex-col justify-between w-full bg-opacity-60",s&&"ring ring-dark ring-offset-2 rounded-button"),style:{background:`linear-gradient(16deg, ${o[c%o.length]}, ${o[(c+1)%o.length]}, ${o[(c+2)%o.length]})`},onClick:t,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[e?.sessions===1?(0,i.jsxs)("div",{children:[i.jsx("span",{className:"md:text-base text-sm font-medium",children:e.sessions_count}),!!m&&(0,i.jsxs)("span",{className:"md:text-base text-sm font-medium",children:[" / ",m]})]}):i.jsx("span",{className:"md:text-base text-sm font-medium",children:h("unlimited")}),i.jsx("span",{className:"text-sm font-medium",children:e.translation?.title})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,i.jsxs)("span",{className:"text-xs",children:[h("duration")," ",e.time]}),!!n&&i.jsx("span",{className:"text-sm",children:l()(n).format(`MMM DD, YYYY - ${u}`)})]})]})}},37180:(e,t,s)=>{s.d(t,{b:()=>a});var i=s(80992),r=s(11204);let a={getAll:(e,t)=>(0,i.Z)((0,r.d)(`v1/rest/shop/${e}/memberships`,t)),getMyAll:e=>(0,i.Z)((0,r.d)("v1/dashboard/user/user-memberships",e)),getById:(e,t,s)=>(0,i.Z)((0,r.d)(`v1/rest/shop/${e}/membership/${t}`,s))}},11343:(e,t,s)=>{s.d(t,{v:()=>i});let i=e=>e?.reduce((e,t)=>e.concat(t.data),[])},44224:(e,t,s)=>{s.d(t,{N:()=>d});var i=s(20727),r=s(14616),a=s(73951);class n extends r.z{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,a.Gm)()},t)}getOptimisticResult(e){return e.behavior=(0,a.Gm)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var s,i,r,n,l,d;let{state:o}=e,c=super.createResult(e,t),{isFetching:m,isRefetching:h}=c,u=m&&(null==(s=o.fetchMeta)?void 0:null==(i=s.fetchMore)?void 0:i.direction)==="forward",p=m&&(null==(r=o.fetchMeta)?void 0:null==(n=r.fetchMore)?void 0:n.direction)==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,a.Qy)(t,null==(l=o.data)?void 0:l.pages),hasPreviousPage:(0,a.ZF)(t,null==(d=o.data)?void 0:d.pages),isFetchingNextPage:u,isFetchingPreviousPage:p,isRefetching:h&&!u&&!p}}}var l=s(41088);function d(e,t,s){let r=(0,i._v)(e,t,s);return(0,l.r)(r,n)}}};