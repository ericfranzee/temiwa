"use strict";exports.id=5492,exports.ids=[5492],exports.modules={45492:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(95344),a=n(3615),i=n(9758),l=n(66269),s=n(1475),o=n(3729),c=n(78428),u=n(42473),d=n(1781),f=n(20157),p=n(1356),v=n(32438),m=n(2209),h=n(92232),g=n(55701),y=n(66345),x=n(75488);let b=({confirmationResult:e,credential:t,onConfirmationResultChange:n,onVerifySuccess:b})=>{let{t:w}=(0,i.$G)(),[k,N]=(0,o.useState)(""),[S,j]=(0,o.useState)(!1),{settings:D}=(0,y.r)(),Z=D?.otp_expire_time?60*Number(D.otp_expire_time):60,{counter:I,start:E,reset:C}=(0,l.h)(Z),{phoneNumberSignIn:O}=(0,a.a)(),{fcmToken:P}=(0,m.n)(),_=(0,h.Z)(e=>e.signIn),{handleSync:A}=(0,g.t)();return(0,o.useEffect)(()=>{E()},[]),(0,r.jsxs)("div",{className:"flex flex-col gap-6  ",children:[r.jsx("h1",{className:"font-semibold text-[30px] mb-2 text-start",children:t?.includes("@")?w("verify.email"):w("verify.phone")}),(0,r.jsxs)("p",{className:"text-sm",children:[w("verify.text")," ",r.jsx("i",{children:t})]}),r.jsx(c.Z,{value:k,onChange:N,containerStyle:{justifyContent:"space-between",gap:"10px"},numInputs:6,renderInput:({className:e,...t})=>r.jsx("input",{className:(0,u.Z)("flex-1 focus-visible:border-primary px-1 text-lg border-gray-inputBorder bg-transparent rounded-2xl border appearance-none focus:outline-none py-5 focus:ring-0",e),...t})}),t?.includes("@")&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[I>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-field",children:[I,"s"]}),r.jsx("button",{onClick:()=>{t&&(t?.includes("@")?f.O.forgotPasswordEmail({email:t}).then(()=>{C(),E(),(0,s.Vp)(w("verify.send"))}).catch(e=>{(0,s.vU)(e.message)}).finally(()=>{j(!1)}):O(t).then(e=>{C(),E(),(0,s.Vp)(w("verify.send")),n(e)}).catch(()=>(0,s.vU)(w("sms.not.sent"))))},className:(0,u.Z)("outline-none focus-ring max-w-max text-sm",I>0&&"text-gray-field"),children:w("resend")})]}),r.jsx(d.z,{loading:S,onClick:()=>{j(!0),t?.includes("@")?f.O.verifyForgotPasswordEmail({otp:k}).then(e=>{console.log("res",e),(0,p.d8)("token",`${e.data?.token_type||x.H$} ${e.data?.access_token}`),_(e.data?.user),A(),b()}):e?.confirm(k).then(async e=>{let n=await e.user.getIdToken();f.O.forgotPasswordPhone({phone:t?.replace(/[^0-9]/g,""),type:"firebase",id:n}).then(e=>{p.d8("token",`Bearer ${e.data.access_token}`),P&&v.W.updateFirebaseToken({firebase_token:P}),_(e.data.user),A(),b()}).catch(()=>{s.vU(w("verify.error"))}).finally(()=>{j(!1)})}).catch(()=>{s.vU(w("verify.error")),j(!1)})},fullWidth:!0,disabled:k.length<6,children:w("verify")})]})}},7605:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(43158),a=n(67023);let i=(0,r.Ue)()((0,a.tJ)(e=>({ids:[],addOrRemove:t=>e(e=>({ids:e.ids.includes(t)?e.ids.filter(e=>e!==t):[...e.ids,t]})),clear:()=>e(e=>({...e,ids:[]}))}),{name:"compare"}))},3615:(e,t,n)=>{n.d(t,{a:()=>y});var r=n(3729),a=n(87521),i=n(1356),l=n(92232),s=n(11494),o=n(14373),c=n(43158),u=n(67023);let d=(0,c.Ue)()((0,u.tJ)(e=>({list:[],addToList:t=>e(e=>({list:e.list.includes(t)?e.list:[...e.list,t]})),deleteFromList:t=>e(e=>({list:e.list.filter(e=>e!==t)})),clear:()=>e(e=>({...e,list:[]}))}),{name:"searchHistory"}));var f=n(74999),p=n(86741),v=n(7605),m=n(2209),h=n(20157),g=n(8428);let y=()=>{let e=(0,g.useRouter)(),t=(0,s.NL)(),[c,u]=(0,r.useState)(!1),{signOut:y}=(0,l.Z)(),x=d(e=>e.clear),b=(0,f.Z)(e=>e.clear),w=(0,p.Z)(e=>e.clear),k=(0,v.Z)(e=>e.clear),{fcmToken:N}=(0,m.n)(),{mutate:S}=(0,o.D)({mutationFn:e=>h.O.logout(e),mutationKey:["logout"]}),j=async()=>{let{signOut:e,getAuth:r}=await n.e(5432).then(n.bind(n,75432)),l=r(a.Z);await e(l),u(!1),(0,i.kT)("token"),y(),t.clear(),x(),b("product"),w(),k()},D=async()=>{if(e.replace("/"),N){S({token:N},{onSuccess:async()=>{e.replace("/"),await j()}});return}await j()},Z=async()=>{let{signInWithPopup:e,GoogleAuthProvider:t,getAuth:r}=await n.e(5432).then(n.bind(n,75432));return e(r(a.Z),new t)},I=async()=>{let{signInWithPopup:e,OAuthProvider:t,getAuth:r}=await n.e(5432).then(n.bind(n,75432)),i=r(a.Z),l=new t("apple.com");return l.addScope("email"),l.addScope("name"),e(i,l)},E=async()=>{let{FacebookAuthProvider:e,signInWithPopup:t,getAuth:r}=await n.e(5432).then(n.bind(n,75432));return t(r(a.Z),new e)},C=async e=>{let{getAuth:t,signInWithPhoneNumber:r,RecaptchaVerifier:i}=await n.e(5432).then(n.bind(n,75432)),l=t(a.Z),s=new i(l,"sign-in-button",{size:"invisible",callback:()=>{console.log("Callback!")}});return r(l,e,s)};return(0,r.useEffect)(()=>{u((0,i.h2)("token"))},[]),{logOut:D,googleSignIn:Z,appleSignIn:I,facebookSignIn:E,phoneNumberSignIn:C,isSignedIn:c}}},66269:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(3729);let a=(e,t=1e3)=>{let[n,a]=(0,r.useState)(e),[i,l]=(0,r.useState)(!1),s=(0,r.useRef)();return(0,r.useEffect)(()=>(s.current=setInterval(()=>{i&&n>0&&a(e=>e-1)},t),0===n&&clearInterval(s.current),()=>clearInterval(s.current)),[i,n,t]),{counter:n,start:()=>l(!0),pause:()=>l(!1),reset:()=>{clearInterval(s.current),l(!0),a(e)}}}},78428:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(3729),a=n.n(r),i=function(e){return"object"==typeof e&&null!==e},l=function(e){var t=e.value,n=void 0===t?"":t,r=e.numInputs,l=void 0===r?4:r,s=e.onChange,o=e.onPaste,c=e.renderInput,u=e.shouldAutoFocus,d=void 0!==u&&u,f=e.inputType,p=void 0===f?"text":f,v=e.renderSeparator,m=e.placeholder,h=e.containerStyle,g=e.inputStyle,y=e.skipDefaultStyles,x=void 0!==y&&y,b=a().useState(0),w=b[0],k=b[1],N=a().useRef([]),S=function(){return n?n.toString().split(""):[]},j="number"===p||"tel"===p;a().useEffect(function(){N.current=N.current.slice(0,l)},[l]),a().useEffect(function(){var e;d&&(null===(e=N.current[0])||void 0===e||e.focus())},[d]);var D=function(){if("string"==typeof m){if(m.length===l)return m;m.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},Z=function(e){return(j?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},I=function(e){var t=e.target.value;Z(t)&&(_(t),P(w+1))},E=function(e){var t=e.nativeEvent;Z(e.target.value)||(null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),_(""),P(w-1)),e.target.value="")},C=function(){k(w-1)},O=function(e){var t=S();[e.code,e.key].includes("Backspace")?(e.preventDefault(),_(""),P(w-1)):"Delete"===e.code?(e.preventDefault(),_("")):"ArrowLeft"===e.code?(e.preventDefault(),P(w-1)):"ArrowRight"===e.code?(e.preventDefault(),P(w+1)):e.key===t[w]?(e.preventDefault(),P(w+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)&&e.preventDefault()},P=function(e){var t,n,r=Math.max(Math.min(l-1,e),0);N.current[r]&&(null===(t=N.current[r])||void 0===t||t.focus(),null===(n=N.current[r])||void 0===n||n.select(),k(r))},_=function(e){var t=S();t[w]=e[0],A(t)},A=function(e){s(e.join(""))},F=function(e){e.preventDefault();var t,n=S(),r=w,a=e.clipboardData.getData("text/plain").slice(0,l-w).split("");if(!(j&&a.some(function(e){return isNaN(Number(e))}))){for(var i=0;i<l;++i)i>=w&&a.length>0&&(n[i]=null!==(t=a.shift())&&void 0!==t?t:"",r++);P(r),A(n)}};return a().createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},i(h)&&h),className:"string"==typeof h?h:void 0,onPaste:o},Array.from({length:l},function(e,t){return t}).map(function(e){var t,n,r;return a().createElement(a().Fragment,{key:e},c({value:null!==(t=S()[e])&&void 0!==t?t:"",placeholder:null!==(r=null===(n=D())||void 0===n?void 0:n[e])&&void 0!==r?r:void 0,ref:function(t){return N.current[e]=t},onChange:I,onFocus:function(t){k(e),t.target.select()},onBlur:C,onKeyDown:O,onPaste:F,autoComplete:"off",maxLength:1,"aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(x?{}:{width:"1em",textAlign:"center"},i(g)?g:{}),className:"string"==typeof g?g:void 0,type:p,inputMode:j?"numeric":"text",onInput:E},e),e<l-1&&("function"==typeof v?v(e):v))}))}}};