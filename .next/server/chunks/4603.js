"use strict";exports.id=4603,exports.ids=[4603],exports.modules={14603:(e,t,a)=>{a.r(t),a.d(t,{ProductStickyInfo:()=>k});var r=a(95344);a(3729);var i=a(42473),s=a(82177),l=a(78849),d=a(56086),c=a(4378),n=a(92198),o=a(4965),u=a(1781),h=a(9758),m=a(8428),y=a(60112),x=a(7605);let p=e=>r.jsx("svg",{width:e.size||"30",height:e.size||"30",...e,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.98934 14.4978C1.25008 9.37488 4.37501 5.17286 7.85517 4.10778C11.25 3.06881 13.7501 4.12697 15 5.62488C16.2501 4.12697 18.75 3.0729 22.1316 4.10778C25.8386 5.24225 28.75 9.37488 27.0093 14.4978C24.8119 21.1353 16.2501 26.2477 15 26.2478C13.7498 26.2478 5.26041 21.2128 2.98934 14.4978Z",fill:"#E34F26"})});var g=a(94341),f=a(41696),v=a(56506),w=a(92232),C=a(86741);let k=({data:e,selectedStock:t})=>{let a=(0,w.Z)(e=>e.user),k=(0,C.Z)(e=>e.list),j=k.find(e=>e.stockId===t?.id)?.cartDetailId,{handleAddToCart:_,handleIncrement:Z,handleDecrement:b,cartQuantity:q,isCounterLoading:D,handleBuyNow:L}=(0,l.j)({stockId:t?.id,minQty:e?.min_qty,maxQty:e?.max_qty,productQty:t?.quantity,image:t?.galleries?.[0]?.path,cartDetailId:j}),{t:Q}=(0,h.$G)(),{isLiked:E,handleLikeDisLike:N}=(0,y.U)("product",e?.id),S=(0,m.useRouter)(),z=(0,x.Z)(e=>e.addOrRemove),K=(0,x.Z)(e=>e.ids).includes(e?.id||0),M=()=>{e?.id&&z(e.id)};return r.jsx("div",{className:(0,i.Z)("fixed block top-0 md:bottom-auto w-full rounded-t-md md:rounded-t-none","z-10 bg-white dark:bg-darkBg border-b border-gray-border dark:border-gray-inputBorder bg-opacity-30 backdrop-blur-md dark:bg-opacity-20"),children:r.jsx("div",{className:"px-2 py-4 sm:py-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-4 xl:container px-2 md:px-4 justify-between ",children:[(0,r.jsxs)("div",{className:"items-center gap-2 hidden sm:flex",children:[r.jsx(s.I,{src:e?.img||"",alt:e?.translation?.title||"product",width:60,height:60,className:"max-h-[60px] w-auto"}),r.jsx("span",{className:"text-sm font-medium",children:e?.translation?.title})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 justify-between sm:justify-normal w-full sm:w-auto",children:[q&&q>0?(0,r.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto justify-between sm:justify-normal",children:[r.jsx(u.z,{color:"primary",size:"small",as:v.default,href:"/cart",children:Q("go.to.cart")}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(d.h,{disabled:!!e&&!!a&&!j,onClick:()=>b(),size:"large",color:"black",children:r.jsx(c.Z,{})}),r.jsx("span",{className:"text-lg font-medium",children:(0,n.K)(q,e?.interval)}),r.jsx(d.h,{onClick:()=>Z(),size:"large",color:"black",children:r.jsx(o.Z,{})})]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-5 md:gap-2.5 w-full sm:w-auto",children:[r.jsx(u.z,{loading:D,fullWidth:!0,onClick:()=>{L(()=>S.push("/cart"))},color:"primary",size:"small",disabled:t&&e&&t.quantity<e?.min_qty||!t?.quantity,children:Q("buy.now")}),r.jsx(u.z,{disabled:D||t&&e&&t.quantity<e?.min_qty||!t?.quantity,onClick:()=>_(),fullWidth:!0,size:"small",color:"black",children:Q("add.to.cart")})]}),(0,r.jsxs)("div",{className:"items-center gap-2 hidden md:flex",children:[r.jsx(d.h,{onClick:()=>N(),color:"lightGray",size:"medium",children:E?r.jsx(p,{size:24}):r.jsx(g.Z,{size:24})}),r.jsx(d.h,{onClick:()=>M(),color:"lightGray",size:"medium",children:K?r.jsx("span",{className:"text-primary",children:r.jsx(f.Z,{size:24})}):r.jsx(f.Z,{size:24})})]})]})]})})})}},41696:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(95344);a(3729);let i=({size:e,...t})=>(0,r.jsxs)("svg",{width:e||"20",height:e||"20",viewBox:"0 0 20 20",...t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M13.798 16.1943L13.798 2.77143C13.798 2.36 14.1327 2 14.5705 2C14.9826 2 15.3431 2.33429 15.3431 2.77143L15.3431 16.1686C15.3431 16.58 15.0083 16.94 14.5705 16.94C14.1585 16.94 13.798 16.6057 13.798 16.1943Z",fill:"currentColor"}),r.jsx("path",{d:"M10.1409 6.44857C10.1409 6.24286 10.2182 6.06286 10.3727 5.90857L14.0297 2.23143C14.3387 1.94857 14.8022 1.94857 15.1113 2.23143L18.7682 5.88286C19.0773 6.19143 19.0773 6.65429 18.7682 6.96286C18.4592 7.27143 17.9956 7.27143 17.6866 6.96286L14.5705 3.85143L11.4543 6.98857C11.1453 7.27143 10.6818 7.27143 10.3727 6.98857C10.2182 6.83429 10.1409 6.62857 10.1409 6.44857Z",fill:"currentColor"}),r.jsx("path",{d:"M4.6555 17.2286L4.6555 3.83149C4.6555 3.42006 4.99029 3.06006 5.42809 3.06006C5.84014 3.06006 6.20068 3.39434 6.20068 3.83149L6.20068 17.2286C6.20068 17.6401 5.86589 18.0001 5.42809 18.0001C4.99029 18.0001 4.6555 17.6658 4.6555 17.2286Z",fill:"currentColor"}),r.jsx("path",{d:"M0.998605 13.5771C0.998605 13.3714 1.07586 13.1914 1.23038 13.0371C1.53942 12.7542 2.00297 12.7542 2.31201 13.0371L5.42814 16.1742L8.54426 13.0371C8.8533 12.7285 9.31685 12.7285 9.62589 13.0371C9.93493 13.3457 9.93493 13.8085 9.62589 14.1171L5.96895 17.7685C5.65991 18.0514 5.19636 18.0514 4.88732 17.7685L1.20463 14.1171C1.07586 13.9628 0.998605 13.7828 0.998605 13.5771Z",fill:"currentColor"})]})},94341:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(95344);a(3729);let i=({size:e,...t})=>r.jsx("svg",{width:e||"24",height:e||"24",...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39098 11.5983C0.999574 7.5 3.49952 4.13839 6.28364 3.28632C8.99952 2.45515 10.9996 3.30167 11.9995 4.5C12.9996 3.30167 14.9995 2.45842 17.7048 3.28632C20.6704 4.1939 22.9995 7.5 21.6069 11.5983C19.849 16.9083 12.9996 20.9983 11.9995 20.9983C10.9994 20.9984 4.20784 16.9703 2.39098 11.5983Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},4378:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(95344);a(3729);let i=({size:e,...t})=>(0,r.jsxs)("svg",{width:e||"24",height:e||"24",...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("g",{clipPath:"url(#clip0_1_9041)",children:r.jsx("path",{d:"M5 11H19V13H5V11Z",fill:"currentColor"})}),r.jsx("defs",{children:r.jsx("clipPath",{id:"clip0_1_9041",children:r.jsx("rect",{width:"24",height:"24",fill:"white"})})})]})},4965:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(95344);a(3729);let i=({size:e,...t})=>(0,r.jsxs)("svg",{width:e||"24",height:e||"24",...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("g",{clipPath:"url(#clip0_1_10942)",children:r.jsx("path",{d:"M11 10.9999V4.99986H13V10.9999H19V12.9999H13V18.9999H11V12.9999H5V10.9999H11Z",fill:"currentColor"})}),r.jsx("defs",{children:r.jsx("clipPath",{id:"clip0_1_10942",children:r.jsx("rect",{width:"24",height:"24",fill:"currentColor"})})})]})},27193:(e,t,a)=>{a.r(t),a.d(t,{ImageWithFallBack:()=>n});var r=a(95344),i=a(89410),s=a(3729),l=a(6256);let d=e=>`
<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <linearGradient id="g">
      <stop 
      stop-color="${e?"#383838":"#E2E2E2"}" offset="20%" />
      <stop stop-color="${e?"#A0A09C":"#F6F6F6"}" offset="50%" />
<stop stop-color="${e?"#383838":"#E2E2E2"}" offset="70%" />
</linearGradient>
</defs>
      <rect width="100%" height="100%" fill="${e?"#383838":"#E2E2E2"}" />
      <rect id="r" width="100%" height="100%" fill="url(#g)" />
      <animate xlink:href="#r" attributeName="x" from="-100%" to="100%" dur="1s" repeatCount="indefinite"  />
</svg>`,c=e=>Buffer.from(e).toString("base64"),n=e=>{let{src:t,loader:a,...n}=e,[o,u]=(0,s.useState)(!1),{theme:h}=(0,l.F)();return r.jsx(i.default,{...n,loader:o?void 0:a,src:o?"/img/image-load-failed.png":t,placeholder:`data:image/svg+xml;base64,${c(d("dark"===h))}`,onError:()=>{u(!0)}})}},82177:(e,t,a)=>{a.d(t,{I:()=>r.ImageWithFallBack});var r=a(27193)},78849:(e,t,a)=>{a.d(t,{j:()=>p});var r=a(86741),i=a(3729),s=a(19560),l=a(11263),d=a(66017),c=a(1475),n=a(9758),o=a(11494),u=a(14373),h=a(92232),m=a(8428);let y=(e,t)=>{let a=e.user_carts?.[0];return("string"==typeof t&&(a=e.user_carts.find(e=>e.uuid===t)),"number"==typeof t&&(a=e.user_carts.find(e=>e.user_id===t)),a)?a.cartDetails.flatMap(e=>e.cartDetailProducts.map(e=>({cartDetailId:e.id,stockId:e.stock.id,quantity:e.quantity}))):[]};var x=a(66345);let p=({stockId:e,minQty:t=1,maxQty:a=1,onCounterClick:p,productQty:g=0,cartDetailId:f,image:v})=>{let{t:w}=(0,n.$G)(),C=(0,h.Z)(e=>e.user),k=(0,o.NL)(),j=(0,r.Z)(e=>e.list),[_,Z]=(0,i.useState)(!1),b=(0,r.Z)(e=>e.addProduct),q=(0,r.Z)(e=>e.increment),D=(0,r.Z)(e=>e.decrement),L=(0,r.Z)(e=>e.clear),Q=(0,r.Z)(e=>e.updateList),E=(0,r.Z)(e=>e.delete),N=(0,d.Z)(e=>e.country),S=(0,d.Z)(e=>e.city),z=(0,r.Z)(e=>e.memberCartId),K=(0,r.Z)(e=>e.userCartUuid),M=(0,m.useRouter)(),{currency:I}=(0,x.r)(),F=!!z&&!!K,{mutate:P,isLoading:$}=(0,u.D)({mutationFn:e=>l.y.insert(e),onError:e=>(0,c.vU)(e.message),onSuccess:e=>{k.setQueriesData({queryKey:["cart"],exact:!1},()=>e),Q(y(e.data,C?.id))}}),{mutate:B,isLoading:G}=(0,u.D)({mutationFn:e=>l.y.insertGuest(e),onError:e=>(0,c.vU)(e.message),onSuccess:e=>{k.setQueriesData({queryKey:["cart"],exact:!1},()=>e),Q(y(e.data,K))}}),{mutate:H,isLoading:U}=(0,u.D)({mutationFn:e=>l.y.delete(e),onSuccess:p,onMutate:async()=>{await k.cancelQueries({queryKey:["cart"],exact:!1}),await k.cancelQueries({queryKey:["calculate"],exact:!1});let e=k.getQueryData(["cart"],{exact:!1});return k.setQueriesData({queryKey:["cart"],exact:!1},t=>t?{...t,data:{...t.data,user_carts:t.data.user_carts.map(e=>({...e,cartDetails:e.cartDetails.map(e=>({...e,cartDetailProducts:e.cartDetailProducts.filter(e=>e.id!==f)}))}))}}:e),{prevCart:e}},onError:(e,t,a)=>{k.setQueriesData({queryKey:["cart"],exact:!1},a?.prevCart),(0,c.vU)(e.message)},onSettled:async()=>{await k.invalidateQueries({queryKey:["cart"],exact:!1}),await k.invalidateQueries({queryKey:["calculate"],exact:!1})}}),{mutate:V,isLoading:R}=(0,u.D)({mutationFn:e=>l.y.deleteGuestProducts(e),onSuccess:p,onMutate:async()=>{await k.cancelQueries({queryKey:["cart"],exact:!1});let e=k.getQueryData(["cart"],{exact:!1});return k.setQueriesData({queryKey:["cart"],exact:!1},t=>t?{...t,data:{...t.data,user_carts:t.data.user_carts.map(e=>({...e,cartDetails:e.cartDetails.map(e=>({...e,cartDetailProducts:e.cartDetailProducts.filter(e=>e.id!==f)}))}))}}:e),{prevCart:e}},onError:(e,t,a)=>{k.setQueriesData({queryKey:["cart"],exact:!1},a?.prevCart),(0,c.vU)(e.message)},onSettled:async()=>{await k.invalidateQueries({queryKey:["cart"],exact:!1})}}),A=j?.find(t=>t.stockId===e),W=(0,s.N)(A?.quantity),T=(0,i.useCallback)((t=1)=>{e&&(A&&A.quantity<a&&A.quantity<g?((C||F)&&Z(!0),q(e,t)):(0,c.vU)(`${w("you.cannot.add.more.than")} ${a} ${w("products")}`))},[e,A?.quantity,q,a,g]),O=(0,i.useCallback)(()=>{if(e){if(A){T();return}(C||F)&&Z(!0),b(e,t||1,v)}},[e,A]),J=(0,i.useCallback)(async()=>{if(e){if(E(e),f&&C){H({"ids[0]":f});return}f&&F&&V({ids:[f],cart_id:z})}},[e,f]),X=(0,i.useCallback)(()=>{if(e){if(A&&A.quantity>t){(C||F)&&Z(!0),D(e);return}J()}},[e,A,f]),Y=(0,i.useCallback)(()=>{L()},[]),ee=(0,i.useCallback)(e=>{Q(e)},[]),et=(0,i.useCallback)(a=>{if(I&&N&&e){let r={currency_id:I.id,rate:I.rate,products:[{stock_id:e,quantity:t||1}],region_id:N?.region_id,country_id:N?.id,city_id:S?.id};if(v&&(r.products[0].images=[v]),F){r.cart_id=z,r.user_cart_uuid=K,B(r,{onSuccess:async e=>{Q(y(e.data,K)),a(),k.setQueriesData({queryKey:["cart"],exact:!1},()=>e)}});return}if(!C){b(e,t),M.push("/cart");return}P(r,{onSuccess:async e=>{Q(y(e.data,C?.id)),a(),k.setQueriesData({queryKey:["cart"],exact:!1},()=>e)}})}},[e]);return(0,i.useEffect)(()=>{if(W&&A&&I&&_&&N){let e={currency_id:I.id,rate:I.rate,products:[{stock_id:A.stockId,quantity:W}],region_id:N?.region_id,country_id:N?.id,city_id:S?.id};if(v&&(e.products[0].images=[v]),F){e.cart_id=z,e.user_cart_uuid=K,B(e,{onSuccess:async()=>{p&&p()}});return}C&&P(e,{onSuccess:async()=>{p&&p()}})}},[W,I?.id,I?.rate,N?.id]),{handleAddToCart:O,handleDecrement:X,handleIncrement:T,handleClearCart:Y,handleUpdateCart:ee,handleDelete:J,cartQuantity:A?.quantity,isCounterLoading:$||U||G||R,handleBuyNow:et}}},19560:(e,t,a)=>{a.d(t,{N:()=>i});var r=a(3729);let i=(e,t=600)=>{let[a,i]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let a=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},60112:(e,t,a)=>{a.d(t,{U:()=>u});var r=a(74999),i=a(11494),s=a(14373),l=a(18678),d=a(92232),c=a(3729),n=a(66017);let o=e=>{switch(e){case"shop":return"likedShops";case"product":return"likedProducts";case"master":return"likedMasters";default:return e}},u=(e,t)=>{let a=(0,i.NL)(),u=(0,d.Z)(e=>e.user),{list:h,likeOrDislike:m}=(0,r.Z)(),y=h[e]?.some(e=>e.itemId===t),x=(0,n.Z)(e=>e.country),p=(0,n.Z)(e=>e.city),{mutate:g}=(0,s.D)({mutationFn:e=>l.h.like({...e,region_id:x?.region_id,country_id:x?.id,city_id:p?.id})}),{mutate:f}=(0,s.D)({mutationFn:e=>l.h.dislike(e),onMutate:async t=>{await a.cancelQueries([o(e)],{exact:!1});let r=a.getQueryData([o(e)],{exact:!1});return console.log("prevLikeList => ",r),a.setQueriesData({queryKey:[o(e)],exact:!1},e=>(console.log("old",e),e?.pages)?{...e,pages:e.pages.map(e=>({...e,data:e.data.filter(e=>e.id!==t.type_id)}))}:r),{prevLikeList:r}},onError:(t,r,i)=>{a.setQueryData([e],i?.prevLikeList)},onSettled:()=>{let t=o(e);a.invalidateQueries({queryKey:[t],exact:!1})}});return{handleLikeDisLike:(0,c.useCallback)(()=>{t&&(u&&(y?f({type_id:t,type:e}):g({type_id:t,type:e})),m(e,t,!!u),console.log("fired",t))},[e,t,u?.id]),isLiked:y}}},18678:(e,t,a)=>{a.d(t,{h:()=>s});var r=a(80992),i=a(11204);let s={getAll:e=>(0,r.Z)((0,i.d)("v1/dashboard/likes",e)),getShopAll:e=>(0,r.Z)((0,i.d)("v1/dashboard/likes",e)),getMasterAll:e=>(0,r.Z)((0,i.d)("v1/dashboard/likes",e)),like:e=>r.Z.post("v1/dashboard/likes",{body:e}),dislike:e=>r.Z.delete(`v1/dashboard/likes/${e.type_id}?type=${e.type}`),likeMany:e=>r.Z.post("v1/dashboard/like/store-many",{body:e})}}};