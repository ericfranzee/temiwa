"use strict";exports.id=2660,exports.ids=[2660],exports.modules={62660:(e,t,r)=>{r.r(t),r.d(t,{GiftCartSelect:()=>b});var i=r(95344),a=r(44224),s=r(11343),l=r(66345),n=r(9758),c=r(77568);r(3729);var o=r(90543),d=r(97771),g=r(97273),f=r(2170),u=r(42388),h=r(48869),p=r.n(h);let m=(0,g.default)(()=>Promise.all([r.e(3306),r.e(4697)]).then(r.bind(r,14697)).then(e=>({default:e.Empty})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/(witout-footer)/(navigation)/shops/[id]/components/booking-total/gift-cart-select.tsx -> @/components/empty"]}}),b=({shopId:e,onSelect:t})=>{let{language:r,currency:g}=(0,l.r)(),{t:h}=(0,n.$G)(),{dispatch:b,state:x}=(0,o.v)(),{data:v,hasNextPage:_,fetchNextPage:y,isFetchingNextPage:P,isError:j}=(0,a.N)(["myGiftCarts",e],({pageParam:t})=>f.p.getMyAll({lang:r?.locale,page:t,shop_id:e,currency:g?.id}),{staleTime:0,getNextPageParam:e=>e.links.next&&e.meta.current_page+1,refetchOnWindowFocus:!1,suspense:!0,enabled:!!e}),N=(0,s.v)(v?.pages),M=r=>{e&&(b({type:d.Y.SelectGiftCart,payload:r}),t())};return(0,i.jsxs)("div",{className:"pt-10 pb-6 px-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:h("select.gift.cart")}),N&&0!==N.length&&!j?i.jsx(c.b,{loadMore:y,hasMore:_,loading:P,children:i.jsx("div",{className:"relative grid grid-cols-1 md:gap-7 sm:gap-4 gap-2 mt-6",children:N?.map((e,t)=>i.jsx(u.S,{index:t,isSelected:x.giftCart?.id===e.giftCart.id,data:{...e.giftCart,price:e?.price,time:p()(e.expired_at).format("YYYY-MM-DD HH:mm")},onClick:()=>M({...e.giftCart,shopGiftCartId:e.id})},e.id))})}):i.jsx(m,{animated:!1,text:"empty.gift.cart",imagePath:"/img/empty_gift_card.png",description:"gift.cart.empty.description"})]})}},42388:(e,t,r)=>{r.d(t,{S:()=>o});var i=r(95344),a=r(9758),s=r(42473),l=r(21335),n=r(89410);let c=[{bg:"bg-gift_card_bg_1",color:"#9798D9"},{bg:"bg-gift_card_bg_2",color:"#75B16E"},{bg:"bg-gift_card_bg_3",color:"#E89B46"},{bg:"bg-gift_card_bg_4",color:"#53C9D5"},{bg:"bg-gift_card_bg_5",color:"#95CC82"}],o=({data:e,onClick:t,isSelected:r,index:o})=>{let{t:d}=(0,a.$G)();return(0,i.jsxs)("button",{className:(0,s.Z)("aspect-[410/180] rounded-button p-3 flex flex-col justify-between w-full bg-cover bg-no-repeat",r&&"ring ring-primary ring-offset-2 rounded-button",c[o%5].bg),onClick:t,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[i.jsx(n.default,{src:"/img/gift_card.png",alt:"gift_card",width:153,height:90}),i.jsx("span",{className:" md:text-5xl font-semibold text-white",children:i.jsx(l.t,{number:e.price})})]}),i.jsx("div",{className:"flex items-center justify-end",children:(0,i.jsxs)("span",{className:(0,s.Z)("text-sm"),style:{color:c[o%5].color},children:[d("valid.for")," ",e.time]})})]})}},77568:(e,t,r)=>{r.d(t,{b:()=>n});var i=r(95344),a=r(3729);let s=({threshold:e=.1,root:t=null,rootMargin:r="50%",enabled:i=!1,onScreen:s=()=>null})=>{let l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let a=l?.current;if(!i||!a)return;let n=new IntersectionObserver(e=>e.forEach(e=>{e.isIntersecting&&s()}),{threshold:e,root:t,rootMargin:r});return n.observe(a),()=>{n.unobserve(a)}},[l?.current,i]),l};var l=r(55863);let n=({hasMore:e,loadMore:t,loading:r=!1,children:a})=>{let n=s({enabled:!!e&&!r,onScreen:()=>{t()},rootMargin:"30px",threshold:.2});return(0,i.jsxs)(i.Fragment,{children:[a,r&&i.jsx("div",{className:"flex justify-center my-7",children:i.jsx(l.Z,{})}),i.jsx("span",{"aria-label":"bottom",ref:n,style:{visibility:"hidden"}})]})}},2170:(e,t,r)=>{r.d(t,{p:()=>s});var i=r(80992),a=r(11204);let s={getAll:(e,t)=>(0,i.Z)((0,a.d)("v1/rest/gift-carts/paginate",t)),getMyAll:e=>(0,i.Z)((0,a.d)("v1/dashboard/user/gift-carts/my-carts",e))}},11343:(e,t,r)=>{r.d(t,{v:()=>i});let i=e=>e?.reduce((e,t)=>e.concat(t.data),[])},44224:(e,t,r)=>{r.d(t,{N:()=>c});var i=r(20727),a=r(14616),s=r(73951);class l extends a.z{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,s.Gm)()},t)}getOptimisticResult(e){return e.behavior=(0,s.Gm)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var r,i,a,l,n,c;let{state:o}=e,d=super.createResult(e,t),{isFetching:g,isRefetching:f}=d,u=g&&(null==(r=o.fetchMeta)?void 0:null==(i=r.fetchMore)?void 0:i.direction)==="forward",h=g&&(null==(a=o.fetchMeta)?void 0:null==(l=a.fetchMore)?void 0:l.direction)==="backward";return{...d,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,s.Qy)(t,null==(n=o.data)?void 0:n.pages),hasPreviousPage:(0,s.ZF)(t,null==(c=o.data)?void 0:c.pages),isFetchingNextPage:u,isFetchingPreviousPage:h,isRefetching:f&&!u&&!h}}}var n=r(41088);function c(e,t,r){let a=(0,i._v)(e,t,r);return(0,n.r)(a,l)}}};