exports.id=3315,exports.ids=[3315],exports.modules={73315:(e,t,s)=>{"use strict";s.r(t),s.d(t,{BookingDetail:()=>H});var a=s(95344),i=s(9758),r=s(48869),l=s.n(r),n=s(82177),d=s(70398),o=s(21335),c=s(4340);let x=()=>a.jsx("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M71.8669 35.7999L67.3336 30.5332C66.4669 29.5332 65.7669 27.6665 65.7669 26.3332V20.6665C65.7669 17.1332 62.8669 14.2332 59.3336 14.2332H53.6669C52.3669 14.2332 50.4669 13.5332 49.4669 12.6665L44.2003 8.1332C41.9003 6.16654 38.1336 6.16654 35.8003 8.1332L30.5669 12.6999C29.5669 13.5332 27.6669 14.2332 26.3669 14.2332H20.6003C17.0669 14.2332 14.1669 17.1332 14.1669 20.6665V26.3665C14.1669 27.6665 13.4669 29.5332 12.6336 30.5332L8.13359 35.8332C6.20026 38.1332 6.20026 41.8665 8.13359 44.1665L12.6336 49.4665C13.4669 50.4665 14.1669 52.3332 14.1669 53.6332V59.3332C14.1669 62.8665 17.0669 65.7665 20.6003 65.7665H26.3669C27.6669 65.7665 29.5669 66.4665 30.5669 67.3332L35.8336 71.8665C38.1336 73.8332 41.9003 73.8332 44.2336 71.8665L49.5003 67.3332C50.5003 66.4665 52.3669 65.7665 53.7003 65.7665H59.3669C62.9003 65.7665 65.8003 62.8665 65.8003 59.3332V53.6665C65.8003 52.3665 66.5003 50.4665 67.3669 49.4665L71.9003 44.1999C73.8336 41.8999 73.8336 38.0999 71.8669 35.7999ZM53.8669 33.6999L37.7669 49.7999C37.3003 50.2665 36.6669 50.5332 36.0003 50.5332C35.3336 50.5332 34.7003 50.2665 34.2336 49.7999L26.1669 41.7332C25.2003 40.7665 25.2003 39.1665 26.1669 38.1999C27.1336 37.2332 28.7336 37.2332 29.7003 38.1999L36.0003 44.4999L50.3336 30.1665C51.3003 29.1999 52.9003 29.1999 53.8669 30.1665C54.8336 31.1332 54.8336 32.7332 53.8669 33.6999Z",fill:"currentColor"})});var m=s(42473),p=s(66345),u=s(40219),h=s(74769),b=s(17329),f=s(80806),j=s.n(f),g=s(97273),v=s(1781),y=s(89722),w=s(56067),N=s(10947);let k=(0,g.default)(()=>Promise.all([s.e(4502),s.e(6040),s.e(868)]).then(s.bind(s,80868)).then(e=>({default:e.BookingReviewCreate})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/components/booking-review/booking-review.tsx -> ./booking-review-create"]},loading:()=>a.jsx(b.W,{})}),_=(0,g.default)(()=>Promise.all([s.e(4502),s.e(6040),s.e(4145)]).then(s.bind(s,64145)).then(e=>({default:e.BookingReviewEdit})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/components/booking-review/booking-review.tsx -> ./booking-review-edit"]},loading:()=>a.jsx(b.W,{})}),C=({service:e,bookingId:t,bookingParentId:s,initialData:r})=>{let{t:l}=(0,i.$G)(),{data:n,refetch:d}=(0,u.a)({queryKey:["canReview","booking",e?.id],queryFn:()=>N.p.checkCanReview({type:"booking",type_id:s}),enabled:!!e,retry:!1}),[o,c,x]=(0,y.d)(),m=()=>{d(),x()};return n?.data?.added_review||!n?null:(0,a.jsxs)(a.Fragment,{children:[a.jsx(v.z,{fullWidth:!0,onClick:c,children:l(n?.data?.added_review?"edit.review":"add.review")}),a.jsx(w.u,{isOpen:o,onClose:x,withCloseButton:!0,children:a.jsx("div",{className:"pt-5 pb-7 md:px-6 px-4",children:r?a.jsx(_,{service:e,bookingId:t,onSuccess:m,bookingParentId:s,initialData:r}):a.jsx(k,{service:e,bookingId:t,onSuccess:m,bookingParentId:s})})})]})};var L=s(34713),Z=s(3729),$=s(32585),I=s(18736),M=s(70224),F=s(11494),B=s(14373);let P=({id:e,data:t})=>{let{t:s}=(0,i.$G)(),r=(0,F.NL)(),{language:l}=(0,p.r)(),[n,d]=(0,Z.useState)(""),o=t?.length?t.flatMap(e=>e?.notes??[]):[],{mutate:c,isLoading:x}=(0,B.D)({mutationFn:t=>h.s.addNote(e,t),onSuccess:()=>{d(""),r.invalidateQueries(["appointment",e,l?.locale])}}),u=()=>{c({note:n})};return a.jsx($.p,{children:({open:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)($.p.Button,{className:"flex justify-between w-full",children:[a.jsx("span",{children:s("notes")}),a.jsx("div",{className:(0,m.Z)(e?"rotate-180":"rotate-0","transition-all"),children:a.jsx(I.Z,{"aria-hidden":"true"})})]}),(0,a.jsxs)($.p.Panel,{className:"pt-4",children:[!!o?.length&&a.jsx("div",{className:"mb-4",children:o.map(e=>a.jsx("span",{className:"block text-base font-medium break-words my-2",children:e}))}),a.jsx("span",{className:"block mb-3 text-base font-medium",children:a.jsx(M.K,{rows:3,placeholder:s("type.here"),value:n||"",onChange:e=>d(e.target.value)})}),a.jsx(v.z,{fullWidth:!0,size:"small",onClick:u,loading:x,disabled:!n?.length,children:s("add.note")})]})]})})};var R=s(84419),A=s(48333),G=s(2504),D=s(48938),W=s(1475),Y=s(64191),z=s(47884);let S=(0,g.default)(()=>Promise.all([s.e(5769),s.e(1395)]).then(s.bind(s,61395)).then(e=>({default:e.BookingFormPanel})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/components/booking-detail/booking-form-modal.tsx -> ../booking-form"]},loading:()=>a.jsx(b.W,{})}),V=({form:e,booking:t,parentId:s,allForms:i})=>{let[r,l,n]=(0,y.d)();return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:l,className:"text-base flex items-center justify-between focus-ring outline-none w-full font-semibold py-4",children:[e?.translation?.title," ",a.jsx("span",{children:a.jsx(z.Z,{style:{rotate:"180deg"}})})]}),a.jsx(w.u,{withCloseButton:!0,isOpen:r,onClose:n,children:a.jsx(S,{data:e,allForms:t?.data?.form||i?.data,bookingId:t?.id,parentId:s})})]}):null},q=(0,g.default)(()=>Promise.all([s.e(3306),s.e(4697)]).then(s.bind(s,14697)).then(e=>({default:e.Empty})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/components/booking-detail/booking-detail.tsx -> @/components/empty"]}});l().extend(j());let H=({data:e,id:t})=>{let{t:s}=(0,i.$G)(),{language:r}=(0,p.r)(),{hourFormat:f}=(0,Y.L)(),[j,g]=(0,Z.useState)(!1),{mutate:y,isLoading:w}=(0,R.m)(),{data:N,isLoading:k}=(0,u.a)(["appointment",t,r?.locale],()=>h.s.getById(t,{lang:r?.locale}),{enabled:!!t}),{data:_}=(0,u.a)(["form",t,r?.locale,N?.data.length],()=>L.X.getForm({service_master_ids:N?.data.map(e=>e.service_master_id),lang:r?.locale}),{enabled:!!N?.data&&N?.data.length!==0}),$=e=>{y({tag:e?.transaction?.payment_system?.tag,data:{booking_id:e?.parent_id||e?.id}})},I=t?N?.data?.[0]:e?.[0],M=t?N?.data:e,F=M?.reduce((e,t)=>e+(t.coupon_price??0),0),B=M?.reduce((e,t)=>e+(t.discount??0),0),z=M?.reduce((e,t)=>e+(t.service_fee??0),0),S=M?.reduce((e,t)=>e+(t?.extra_price??0),0),H=M?.reduce((e,t)=>e+(t?.total_price??t?.total_price_by_parent??0),0),K=M?.reduce((e,t)=>e+(t?.gift_cart_price??0),0);return k&&t?a.jsx(b.W,{}):t||e?(0,a.jsxs)("div",{className:"xl:py-10 py-7 xl:px-12 md:px-6 px-4",children:[!t&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center mb-8",children:[I?.status==="canceled"?a.jsx("div",{className:"flex items-center justify-center bg-red rounded-full text-white w-16 h-16",children:a.jsx(c.Z,{})}):a.jsx("span",{className:"text-primary",children:a.jsx(x,{})}),a.jsx("span",{className:(0,m.Z)("text-xl font-semibold",I?.status==="canceled"?"text-red":"text-primary"),children:s(I?.status||"")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center my-6",children:[(0,a.jsxs)("p",{className:"md:text-2xl text-[22px] font-semibold",children:["#",I?.id]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("button",{onClick:j?void 0:()=>{g(!0),h.s.downloadInvoice(t).then(async e=>{let s=await e.blob(),a=new Blob([s],{type:"application/octet-stream"}),i=`booking-invoice-${t}.pdf`;(0,D.saveAs)(a,i)}).catch(()=>{(0,W.vU)(s("cant.download.the.invoice"))}).finally(()=>{g(!1)})},className:"inline-flex items-center gap-2.5 text-sm text-blue-link",children:j?s("downloading..."):s("download.invoice")})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b border-gray-link pb-5 mt-4",children:[a.jsx("div",{className:"w-14 h-14 relative rounded-full border border-gray-link aspect-square ",children:a.jsx(n.I,{src:I?.shop?.logo_img||"",alt:I?.shop?.translation?.title||"shop",fill:!0,className:"object-contain rounded-full w-20 h-20"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:(0,m.Z)("text-xl font-medium ",I?.shop?.verify&&"line-clamp-1"),children:I?.shop?.translation?.title}),I?.shop?.verify&&a.jsx("span",{children:a.jsx(A.Z,{})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-1",children:[a.jsx(d.Z,{}),a.jsx("p",{className:"text-sm line-clamp-2",children:I?.shop?.translation?.address})]})]})]}),(0,a.jsxs)("div",{className:"mt-7",children:[a.jsx("strong",{className:"text-2xl font-semibold",children:s("details")}),M?.map(e=>{let i=e.data?.form?e.data.form.find(t=>t?.service_master_id===e.service_master_id):_?.data.find(t=>t?.service_master_id===e.service_master_id);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex  justify-between py-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("p",{className:"text-xl font-semibold",children:e?.service_master?.service?.translation?.title}),!!e?.extras?.length&&e?.extras?.map(e=>a.jsx("p",{className:"text-base font-medium",children:e?.translation?.title},e?.id)),a.jsxs("span",{className:"text-base text-gray-field font-medium",children:[s("time"),": ",e?.service_master?.interval,s("min")]}),a.jsxs("span",{className:"text-base text-gray-field font-medium",children:[s("status"),": ",s(e.status)]}),a.jsxs("span",{className:"text-base text-gray-field font-medium",children:[s("bookings.id"),": ",e.id]}),a.jsxs("span",{className:"text-base text-gray-field font-medium",children:[s("start.date"),": ",l().utc(e.start_date).format("DD MMM YYYY")," ",s("at")," ",l().utc(e.start_date).format(f)]}),a.jsxs("span",{className:"text-base text-gray-field font-medium",children:[s("end.date"),": ",l().utc(e.end_date).format("DD MMM YYYY")," ",s("at")," ",l().utc(e.end_date).format(f)]}),a.jsxs("span",{className:"text-base text-gray-field font-medium",children:[s("master"),": ",e.master?.full_name]}),e?.user_member_ship&&a.jsxs("div",{className:"flex gap-2 items-center text-base text-gray-field font-medium",children:[s("membership"),":",a.jsx("span",{className:"text-green",children:a.jsx(G.Z,{})})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-semibold",children:a.jsx(o.t,{number:e?.user_member_ship?e?.total_price:e?.price,customCurrency:I?.currency})}),!!e?.extras?.length&&e.extras.map(e=>a.jsx("p",{className:"text-base font-medium",children:a.jsx(o.t,{number:e.price})}))]})]}),"ended"===e.status&&a.jsx(C,{service:e.service_master?.service,bookingId:e.id,bookingParentId:I?.id,initialData:e.review}),a.jsx(V,{booking:e,form:i,allForms:_,parentId:t})]},e.id)})]}),a.jsx("div",{className:"py-7 text-xl font-semibold  border-t border-gray-link",children:a.jsx(P,{id:t,data:N?.data})}),!!F&&(0,a.jsxs)("div",{className:"flex items-center justify-between py-7 text-xl font-semibold  border-t border-gray-link",children:[a.jsx("span",{children:s("coupon")}),a.jsx("span",{children:a.jsx(o.t,{number:F,customCurrency:I?.currency})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-7 text-xl font-semibold  border-t border-gray-link",children:[a.jsx("span",{children:s("discount")}),a.jsx("span",{children:a.jsx(o.t,{number:B,customCurrency:I?.currency})})]}),!!K&&(0,a.jsxs)("div",{className:"flex items-center justify-between py-7 text-xl font-semibold  border-t border-gray-link",children:[a.jsx("span",{children:s("gift.cart")}),a.jsx("span",{children:a.jsx(o.t,{number:K,customCurrency:I?.currency})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-7 text-xl font-semibold  border-t border-gray-link",children:[a.jsx("span",{children:s("service.fee")}),a.jsx("span",{children:a.jsx(o.t,{number:z,customCurrency:I?.currency})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-7 text-xl font-semibold  border-t border-gray-link",children:[a.jsx("span",{children:s("extras.price")}),a.jsx("span",{children:a.jsx(o.t,{number:S})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-7 text-[26px] font-semibold border-b border-t border-gray-link",children:[a.jsx("span",{children:s("total")}),a.jsx("span",{children:a.jsx(o.t,{number:H,customCurrency:I?.currency})})]}),M?.[0]?.transaction?.payment_system?.tag!=="cash"&&M?.[0]?.transaction?.status==="progress"&&a.jsx("div",{className:"py-7 text-[26px] font-semibold border-b border-t border-gray-link",children:a.jsx(v.z,{fullWidth:!0,loading:w,onClick:()=>$(M?.[0]),children:s("pay")})}),(0,a.jsxs)("div",{className:"py-3",children:[a.jsx("strong",{className:"text-2xl font-semibold mt-3",children:s("reschedule.policy")}),a.jsx("p",{className:"text-base",children:s("reschedule.policy.description")})]}),(0,a.jsxs)("div",{className:"pt-3",children:[a.jsx("strong",{className:"text-2xl font-semibold mt-3",children:s("cancellation.policy")}),a.jsx("p",{className:"text-base",children:s("cancellation.policy.description")})]})]}):a.jsx(q,{smallText:!0,text:"select.booking",animated:!1})}},2504:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(95344);s(3729);let i=e=>(0,a.jsxs)("svg",{width:e.size||"20",height:e.size||"20",...e,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("g",{clipPath:"url(#clip0_1_9251)",children:a.jsx("path",{d:"M9.66825 11.4667L10.8449 12.6434L17.8999 5.58838L19.0783 6.76671L10.8449 15L5.54159 9.69671L6.71992 8.51838L8.49075 10.2892L9.66825 11.4659V11.4667ZM9.66992 9.11004L13.7966 4.98254L14.9716 6.15754L10.8449 10.285L9.66992 9.11004ZM7.31409 13.8225L6.13659 15L0.833252 9.69671L2.01159 8.51838L3.18909 9.69588L3.18825 9.69671L7.31409 13.8225Z",fill:"currentColor"})}),a.jsx("defs",{children:a.jsx("clipPath",{id:"clip0_1_9251",children:a.jsx("rect",{width:"20",height:"20",fill:"white"})})})]})},70224:(e,t,s)=>{"use strict";s.d(t,{K:()=>l});var a=s(95344),i=s(3729),r=s(9758);let l=(0,i.forwardRef)(({error:e,icon:t,placeholder:s,required:l,...n},d)=>{let{t:o}=(0,r.$G)(),c=(0,i.useId)();return(0,a.jsxs)("div",{className:"flex flex-col ",children:[(0,a.jsxs)("label",{htmlFor:c,className:"relative inline-flex gap-3",children:[a.jsx("div",{className:"absolute top-5 left-3",children:t}),a.jsx("textarea",{className:"form-textarea block bg-gray-faq w-full  focus:border-primary px-4 rounded-button border border-transparent py-3 outline-none  placeholder:text-text text-sm resize-none",ref:d,id:c,placeholder:`${o(s||"")}${l?"*":""}`,...n})]}),!!e&&a.jsx("p",{role:"alert",className:"text-sm text-red mt-1",children:o(e)})]})})},48938:function(e,t){var s,a;void 0!==(a="function"==typeof(s=function(){"use strict";var t="object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,s=(t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&/Safari/.test(navigator.userAgent),t.saveAs||function(){});t.saveAs=s.saveAs=s,e.exports=s})?s.apply(t,[]):s)&&(e.exports=a)},34713:(e,t,s)=>{"use strict";s.d(t,{X:()=>r});var a=s(80992),i=s(11204);let r={getForm:e=>(0,a.Z)((0,i.d)("v1/rest/form-options",e)),updateForm:(e,t)=>a.Z.put(`v1/dashboard/user/bookings/${e}`,{body:{data:{form:t}}})}},10947:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(80992),i=s(11204);let r={getAllReviews:(e,t,s)=>{let r="";return r="products"===e?`v1/rest/${e}/reviews/${t}`:`v1/rest/${e}/${t}/reviews`,(0,a.Z)((0,i.d)(r,s))},checkCanReview:e=>(0,a.Z)((0,i.d)("v1/rest/added-review",e)),getRating:e=>(0,a.Z)((0,i.d)("v1/rest/review/options",e)),getGroupRating:(e,t)=>(0,a.Z)(`v1/rest/${e}/${t}/reviews-group-rating`),createReview:(e,t,s)=>a.Z.post(`v1/dashboard/user/${e}/review/${t}`,{body:s})}}};