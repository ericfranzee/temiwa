"use strict";exports.id=971,exports.ids=[971],exports.modules={30971:(e,r,s)=>{s.r(r),s.d(r,{default:()=>y});var l=s(95344),t=s(3729),a=s(9758),i=s(84502),o=s(60708),n=s(96040),d=s(91451),c=s(1781),p=s(20157),f=s(1475),u=s(1356),m=s(32438),x=s(2209),h=s(92232),b=s(8428),g=s(55701);let w=i.object({firstname:i.string().required(),lastname:i.string().required(),referral:i.string(),password:i.string().required(),password_confirmation:i.string().nullable().oneOf([i.ref("password"),null])}),y=({credential:e,idToken:r})=>{let{t:s}=(0,a.$G)(),{handleSync:i}=(0,g.t)(),[y,j]=(0,t.useState)(!1),{fcmToken:v}=(0,x.n)(),N=(0,h.Z)(e=>e.signIn),k=(0,b.useRouter)(),I=(0,b.useSearchParams)(),{register:W,formState:{errors:S},handleSubmit:_}=(0,o.cI)({resolver:(0,n.X)(w)}),Z=e=>{(0,f.Vp)("successfully.signed.up"),(0,u.d8)("token",`${e.token_type} ${e.access_token}`),v&&m.W.updateFirebaseToken({firebase_token:v}),N(e.user),i(),I.has("redirect")?k.replace(I.get("redirect")):k.replace("/")};return(0,l.jsxs)("div",{className:"flex flex-col gap-6  ",children:[l.jsx("h1",{className:"font-semibold text-[30px] mb-2 text-start",children:s("complete.auth")}),(0,l.jsxs)("form",{id:"complete",onSubmit:_(l=>{j(!0);let t={...l,referral:l?.referral?.trim()?.length?l.referral:void 0};if(e?.includes("@")?t.email=e:(t.phone=e?.replace(/[^0-9]/g,""),t.type="firebase",t.id=r),e?.includes("@")){p.O.signUpComplete(t).then(({data:e})=>{Z(e)}).catch(e=>(0,f.vU)(s(e?.message))).finally(()=>j(!1));return}p.O.phoneSignUpComplete(t).then(({data:e})=>{Z(e)}).catch(e=>(0,f.vU)(s(e?.message))).finally(()=>j(!1))}),children:[(0,l.jsxs)("div",{className:"flex flex-col gap-3 mb-8 w-full",children:[l.jsx(d.I,{fullWidth:!0,...W("firstname"),label:s("firstname"),error:S.firstname?.message}),l.jsx(d.I,{fullWidth:!0,...W("lastname"),label:s("lastname"),error:S.lastname?.message}),l.jsx(d.I,{fullWidth:!0,...W("referral"),label:s("referral"),error:S.referral?.message}),l.jsx(d.I,{fullWidth:!0,...W("password"),label:s("password"),type:"password",error:S.password?.message}),l.jsx(d.I,{fullWidth:!0,...W("password_confirmation"),label:s("password.confirmation"),type:"password",error:S.password_confirmation?.message})]}),l.jsx(c.z,{loading:y,fullWidth:!0,type:"submit",form:"complete",children:s("complete")})]})]})}},91451:(e,r,s)=>{s.d(r,{I:()=>n});var l=s(95344),t=s(42473),a=s(3729),i=s(9758),o=s(56086);let n=(0,a.forwardRef)(({fullWidth:e,label:r,type:s,className:n,error:d,rightIcon:c,status:p="default",autoComplete:f,placeholder:u,leftIcon:m,containerClassName:x,required:h,disabled:b,id:g,...w},y)=>{let[j,v]=(0,a.useState)(s||"text"),{t:N}=(0,i.$G)(),k=(0,a.useId)();return(0,l.jsxs)("div",{className:(0,t.Z)("relative flex flex-col items-start",e&&"w-full",x),children:[(0,l.jsxs)("div",{className:(0,t.Z)("relative",e&&"w-full"),children:[l.jsx("input",{ref:y,id:k,type:j,autoComplete:"off",placeholder:" ",disabled:b,...w,className:(0,t.Z)("block px-4 w-full text-sm  bg-transparent rounded-button border appearance-none focus:outline-none focus:ring-0  peer ",e&&"w-full",!!c&&"pr-8",!!m&&"pl-10",r?"pt-4 pb-[12px]":"py-[19px]","default"===p&&"border-gray-link focus-visible:border-primary","error"===p&&"border-badge-product focus-visible:border-red-700","success"===p&&"border-green-500 focus-visible:border-red-700",b&&"text-gray-field",n)}),"password"===s&&l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 z-10",children:l.jsx(o.h,{rounded:!0,type:"button",onClick:()=>{"password"===j?v("text"):v("password")},children:"password"===j?l.jsx("i",{className:"ri-eye-line"}):l.jsx("i",{className:"ri-eye-close-line"})})}),!!m&&l.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pr-3 z-[4]",children:m}),!!c&&l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-1.5 z-[4]",children:c}),(0,l.jsxs)("label",{htmlFor:k,className:(0,t.Z)("absolute text-sm text-gray-placeholder duration-300 transform -translate-y-3 scale-75 top-3.5 origin-[0] peer-focus:text-black dark:peer-focus:text-white peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3.5",m?"left-10 rtl:right-10 rtl:left-auto":"left-4 rtl:right-0 rtl:left-auto",b&&"text-gray-field"),children:[r,h&&"*"]})]}),d&&l.jsx("p",{role:"alert",className:"text-red text-sm mt-1",children:N(d)})]})})}};