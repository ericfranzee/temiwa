"use strict";exports.id=9196,exports.ids=[9196],exports.modules={2504:(t,e,r)=>{r.d(e,{Z:()=>a});var n=r(95344);r(3729);let a=t=>(0,n.jsxs)("svg",{width:t.size||"20",height:t.size||"20",...t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("g",{clipPath:"url(#clip0_1_9251)",children:n.jsx("path",{d:"M9.66825 11.4667L10.8449 12.6434L17.8999 5.58838L19.0783 6.76671L10.8449 15L5.54159 9.69671L6.71992 8.51838L8.49075 10.2892L9.66825 11.4659V11.4667ZM9.66992 9.11004L13.7966 4.98254L14.9716 6.15754L10.8449 10.285L9.66992 9.11004ZM7.31409 13.8225L6.13659 15L0.833252 9.69671L2.01159 8.51838L3.18909 9.69588L3.18825 9.69671L7.31409 13.8225Z",fill:"currentColor"})}),n.jsx("defs",{children:n.jsx("clipPath",{id:"clip0_1_9251",children:n.jsx("rect",{width:"20",height:"20",fill:"white"})})})]})},77568:(t,e,r)=>{r.d(e,{b:()=>o});var n=r(95344),a=r(3729);let i=({threshold:t=.1,root:e=null,rootMargin:r="50%",enabled:n=!1,onScreen:i=()=>null})=>{let s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let a=s?.current;if(!n||!a)return;let o=new IntersectionObserver(t=>t.forEach(t=>{t.isIntersecting&&i()}),{threshold:t,root:e,rootMargin:r});return o.observe(a),()=>{o.unobserve(a)}},[s?.current,n]),s};var s=r(55863);let o=({hasMore:t,loadMore:e,loading:r=!1,children:a})=>{let o=i({enabled:!!t&&!r,onScreen:()=>{e()},rootMargin:"30px",threshold:.2});return(0,n.jsxs)(n.Fragment,{children:[a,r&&n.jsx("div",{className:"flex justify-center my-7",children:n.jsx(s.Z,{})}),n.jsx("span",{"aria-label":"bottom",ref:o,style:{visibility:"hidden"}})]})}},99196:(t,e,r)=>{r.r(e),r.d(e,{NotificationPanel:()=>j});var n=r(95344);r(3729);var a=r(9758),i=r(2504),s=r(11494),o=r(40219),u=r(14373),c=r(96476),l=r(8102),d=r(42473),f=r(92232),h=r(44224),m=r(11343),p=r(77568),y=r(97273),x=r(48869),g=r.n(x),$=r(8428),v=r(75488),b=r(64191);let D=({data:t,onClick:e})=>{let r=(0,$.useRouter)(),a=(0,s.NL)(),{hourFormat:i}=(0,b.L)(),{mutate:o}=(0,u.D)({mutationFn:()=>c.B.readById(t.id),onMutate:async()=>{let e=a.getQueryData(["notificationStatistics"]),r=a.getQueryData(["notifications"],{exact:!1});return a.setQueryData(["notificationStatistics"],r=>r?{...r,[t.type]:r[t.type]-1<0?0:r[t.type]-1,notification:r.notification-1<0?0:r.notification-1}:e),a.setQueriesData({queryKey:["notifications"],exact:!1},e=>e?{...e,pages:e.pages.map(e=>({...e,data:e.data?.map(e=>e.id===t.id?{...e,read_at:new Date(Date.now()).toISOString()}:e)}))}:r),{prevStatistics:e,prevNotifications:r}},onError:(t,e,r)=>{a.setQueryData(["notificationStatistics"],r?.prevStatistics),a.setQueriesData({queryKey:["notifications"],exact:!1},r?.prevNotifications)},onSettled:async()=>{await a.invalidateQueries(["notificationStatistics"]),await a.invalidateQueries(["notifications"])}});return(0,n.jsxs)("button",{onClick:n=>{if(o(),t.data?.id&&v.VW[t.model_type]){r.push(`/${v.VW[t.model_type]}/${t.data?.id}`,{scroll:!1});return}e&&e(),n.preventDefault(),n.stopPropagation()},className:"bg-gray-faq dark:bg-gray-darkSegment rounded-2xl p-5 relative text-start",children:[!t.read_at&&n.jsx("div",{className:"absolute top-4 right-4 w-2.5 h-2.5 rounded-full bg-primary"}),n.jsx("span",{className:"text-xs font-medium text-gray-disabledTab",children:g()(t.created_at).format(`DD MMM, YY ${i}`)}),n.jsx("div",{className:"text-base font-medium leading-7 mt-2 line-clamp-2",children:t.body})]})},w=(0,y.default)(()=>Promise.all([r.e(206),r.e(3610)]).then(r.bind(r,43610)).then(t=>({default:t.NotificationEmptyList})),{loadableGenerated:{modules:["/home/user/temiwa/components/notification-center/notification-list.tsx -> ./notification-empty-list"]}}),M=({type:t,onCardClick:e,limitHeight:r})=>{let a=(0,f.Z)(t=>t.user),{data:i,isLoading:s,fetchNextPage:o,hasNextPage:u,isFetchingNextPage:l}=(0,h.N)(["notifications",t],({pageParam:e=1})=>c.B.getAll({type:t,column:"id",sort:"desc",perPage:4,page:e}),{getNextPageParam:t=>t.links.next&&t.meta.current_page+1,enabled:!!a}),y=(0,m.v)(i?.pages);return y&&y?.length===0||!a?n.jsx(w,{}):s?(0,n.jsxs)("div",{className:"flex flex-col gap-2.5 animate-pulse",children:[n.jsx("div",{className:"bg-gray-200 rounded-xl h-32"}),n.jsx("div",{className:"bg-gray-200 rounded-xl h-32"}),n.jsx("div",{className:"bg-gray-200 rounded-xl h-32"})]}):n.jsx("div",{className:(0,d.Z)(r&&"md:max-h-[500px] sm:max-h-[400px] max-h-[350px] overflow-y-auto"),children:n.jsx(p.b,{loadMore:o,hasMore:u,loading:l,children:n.jsx("div",{className:"flex flex-col gap-2.5 pb-10",children:y?.map(t=>n.jsx(D,{data:t,onClick:e},t.id))})})})},S=[{label:"all",type:"notification"},{label:"news",type:"news_publish"},{label:"orders",type:"status_changed"}],j=({onCardClick:t,limitHeight:e=!0})=>{let{t:r}=(0,a.$G)(),h=(0,s.NL)(),m=(0,f.Z)(t=>t.user),{data:p,isLoading:y}=(0,o.a)(["notificationStatistics"],()=>c.B.statistics(),{enabled:!!m}),{mutate:x}=(0,u.D)({mutationFn:()=>c.B.readAll(),onMutate:async()=>{let t=h.getQueryData(["notificationStatistics"]),e=h.getQueryData(["notifications"],{exact:!1});return h.setQueryData(["notificationStatistics"],e=>e?{notification:0,status_changed:0,news_publish:0,new_order:0,new_user_by_referral:0,transaction:0}:t),h.setQueriesData({queryKey:["notifications"],exact:!1},t=>t?{...t,pages:t.pages.map(t=>({...t,data:t.data?.map(t=>({...t,read_at:new Date(Date.now()).toISOString()}))}))}:e),{prevStatistics:t,prevNotifications:e}},onError:(t,e,r)=>{h.setQueryData(["notificationStatistics"],r?.prevStatistics),h.setQueriesData({queryKey:["notifications"],exact:!1},r?.prevNotifications)},onSettled:async()=>{await h.invalidateQueries(["notificationStatistics"]),await h.invalidateQueries(["notifications"])}});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[22px] font-semibold",children:r("notifications")}),!y&&n.jsx("button",{onClick:()=>x(),className:"focus-ring",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 border-b border-dark dark:border-white",children:[n.jsx(i.Z,{}),n.jsx("span",{className:"text-xs font-semibold",children:r("mark.as.read")})]})})]}),(0,n.jsxs)(l.O.Group,{children:[n.jsx(l.O.List,{className:"flex gap-5 space-x-1 mt-7 border-b border-gray-border",children:({selectedIndex:t})=>n.jsx(n.Fragment,{children:S.map((e,a)=>(0,n.jsxs)(l.O,{className:({selected:t})=>(0,d.Z)("focus-ring outline-none flex items-center gap-2.5 ring-offset-2",t?"border-b-2 border-dark dark:border-white":"text-gray-disabledTab pb-px"),children:[n.jsx("span",{className:"text-base font-medium",children:r(e.label)}),!!p?.[e.type]&&p?.[e.type]!==0&&m&&n.jsx("div",{className:(0,d.Z)("h-4 p-1 flex items-center justify-center rounded-full ",t===a?"bg-dark dark:bg-white":"bg-gray-disabledTab"),children:n.jsx("span",{className:"text-xs text-white dark:text-dark",children:p?.[e.type]})})]},e.type))})}),n.jsx(l.O.Panels,{className:"mt-2",children:S.map(r=>n.jsx(l.O.Panel,{className:"mt-4",children:n.jsx(M,{type:r.type,onCardClick:t,limitHeight:e})},r.type))})]})]})}},64191:(t,e,r)=>{r.d(e,{L:()=>a});var n=r(66345);let a=()=>{let{settings:t}=(0,n.r)();return{hourFormat:t?.hour_format||"HH:mm"}}},48869:t=>{t.exports=function(){var t="millisecond",e="second",r="minute",n="hour",a="week",i="month",s="quarter",o="year",u="date",c="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},h="en",m={};m[h]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||"th")+"]"}};var p="$isDayjsObject",y=function(t){return t instanceof v||!(!t||!t[p])},x=function t(e,r,n){var a;if(!e)return h;if("string"==typeof e){var i=e.toLowerCase();m[i]&&(a=i),r&&(m[i]=r,a=i);var s=e.split("-");if(!a&&s.length>1)return t(s[0])}else{var o=e.name;m[o]=e,a=o}return!n&&a&&(h=a),a||!n&&h},g=function(t,e){if(y(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new v(r)},$={s:f,z:function(t){var e=-t.utcOffset(),r=Math.abs(e);return(e<=0?"+":"-")+f(Math.floor(r/60),2,"0")+":"+f(r%60,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),a=e.clone().add(n,i),s=r-a<0,o=e.clone().add(n+(s?-1:1),i);return+(-(n+(r-a)/(s?a-o:o-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return({M:i,y:o,w:a,d:"day",D:u,h:n,m:r,s:e,ms:t,Q:s})[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}};$.l=x,$.i=y,$.w=function(t,e){return g(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var v=function(){function f(t){this.$L=x(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var h=f.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(l);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return $},h.isValid=function(){return this.$d.toString()!==c},h.isSame=function(t,e){var r=g(t);return this.startOf(e)<=r&&r<=this.endOf(e)},h.isAfter=function(t,e){return g(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<g(t)},h.$g=function(t,e,r){return $.u(t)?this[e]:this.set(r,t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,s){var c=this,l=!!$.u(s)||s,d=$.p(t),f=function(t,e){var r=$.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return l?r:r.endOf("day")},h=function(t,e){return $.w(c.toDate()[t].apply(c.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},m=this.$W,p=this.$M,y=this.$D,x="set"+(this.$u?"UTC":"");switch(d){case o:return l?f(1,0):f(31,11);case i:return l?f(1,p):f(0,p+1);case a:var g=this.$locale().weekStart||0,v=(m<g?m+7:m)-g;return f(l?y-v:y+(6-v),p);case"day":case u:return h(x+"Hours",0);case n:return h(x+"Minutes",1);case r:return h(x+"Seconds",2);case e:return h(x+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(a,s){var c,l=$.p(a),d="set"+(this.$u?"UTC":""),f=((c={}).day=d+"Date",c[u]=d+"Date",c[i]=d+"Month",c[o]=d+"FullYear",c[n]=d+"Hours",c[r]=d+"Minutes",c[e]=d+"Seconds",c[t]=d+"Milliseconds",c)[l],h="day"===l?this.$D+(s-this.$W):s;if(l===i||l===o){var m=this.clone().set(u,1);m.$d[f](h),m.init(),this.$d=m.set(u,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[$.p(t)]()},h.add=function(t,s){var u,c=this;t=Number(t);var l=$.p(s),d=function(e){var r=g(c);return $.w(r.date(r.date()+Math.round(e*t)),c)};if(l===i)return this.set(i,this.$M+t);if(l===o)return this.set(o,this.$y+t);if("day"===l)return d(1);if(l===a)return d(7);var f=((u={})[r]=6e4,u[n]=36e5,u[e]=1e3,u)[l]||1,h=this.$d.getTime()+t*f;return $.w(h,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||c;var n=t||"YYYY-MM-DDTHH:mm:ssZ",a=$.z(this),i=this.$H,s=this.$m,o=this.$M,u=r.weekdays,l=r.months,f=r.meridiem,h=function(t,r,a,i){return t&&(t[r]||t(e,n))||a[r].slice(0,i)},m=function(t){return $.s(i%12||12,t,"0")},p=f||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(d,function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return $.s(e.$y,4,"0");case"M":return o+1;case"MM":return $.s(o+1,2,"0");case"MMM":return h(r.monthsShort,o,l,3);case"MMMM":return h(l,o);case"D":return e.$D;case"DD":return $.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(r.weekdaysMin,e.$W,u,2);case"ddd":return h(r.weekdaysShort,e.$W,u,3);case"dddd":return u[e.$W];case"H":return String(i);case"HH":return $.s(i,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return p(i,s,!0);case"A":return p(i,s,!1);case"m":return String(s);case"mm":return $.s(s,2,"0");case"s":return String(e.$s);case"ss":return $.s(e.$s,2,"0");case"SSS":return $.s(e.$ms,3,"0");case"Z":return a}return null}(t)||a.replace(":","")})},h.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},h.diff=function(t,u,c){var l,d=this,f=$.p(u),h=g(t),m=(h.utcOffset()-this.utcOffset())*6e4,p=this-h,y=function(){return $.m(d,h)};switch(f){case o:l=y()/12;break;case i:l=y();break;case s:l=y()/3;break;case a:l=(p-m)/6048e5;break;case"day":l=(p-m)/864e5;break;case n:l=p/36e5;break;case r:l=p/6e4;break;case e:l=p/1e3;break;default:l=p}return c?l:$.a(l)},h.daysInMonth=function(){return this.endOf(i).$D},h.$locale=function(){return m[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=x(t,e,!0);return n&&(r.$L=n),r},h.clone=function(){return $.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},f}(),b=v.prototype;return g.prototype=b,[["$ms",t],["$s",e],["$m",r],["$H",n],["$W","day"],["$M",i],["$y",o],["$D",u]].forEach(function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),g.extend=function(t,e){return t.$i||(t(e,v,g),t.$i=!0),g},g.locale=x,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[h],g.Ls=m,g.p={},g}()},11343:(t,e,r)=>{r.d(e,{v:()=>n});let n=t=>t?.reduce((t,e)=>t.concat(e.data),[])}};