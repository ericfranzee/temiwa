"use strict";exports.id=9308,exports.ids=[9308],exports.modules={3019:(e,t,s)=>{s.r(t),s.d(t,{BookingBackButton:()=>d});var r=s(95344),a=s(90543),i=s(97771),o=s(63383),l=s(3729);let d=({deletePayment:e,resetAll:t,deleteStaff:s,deleteAddress:d,deleteDate:n,deleteNotes:c})=>{let{dispatch:m}=(0,a.v)(),g=(0,l.useCallback)(()=>{if(e){m({type:i.Y.DeletePayment}),m({type:i.Y.DeleteGiftCart});return}if(t){m({type:i.Y.ResetBooking});return}if(n){m({type:i.Y.ClearDateTime,payload:{}});return}if(s){m({type:i.Y.UnSetMaster}),m({type:i.Y.DeleteUnsupportedMastersByServices});return}if(d){m({type:i.Y.DeleteAddress});return}c&&m({type:i.Y.DeleteNotes})},[e,t]);return r.jsx("div",{className:"hidden lg:block",children:r.jsx(o.x,{onClick:g})})}},2044:(e,t,s)=>{s.r(t),s.d(t,{BookingTotal:()=>F});var r=s(95344),a=s(1781),i=s(9758),o=s(70398),l=s(66345),d=s(40219),n=s(75102),c=s(82177),m=s(21335),g=s(8428),p=s(90543),h=s(89410),x=s(48869),u=s.n(x),f=s(26772),b=s.n(f),v=s(56506),j=s(92249),k=s(74769),y=s(80806),w=s.n(y),_=s(3729),C=s(89722),N=s(56067),Z=s(97273),B=s(17329),$=s(97771),S=s(92232),E=s(48333);let I=(0,Z.default)(()=>s.e(2660).then(s.bind(s,62660)).then(e=>({default:e.GiftCartSelect})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/(witout-footer)/(navigation)/shops/[id]/components/booking-total/booking-total.tsx -> ./gift-cart-select"]},loading:()=>r.jsx(B.W,{})}),Y=(0,Z.default)(()=>s.e(2258).then(s.bind(s,72258)).then(e=>({default:e.BookingCouponCheck})),{loadableGenerated:{modules:["/home/user/temiwa/app/(store)/(booking)/(witout-footer)/(navigation)/shops/[id]/components/booking-total/booking-total.tsx -> ../coupon-check"]}});u().extend(w()),u().extend(b());let F=({data:e,nextPage:t,onClick:s,isLoading:x,checkStaff:f,checkDate:b,checkPayment:y,checkLocation:w,checkNotePageAuth:Z,hasExtraAddressForm:B,showCoupon:F=!1,runCalculate:A=!1})=>{let{language:M,currency:D}=(0,l.r)(),G=(0,S.Z)(e=>e.user),{t:z}=(0,i.$G)(),O=(0,g.useSearchParams)(),{state:T,dispatch:R}=(0,p.v)(),W=(0,g.useRouter)(),[P,U]=(0,_.useTransition)(),[J,q,L]=(0,C.d)(),{data:V}=(0,d.a)(["shop",e?.data.id,M?.locale],()=>n.m.getById(e?.data.id,{lang:M?.locale,currency_id:D?.id}),{initialData:e}),H={data:T.services.map(e=>{let t=T.dateAndTimes.find(t=>t.serviceMasterId===e.master?.service_master?.id);return{service_master_id:e.master?.service_master?.id,user_member_ship_id:e.userMemberShipId,service_extras:e.selected_extras?.length?e.selected_extras.map(e=>e.id):void 0,start_date:`${u()(t?.date).format("YYYY-MM-DD")} ${t?.time}`}}),currency_id:D?.id,payment_id:T.payment?.id,user_gift_cart_id:T.giftCart?.shopGiftCartId,coupon:T.coupon},K=H.data.some(e=>e.user_member_ship_id),{data:Q,isError:X,isFetching:ee,isSuccess:et}=(0,d.a)(["bookingCalculate",T],()=>k.s.calculate(H,{lang:M?.locale}),{enabled:!!G&&!!T.time&&T.services.length>0&&A,retry:!1,meta:{showErrorMessageFromServer:!0}}),es=T.services.reduce((e,t)=>{let s=t?.selected_extras?.reduce((e,t)=>e+(t?.price||0),0);return e+(t?.master?.service_master?.price??t.min_price??t.price??t.total_price??0)+(s||0)},0),er=void 0===Q?.data?es:Q?.data.total_price,ea=t;T.master&&"/booking/staff"===t&&T.time&&(ea="/booking/note"),T.master&&"/booking/staff-select"===t&&T.time&&(ea="/booking/note"),T.master&&"/booking/staff"===t&&(ea="/booking/date"),T.services.some(e=>"offline_out"===e.type)&&"/booking/note"===t&&!T.address&&(ea="/booking/location");let ei=0===T.services.length;f&&(ei=T.services.some(e=>void 0===e.master)),b&&(ei=T.services.length>T.dateAndTimes.length),y&&(ei=!T.payment),w&&(ei=!T.address),Z&&(ei=!G);let eo=Q?.data.items.flatMap(e=>e.errors).filter(e=>void 0!==e);return(0,r.jsxs)("div",{className:"fixed lg:static bottom-0 w-screen lg:w-auto left-0 lg:rounded-button rounded-t-button py-5 lg:px-5 px-4 lg:border border-gray-link shadow-fixedBooking lg:shadow-none bg-white",children:[(0,r.jsxs)("div",{className:"hidden lg:flex items-center gap-4 border-b border-gray-link pb-7",children:[r.jsx("div",{className:"w-20 h-20 relative rounded-full border border-gray-link aspect-square ",children:r.jsx(c.I,{src:V?.data?.logo_img||"",alt:V?.data.translation?.title||"shop",fill:!0,className:"object-contain rounded-full w-20 h-20"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-[28px] font-semibold line-clamp-1",children:V?.data.translation?.title}),V?.data?.verify&&r.jsx("span",{children:r.jsx(E.Z,{})})]}),(0,r.jsxs)(v.default,{className:"flex items-start gap-1",href:(0,j.J)(V?.data.lat_long.latitude,V?.data.lat_long.longitude),target:"_blank",children:[r.jsx(o.Z,{}),r.jsx("p",{className:"text-sm line-clamp-2",children:V?.data.translation?.address})]})]})]}),!!T.master&&(0,r.jsxs)("div",{className:"flex items-center gap-1 border-b border-gray-link py-4",children:[r.jsx("div",{className:"w-14 h-14 relative",children:r.jsx(h.default,{src:T.master.img,alt:T.master.firstname||"master",className:"rounded-full object-cover",fill:!0})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-xl font-medium",children:[T.master.firstname," ",T.master?.lastname]}),r.jsx("span",{className:"text-gray-field text-base font-semibold",children:z("master")})]})]}),0!==T.services.length&&r.jsx("div",{className:"hidden lg:block border-b border-gray-link",children:T.services.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between py-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xl font-semibold",children:e.translation?.title}),e.selected_extras?.map(e=>r.jsxs("p",{className:"text-base font-medium",children:[z("extra"),": ",e?.translation?.title]})),(0,r.jsxs)("span",{className:"text-base text-gray-field font-medium",children:[z("time"),": ",e?.master?.service_master?.interval??e.interval,z("min")]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xl font-semibold whitespace-nowrap",children:r.jsx(m.t,{number:e?.master?.service_master?.price??e?.min_price??e?.price??e?.total_price??0})}),e.selected_extras?.map(e=>r.jsx("p",{className:"text-base font-medium",children:r.jsx(m.t,{number:e?.price??0})},e.id))]})]},e.id),!!e.master&&!T.master&&(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-4",children:[r.jsx("div",{className:"w-14 h-14 relative",children:r.jsx(h.default,{src:e.master?.img,alt:e.master?.firstname||"master",className:"rounded-full object-cover",fill:!0})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-xl font-medium",children:[e.master?.firstname," ",e.master?.lastname]}),r.jsx("span",{className:"text-gray-field text-base font-semibold",children:z("master")})]})]})]},e.id))}),!!Q?.data?.coupon_price&&(0,r.jsxs)("div",{className:"hidden lg:flex items-center justify-between py-7 text-xl border-b border-gray-link",children:[r.jsx("strong",{children:z("coupon")}),r.jsx("strong",{children:r.jsx(m.t,{number:Q?.data?.coupon_price})})]}),!!Q?.data.total_discount&&(0,r.jsxs)("div",{className:"hidden lg:flex items-center justify-between py-7 text-xl border-b border-gray-link",children:[r.jsx("strong",{children:z("total.discount")}),r.jsx("strong",{children:r.jsx(m.t,{number:Q?.data.total_discount})})]}),!!Q?.data.total_gift_cart_price&&(0,r.jsxs)("div",{className:"hidden lg:flex items-center justify-between py-7 text-xl border-b border-gray-link",children:[r.jsx("strong",{children:z("total.gift.card")}),r.jsx("strong",{children:r.jsx(m.t,{number:Q?.data?.total_gift_cart_price})})]}),!!Q?.data.total_service_fee&&(0,r.jsxs)("div",{className:"hidden lg:flex items-center justify-between py-7 text-xl border-b border-gray-link",children:[r.jsx("strong",{children:z("total.service.fee")}),r.jsx("strong",{children:r.jsx(m.t,{number:Q?.data.total_service_fee})})]}),!!Q?.data?.total_extra_price&&(0,r.jsxs)("div",{className:"hidden lg:flex items-center justify-between py-7 text-xl border-b border-gray-link",children:[r.jsx("strong",{children:z("total.extras.price")}),r.jsx("strong",{children:r.jsx(m.t,{number:Q?.data?.total_extra_price})})]}),(0,r.jsxs)("div",{className:"hidden lg:flex items-center justify-between py-7 text-[26px] font-semibold",children:[r.jsx("strong",{children:z("total")}),r.jsx("strong",{children:r.jsx(m.t,{number:er??Q?.data.total_price})})]}),r.jsx("div",{children:eo?.map(e=>r.jsx("p",{className:"text-red text-sm",role:"alert",children:e},e))}),F&&r.jsx(Y,{defaultValue:T.coupon,shopId:V?.data.id,onCouponCheckSuccess:e=>R({type:$.Y.UpdateCoupon,payload:{name:e.name}}),onCouponCheckError:()=>R({type:$.Y.UpdateCoupon,payload:{name:void 0}})}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[s&&!!G&&et&&!K&&r.jsx(a.z,{color:"blackOutlined",size:"medium",fullWidth:!0,onClick:()=>T.giftCart?R({type:$.Y.DeleteGiftCart}):q(),children:z(T.giftCart?"delete.gift.cart":"use.gift.cart")}),r.jsx(a.z,{form:B?"external-address-form":void 0,onClick:()=>{if(!B){if(s){if("/booking/payment"===t){if(Q?.data?.total_price===0){s();return}}else{s();return}}U(()=>W.push(`/shops/${V?.data.slug}${ea||"/bookings"}${O.toString()?`?${O.toString()}`:""}`))}},color:"black",fullWidth:!0,size:"medium",loading:x||ee||P,disabled:ei||X||!!Q?.data&&!Q?.data.status||T.master?.id!==void 0&&T.unsupportedMastersByServices?.includes(T.master.id),children:z("book.now")})]}),r.jsx(N.u,{isOpen:J,onClose:L,withCloseButton:!0,children:r.jsx(I,{onSelect:L,shopId:V?.data.id})})]})}},70398:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(95344);let a=()=>r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M13.7467 5.63317C13.0467 2.55317 10.3601 1.1665 8.00006 1.1665C8.00006 1.1665 8.00006 1.1665 7.9934 1.1665C5.64006 1.1665 2.94673 2.5465 2.24673 5.6265C1.46673 9.0665 3.5734 11.9798 5.48006 13.8132C6.18673 14.4932 7.0934 14.8332 8.00006 14.8332C8.90673 14.8332 9.8134 14.4932 10.5134 13.8132C12.4201 11.9798 14.5267 9.07317 13.7467 5.63317ZM8.00006 8.97317C6.84006 8.97317 5.90006 8.03317 5.90006 6.87317C5.90006 5.71317 6.84006 4.77317 8.00006 4.77317C9.16006 4.77317 10.1001 5.71317 10.1001 6.87317C10.1001 8.03317 9.16006 8.97317 8.00006 8.97317Z",fill:"currentColor"})})},48333:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(95344);let a=({size:e=20})=>r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true","data-testid":"verificationBadge",version:"1.1",id:"svg965",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",width:e,height:e,children:r.jsx("g",{id:"g963",children:r.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z",id:"path961",fill:"#42A5F5"})})})},63383:(e,t,s)=>{s.d(t,{x:()=>r.BackButton});var r=s(49796)},27193:(e,t,s)=>{s.r(t),s.d(t,{ImageWithFallBack:()=>n});var r=s(95344),a=s(89410),i=s(3729),o=s(6256);let l=e=>`
<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <linearGradient id="g">
      <stop 
      stop-color="${e?"#383838":"#E2E2E2"}" offset="20%" />
      <stop stop-color="${e?"#A0A09C":"#F6F6F6"}" offset="50%" />
<stop stop-color="${e?"#383838":"#E2E2E2"}" offset="70%" />
</linearGradient>
</defs>
      <rect width="100%" height="100%" fill="${e?"#383838":"#E2E2E2"}" />
      <rect id="r" width="100%" height="100%" fill="url(#g)" />
      <animate xlink:href="#r" attributeName="x" from="-100%" to="100%" dur="1s" repeatCount="indefinite"  />
</svg>`,d=e=>Buffer.from(e).toString("base64"),n=e=>{let{src:t,loader:s,...n}=e,[c,m]=(0,i.useState)(!1),{theme:g}=(0,o.F)();return r.jsx(a.default,{...n,loader:c?void 0:s,src:c?"/img/image-load-failed.png":t,placeholder:`data:image/svg+xml;base64,${d(l("dark"===g))}`,onError:()=>{m(!0)}})}},82177:(e,t,s)=>{s.d(t,{I:()=>r.ImageWithFallBack});var r=s(27193)},21335:(e,t,s)=>{s.d(t,{t:()=>o});var r=s(95344),a=s(3729),i=s(66345);let o=({number:e,customCurrency:t})=>{let[s,o]=(0,a.useState)(!1),l=Number.isInteger(e)?e:e?.toFixed(2),{currency:d}=(0,i.r)(),n=t||d;return((0,a.useEffect)(()=>{o(!0)},[]),s)?n?.position==="after"?(0,r.jsxs)(r.Fragment,{children:[l||0," ",n?.symbol]}):(0,r.jsxs)(r.Fragment,{children:[n?.symbol," ",l||0]}):null}},90543:(e,t,s)=>{s.d(t,{v:()=>r.useBooking});var r=s(12434)},74769:(e,t,s)=>{s.d(t,{s:()=>l});var r=s(80992),a=s(11204),i=s(75488),o=s(1356);let l={calculate:(e,t)=>r.Z.post((0,a.d)("v1/dashboard/user/bookings/calculate",t),{body:e}),create:e=>r.Z.post("v1/dashboard/user/bookings",{body:e}),getAll:e=>(0,r.Z)((0,a.d)("v1/dashboard/user/bookings",e)),getById:(e,t)=>(0,r.Z)((0,a.d)(`v1/dashboard/user/bookings/${e}/get-all`,t)),cancel:e=>r.Z.post(`v1/dashboard/user/booking/parent/${e}/canceled`),createReview:(e,t)=>r.Z.post(`v1/dashboard/user/booking/review/${e}`,{body:t}),updateReview:(e,t)=>r.Z.put(`v1/dashboard/user/booking/review/${e}`,{body:t}),addNote:(e,t)=>r.Z.post(`v1/dashboard/user/bookings/${e}/notes/update`,{body:t}),checkCoupon:e=>r.Z.post((0,a.d)("v1/rest/coupons/check",e)),downloadInvoice:e=>fetch(`${i._n}v1/dashboard/user/export/booking/${e}/pdf`,{headers:{"Content-Type":"application/pdf",Authorization:(0,o.ej)("token")}})}},75102:(e,t,s)=>{s.d(t,{m:()=>i});var r=s(80992),a=s(11204);let i={getAll:e=>(0,r.Z)((0,a.d)("v1/rest/shops/paginate",e)),create:e=>r.Z.post("v1/dashboard/user/shops",{body:e}),getById:(e,t)=>(0,r.Z)((0,a.d)(`v1/rest/shops/${e}`,t),{cache:"no-cache",redirectOnError:!0}),getBySlug:(e,t)=>(0,r.Z)((0,a.d)(`v1/rest/shops/slug/${e}`,t),{cache:"no-store",redirectOnError:!0}),gellery:e=>(0,r.Z)(`v1/rest/shops/slug/${e}/galleries`,{redirectOnError:!0}),getByIds:e=>(0,r.Z)((0,a.d)("v1/rest/shops/paginate",e)),getAllTags:e=>(0,r.Z)((0,a.d)("v1/rest/shops-takes",e)),getShopFilters:()=>(0,r.Z)("v1/rest/shop-filter")}},92249:(e,t,s)=>{s.d(t,{J:()=>r});let r=(e,t)=>`https://www.google.com/maps/@${e},${t},15z`},83813:(e,t,s)=>{s.d(t,{R:()=>l});var r=s(86843);let a=(0,r.createProxy)(String.raw`/home/user/temiwa/app/(store)/(booking)/(witout-footer)/(navigation)/shops/[id]/booking/booking-back-button.tsx`),{__esModule:i,$$typeof:o}=a;a.default;let l=(0,r.createProxy)(String.raw`/home/user/temiwa/app/(store)/(booking)/(witout-footer)/(navigation)/shops/[id]/booking/booking-back-button.tsx#BookingBackButton`)},95643:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var r=s(25036);s(40002);let a=({children:e})=>r.jsx("div",{className:"pb-48 lg:pb-0",children:e})},39376:(e,t,s)=>{s.d(t,{m:()=>i});var r=s(99602),a=s(19510);let i={getAll:e=>(0,r.Z)((0,a.d)("v1/rest/shops/paginate",e)),create:e=>r.Z.post("v1/dashboard/user/shops",{body:e}),getById:(e,t)=>(0,r.Z)((0,a.d)(`v1/rest/shops/${e}`,t),{cache:"no-cache",redirectOnError:!0}),getBySlug:(e,t)=>(0,r.Z)((0,a.d)(`v1/rest/shops/slug/${e}`,t),{cache:"no-store",redirectOnError:!0}),gellery:e=>(0,r.Z)(`v1/rest/shops/slug/${e}/galleries`,{redirectOnError:!0}),getByIds:e=>(0,r.Z)((0,a.d)("v1/rest/shops/paginate",e)),getAllTags:e=>(0,r.Z)((0,a.d)("v1/rest/shops-takes",e)),getShopFilters:()=>(0,r.Z)("v1/rest/shop-filter")}}};